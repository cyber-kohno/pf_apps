(this.webpackJsonppixel_flare=this.webpackJsonppixel_flare||[]).push([[0],{10:function(e,n,t){"use strict";var a,r,i,c,o,l,s,u,d,b,f,j=t(3),p=t(4);!function(e){var n=e.FONT_SMALL=16,t=e.FONT_MIDIUM=22,a=(e.FONT_LARGE=32,e.CSS_LABEL=Object(p.a)(s||(s=Object(j.a)(["\n        display: inline-block;\n        font-weight: 600;\n        text-align: center;\n        color: black;\n        box-sizing: border-box;\n    "]))));e.CSS_LABEL_SMALL=Object(p.a)(u||(u=Object(j.a)(["\n        ","\n        height: 22px;\n        font-size: ","px;\n        line-height: 18px;\n    "])),a,n),e.CSS_LABEL_MIDIUM=Object(p.a)(d||(d=Object(j.a)(["\n        ","\n        height: 30px;\n        font-size: ","px;\n        line-height: 26px;\n    "])),a,t),e.CSS_BUTTON_DISABLE=Object(p.a)(b||(b=Object(j.a)(["\n        pointer-events: none;\n        opacity: 0.5;\n    "])))}(f||(f={})),n.a=f;p.b.div(a||(a=Object(j.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n"]))),p.b.div(r||(r=Object(j.a)(["\n    display: inline-block;\n"]))),p.b.div(i||(i=Object(j.a)(["\n    display: inline-block;\n    width: 100%;\n"]))),Object(p.a)(c||(c=Object(j.a)(["\n    display: inline-block;\n    height: 22px;\n    font-size: 18px;\n    font-weight: 600;\n    color: black;\n    line-height: 18px;\n"]))),Object(p.a)(o||(o=Object(j.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: ","px;\n    font-weight: 600;\n    text-align: center;\n    color: black;\n    line-height: 24px;\n    box-sizing: border-box;\n"])),f.FONT_MIDIUM),Object(p.a)(l||(l=Object(j.a)(["\n    opacity: 0.6;\n    pointer-events: none;\n"])))},12:function(e,n,t){"use strict";var a,r,i,c,o=t(6),l=t(3),s=t(4),u=t(5),d=t(49),b=t(2),f=t(1);(c||(c={})).Component=function(e){var n,t,a,r=Object(b.useContext)(d.a),i=r.store,c=r.setStore,l=null!==(n=e.width)&&void 0!==n?n:600,s=null!==(t=e.height)&&void 0!==t?t:150,m=null!==(a=e.buttons)&&void 0!==a?a:[{label:"OK",callback:function(){i.system.dialog=null,c(Object(o.a)({},i))}}];return Object(f.jsxs)(j,{width:l,height:s,children:[Object(f.jsx)(p,{children:Object(f.jsx)(h,{children:e.message.split("\n").map((function(e,n){return Object(f.jsx)(u.a.Message,{message:e,isCenter:!0},n)}))})}),Object(f.jsx)(u.a.ButtonRecord,{align:"center",buttons:m})]})},n.a=c;var j=s.b.div(a||(a=Object(l.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),p=s.b.div(r||(r=Object(l.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 110px;\n    display: flex;\n    align-items: center;\n\n"]))),h=s.b.div(i||(i=Object(l.a)(["\n    /* text-align: center; */\n    display: inline-block;\n    width: 100%;\n    /* background-color: #bb6868e1; */\n"])))},120:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t.n(a),i=t(68),c=t.n(i),o=(t(82),t(49)),l=t(1),s=function(){return Object(a.useEffect)((function(){document.oncontextmenu=function(){return!1},document.onkeydown=function(e){if(e.ctrlKey&&["f","s"].includes(e.key))return!1}}),[]),Object(l.jsx)(o.b,{})},u=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,127)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(s,{})}),document.getElementById("root")),u()},49:function(e,n,t){"use strict";t.d(n,"a",(function(){return $d}));var a,r,i,c,o,l,s,u,d,b,f,j=t(8),p=t(6),h=t(11),m=t(7),x=t(2),g=["library","story"],v={system:{isSplash:!0,user:null,dialog:null,canDialogClose:!1,isSPMode:!1,logoutActions:[]},env:{isEditLibrary:!0,isUseLocalFile:!0,screenRate:1,scrollLock:!1},libraryData:null,storyData:null,fuseCacheList:[],cloud:null,fileHandle:null},O=t(77),y=t(13),k=t(3),w=t(4),E=t(9),S=t(5),C=t(1),T=function(e){var n,t=Object(x.useState)(e.activeNo),a=Object(m.a)(t,2),r=a[0],i=a[1],c=null!==(n=e.tabRecordNum)&&void 0!==n?n:1;return Object(x.useEffect)((function(){i(e.activeNo)}),[e.activeNo]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(L,{tabRecordNum:c,children:e.tabElements.map((function(n,t){return Object(C.jsx)(F,{name:n.name,isActive:t==r,isEnable:n.enable,selectTab:function(){return function(n){void 0!=e.selectTabIndex?e.selectTabIndex(n):i(n)}(t)}},t)}))}),Object(C.jsx)(I,{tabRecordNum:c,children:e.tabElements.map((function(e,n){return Object(C.jsx)(R,{cont:e.enable?e.cont:Object(C.jsx)(C.Fragment,{}),isActive:n===r},n)}))})]})},F=function(e){return Object(C.jsx)(N,{isEnable:e.isEnable,isActive:e.isActive,onClick:function(){return e.selectTab()},children:e.name})},R=function(e){return Object(C.jsx)(P,{isActive:e.isActive,children:e.cont})},L=w.b.div(a||(a=Object(k.a)(["\n    display: inline-block;\n    height: ","px;\n    text-align: left;\n    /* background-color: #ac3b3b; */\n    width: 100%;\n"])),(function(e){return 35*e.tabRecordNum})),I=w.b.div(r||(r=Object(k.a)(["\n    display: block;\n    background-color: #999999;\n    height: calc(100% - ","px);\n    border-radius: 0 6px 6px 6px;\n    /* box-shadow: 0 2px 0 0 #000b3a48; */\n    text-align: left;\n"])),(function(e){return 35*e.tabRecordNum})),P=w.b.div(i||(i=Object(k.a)(["\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    ","\n"])),(function(e){return e.isActive?Object(w.a)(o||(o=Object(k.a)(["display: inline-block;"]))):Object(w.a)(c||(c=Object(k.a)(["display: none;"])))})),N=w.b.div(l||(l=Object(k.a)(["\n    display: inline-block;\n    /* width: 100px; */\n    padding: 0 10px;\n    \n    ","\n    /* opacity: 0.7; */\n    user-select: none;\n    margin-right: 6px;\n    font-weight: 600;\n    box-sizing: border-box;\n    line-height: 30px;\n    vertical-align: bottom;\n    transition: padding 100ms;\n"])),(function(e){return e.isActive?Object(w.a)(s||(s=Object(k.a)(["\n                color: #ebebeb;\n                padding: 0 35px;\n                background-color: #999999;\n                height: 35px;\n                font-size: 24px;\n                border-radius: 3px 15px 0 0;\n                text-shadow: 1px 2px 3px #00000065;\n            "]))):Object(w.a)(u||(u=Object(k.a)(["\n                height: 100%;\n                color: #555;\n                /* background-color: #90909b; */\n                background: linear-gradient(to bottom, #999999, #7a7a7a);\n                height: 30px;\n                font-size: 18px;\n                margin-top: 5px;\n                border-radius: 3px 10px 0 0;\n                ","\n            "])),e.isEnable?"":Object(w.a)(d||(d=Object(k.a)(["\n                    pointer-events: none;\n                    opacity: 0.7;\n                "]))))}));(f=b||(b={})).AUTH_TEXT_WIDTH=350,f.AUTH_TEXT_HEIGHT=70,f.SESSTION_KEY_LOGIN="pixelflare-login-sesq";var A,M=b;!function(e){var n=e.createURL=function(e,n,t){var a=document.createElement("canvas"),r=a.getContext("2d");return a.width=e,a.height=n,t(r),a.toDataURL()};e.getLogoURL=function(){return A.createURL(360,80,(function(e){e.shadowColor="#555",e.shadowOffsetX=2,e.shadowOffsetY=1,e.shadowBlur=5,e.font="italic 50pt Arial",e.fillStyle="#c6dce2",e.fillText("Pixel ",14,64);var n=e.measureText("Pixel ").width;e.fillStyle="#768fc4",e.fillText("Flare",14+n,64),e.save()}))},e.getAuthTextURL=function(e){var t=M.AUTH_TEXT_WIDTH,a=M.AUTH_TEXT_WIDTH/6;return n(t,M.AUTH_TEXT_HEIGHT,(function(n){n.rotate(1*Math.PI/180);for(var t=0;t<e.length;t++){var r=e.charAt(t),i=60*Math.random(),c=60*Math.random();n.font="".concat(20+i,"pt Arial"),n.fillStyle="rgba("+[40,0,100,.05+.01*c]+")",n.fillText(r,t*a,60)}}))}}(A||(A={}));var B,_=A,D=t(28),q=t(27);!function(e){var n=Object(D.a)((function e(n){var t=this;Object(q.a)(this,e),this.owner=void 0,this.pos=void 0,this.prevPos=void 0,this.vec=void 0,this.frame=void 0,this.limit=void 0,this.isLive=void 0,this.drawer=void 0,this.extend=void 0,this.update=function(){t.pos.x+=t.vec.xy.x,t.pos.y+=t.vec.xy.y,t.extend.forEach((function(e){return e(t)})),t.frame===t.limit&&(t.isLive=!1),t.frame++},this.draw=function(e){t.drawer(t,e)},this.owner=n.owner,this.pos=n.pos,this.prevPos=n.pos,this.vec=n.vec,this.frame=0,this.limit=n.limit,this.isLive=!0,this.drawer=n.drawer,this.extend=n.extend}));e.Instance=n}(B||(B={}));var z,U=B;!function(e){e.createGradDrawer=function(e){var a,r=null!==(a=e.radius)&&void 0!==a?a:30;return function(a,i){var c;if(void 0!=e.flashAppearFrame){var o=e.flashAppearFrame,l=o+e.flashHideFrame;if(a.frame%l>=o)return}var s=r;if(void 0!=e.shrinkStartRate){var u=Math.floor(a.limit*e.shrinkStartRate);if(a.frame>u){var d=a.limit-u;s*=(d-(a.frame-u))/d}}var b=a.pos.x,f=a.pos.y,j=i.createRadialGradient(b,f,1,b,f,s),h=[],m=null!==(c=n(e.color))&&void 0!==c?c:{r:255,g:255,b:255,a:255};if(h.push({offset:0,color:t({r:255,g:255,b:255,a:Math.floor(.9*m.a)})}),h.push({offset:.2,color:t(Object(p.a)(Object(p.a)({},m),{},{a:Math.floor(.15*m.a)}))}),h.push({offset:1,color:t(Object(p.a)(Object(p.a)({},m),{},{a:1}))}),h.forEach((function(e){j.addColorStop(e.offset,e.color)})),i.globalAlpha=1,void 0!=e.disappearStartRate){var x=Math.floor(a.limit*e.disappearStartRate);if(a.frame>x){var g=a.limit-x,v=a.frame-x;i.globalAlpha=(g-v)/g}}i.fillStyle=j,i.beginPath(),i.arc(b,f,s,0,2*Math.PI,!1),i.fill()}};var n=e.convertRgbaFromColorCode=function(e){var n=e.split("#");if(2!==n.length||n[1].length<6)return null;var t=n[1],a=Number.parseInt(t.substring(0,2),16),r=Number.parseInt(t.substring(2,4),16),i=Number.parseInt(t.substring(4,6),16),c=1;return 8===t.length&&(c=Number.parseInt(t.substring(6,8),16)),{r:a,g:r,b:i,a:c}},t=e.convertColorCodeFromRgba=function(e){var n=Math.floor(e.r),t=Math.floor(e.g),a=Math.floor(e.b),r=Math.floor(e.a),i=("00"+n.toString(16)).slice(-2),c=("00"+t.toString(16)).slice(-2),o=("00"+a.toString(16)).slice(-2),l=("00"+r.toString(16)).slice(-2);return"#".concat(i).concat(c).concat(o).concat(l)};e.toWhite=function(e,n){return e}}(z||(z={}));var H,W=z;!function(e){var n=Object(D.a)((function e(n){var t=this;Object(q.a)(this,e),this.xy=void 0,this.rad=void 0,this.len=void 0,this.syncFromXY=function(){t.len=Math.sqrt(t.xy.x*t.xy.x+t.xy.y*t.xy.y),t.rad=Math.atan2(t.xy.y,t.xy.x)},this.syncFromRad=function(){t.xy.x=Math.cos(t.rad)*t.len,t.xy.y=Math.sin(t.rad)*t.len},this.xy=n,this.rad=0,this.len=0,this.syncFromXY()}));e.Vector=n}(H||(H={}));var J,V=H;!function(e){var n=function(e){return e.RADIUS="radius",e.COLOR_R="color_r",e.COLOR_G="color_g",e.COLOR_B="color_b",e.COLOR_A="color_a",e.THICKNESS="thickness",e}({});e.VisualParamType=n;e.VisualParams=Object.values(n);var t=function(e){return e.LIMIT="limit",e.POS_X="pos_x",e.POS_Y="pos_y",e.VEC_X="vec_x",e.VEC_Y="vec_y",e.VEC_RAD="vec_radian",e.VEC_LEN="vec_length",e}({});e.BehaviorParamType=t;e.BehaviorParams=Object.values(t);var a=function(e){return e.FRAME="self_frame",e.LIMIT="self_limit",e.POS_X="self_pos_x",e.POS_Y="self_pos_y",e.VEC_X="self_vec_x",e.VEC_Y="self_vec_y",e.VEC_RAD="self_vec_radian",e.VEC_LEN="self_vec_length",e}({});e.SelfParamType=a;e.SelfParams=Object.values(a);var r=function(e){return e.LOOP_COUNT="loop_count",e.LOOP_ITERATE="loop_iterate",e.INVOKE="invoke",e}({});e.ExtendParamType=r;e.ExtendParams=Object.values(r);var i=function(e){return e.DISAPPEAR_START="disappear_start",e.SHRINK_START="shrink_start",e.FLASH_APPEAR_FRAME="flash_appear_frame",e.FLASH_HIDE_FRAME="flash_hide_frame",e}({});e.EffectParamType=i;e.EffectParams=Object.values(i);var c=function(e){return e.DECAY_RATE="decay_rate",e.DECAY_LIMIT="decay_limit",e.GRAVITY_VAL="gravity_val",e.GRAVITY_LIMIT="gravity_limit",e}({});e.ModulateParamType=c;e.ModulateParams=Object.values(c);var o=function(e){return e.SCREEN_WIDTH="screen_width",e.SCREEN_HEIGHT="screen_height",e.PI="pi",e.RADIAN_ROUND="radian_round",e}({});e.ConstantType=o;e.Constants=Object.values(o)}(J||(J={}));var Y,X=J;(Y||(Y={})).build=function(e,n){if(void 0!=n.decayRate&&void 0!=n.decayLimit){var t=n.decayLimit,a=n.decayRate;e.push((function(e){e.vec.len>t&&(e.vec.len=e.vec.len*a,e.vec.syncFromRad())}))}if(void 0!=n.gravity&&void 0!=n.gravityLimit){var r=n.gravityLimit,i=n.gravity;e.push((function(e){e.vec.xy.y<r&&(e.vec.xy.y+=i,e.vec.syncFromXY())}))}};var G,K=Y;!function(e){var n=e.SCREEN_WIDTH=550,t=e.SCREEN_HEIGHT=550,a=(e.buildLogicProps=function(e,n,t,o,u){console.log(u);return function n(o,u,d){var b,f,j=u.concat(s);d.forEach((function(e){j.push({name:e.name+".len",value:e.array.length})}));var p=a("field-mng",o.mngs);null!=p&&p.data.fields.forEach((function(e){var n=e.data,t=i(n,j);j.push({name:n.name,value:t})}));var h=(null===(b=a("visual-mng",o.mngs))||void 0===b?void 0:b.data).params.map((function(e){return e.data})),m=(null===(f=a("behavior-mng",o.mngs))||void 0===f?void 0:f.data).params.map((function(e){return e.data})),x=function(e){return r(e,h,j)},g=function(e){return r(e,m,j)},v=Math.floor(g(X.BehaviorParamType.LIMIT)),O={x:g(X.BehaviorParamType.POS_X),y:g(X.BehaviorParamType.POS_Y)},y=new V.Vector({x:0,y:0});void 0!=m.find((function(e){return e.name===X.BehaviorParamType.VEC_X}))?(y.xy.x=g(X.BehaviorParamType.VEC_X),y.xy.y=g(X.BehaviorParamType.VEC_Y),y.syncFromXY()):(y.rad=g(X.BehaviorParamType.VEC_RAD),y.len=g(X.BehaviorParamType.VEC_LEN),y.syncFromRad());var k=[],w=a("inherit-mng",o.mngs);null!=w&&(j.push({name:X.BehaviorParamType.POS_X,value:O.x}),j.push({name:X.BehaviorParamType.POS_Y,value:O.y}),j.push({name:X.BehaviorParamType.VEC_X,value:y.xy.x}),j.push({name:X.BehaviorParamType.VEC_X,value:y.xy.y}),j.push({name:X.BehaviorParamType.VEC_RAD,value:y.rad}),j.push({name:X.BehaviorParamType.VEC_LEN,value:y.len}),w.data.inherits.forEach((function(e){var o,s,u=e.data;if(null===(o=u.disable)||void 0===o||!o){var b="create"===u.method?null===(s=a("inherit-logic",u.mngs))||void 0===s?void 0:s.data:function(e){var n=t.data.logicMng.data.defs.find((function(n){return n.data.name===e}));return void 0==n?null:n.data}(u.depend);null!=b&&k.push((function(e){var t,o=function(e){var n=j.find((function(n){return n.name===e.name}));void 0!=n?n.value=e.value:j.push(e)};o({name:X.SelfParamType.FRAME,value:e.frame}),o({name:X.SelfParamType.LIMIT,value:e.limit}),o({name:X.SelfParamType.POS_X,value:e.pos.x}),o({name:X.SelfParamType.POS_Y,value:e.pos.y}),o({name:X.SelfParamType.VEC_X,value:e.vec.xy.x}),o({name:X.SelfParamType.VEC_Y,value:e.vec.xy.y}),o({name:X.SelfParamType.VEC_RAD,value:e.vec.rad}),o({name:X.SelfParamType.VEC_LEN,value:e.vec.len});var s=[],f=a("inhfld-mng",u.mngs);null!=f&&f.data.fields.forEach((function(e){var n=e.data,t=i(n,j);s.push({name:n.name,value:t})}));var p=1,h=a("extend-mng",u.mngs).data.params.map((function(e){return e.data})),m=r(X.ExtendParamType.LOOP_COUNT,h,j.concat(s));if(null===(t=c(X.ExtendParamType.INVOKE,h,j))||void 0===t||t){void 0!=m&&(p=m);for(var x=function(t){var i,c=[{name:X.ExtendParamType.LOOP_COUNT,value:p},{name:X.ExtendParamType.LOOP_ITERATE,value:t}],o=d.map((function(e){var n;return{name:e.name+".itr",value:null!==(n=e.array[t])&&void 0!==n?n:0}})),f=(null===(i=a("send-mng",u.mngs))||void 0===i?void 0:i.data).params.map((function(e){return e.data})),h=f.filter((function(e){return!e.isArray})).map((function(e){var n;return{name:e.name,value:null!==(n=r(e.name,f,j.concat(s).concat(c).concat(o)))&&void 0!==n?n:0}})),m=f.filter((function(e){return e.isArray})).map((function(e){var n;return{name:e.name,array:null!==(n=l(e.name,f,d))&&void 0!==n?n:[]}})),x=n(b,h,m);e.owner.push(new U.Instance(x))},g=0;g<p;g++)x(g)}}))}})));K.build(k,{decayLimit:g(X.ModulateParamType.DECAY_LIMIT),decayRate:g(X.ModulateParamType.DECAY_RATE),gravity:g(X.ModulateParamType.GRAVITY_VAL),gravityLimit:g(X.ModulateParamType.GRAVITY_LIMIT)});var E=x(X.VisualParamType.RADIUS),S=x(X.VisualParamType.COLOR_R),C=x(X.VisualParamType.COLOR_G),T=x(X.VisualParamType.COLOR_B),F=x(X.VisualParamType.COLOR_A),R=x(X.EffectParamType.DISAPPEAR_START),L=x(X.EffectParamType.SHRINK_START),I=x(X.EffectParamType.FLASH_APPEAR_FRAME),P=x(X.EffectParamType.FLASH_HIDE_FRAME),N=function(){};return void 0!=E&&(N=W.createGradDrawer({radius:E,color:W.convertColorCodeFromRgba({r:S,g:C,b:T,a:F}),disappearStartRate:R,shrinkStartRate:L,flashAppearFrame:I,flashHideFrame:P})),{owner:e,pos:O,vec:y,limit:v,drawer:N,extend:k}}(n,o,u)},function(e,n){var t;return null!==(t=n.find((function(n){return n.type===e})))&&void 0!==t?t:null}),r=e.convertParamsToValue=function(e,n,t){var a=n.find((function(n){return n.name===e}));if(void 0!=a)return i(a,t)},i=function(e,n){var t=e.values.map((function(e){if("direct"===e.type)return Number(e.value);var t=n.find((function(n){return n.name===e.value}));return void 0==t?0:t.value})),a="",r=0;return e.formulaItems.forEach((function(e){var n=e;"var"===e?(n=t[r].toString(),r++):"rand("===e?n="Math.random()*(":"integer("===e&&(n="Math.floor("),a+=n})),Function("return (".concat(a,")"))()},c=e.convertParamsToBoolean=function(e,n,t){var a=n.find((function(n){return n.name===e}));if(void 0!=a)return o(a,t)},o=function(e,n){var t=e.values.map((function(e){if("direct"===e.type)return Number(e.value);var t=n.find((function(n){return n.name===e.value}));return void 0==t?0:t.value})),a="",r=0;return e.formulaItems.forEach((function(e,n){var i=e;"var"===e?(i=t[r].toString(),r++):"rand("===e?i="Math.random()*(":"integer("===e?i="Math.floor(":"="===e&&(i="=="),a+=i})),Function("return (".concat(a,")"))()},l=e.convertParamsToArray=function(e,n,t){var a=n.find((function(n){return n.name===e}));if(void 0!=a){var r=a.values[0];if("array"===r.type)return r.value.split(",").map((function(e){return Number(e)}));if("argument"===r.type){var i=t.find((function(e){return e.name===r.value}));return void 0==i?[]:i.array}}},s=e.ConstantValueMap=[{name:X.ConstantType.SCREEN_WIDTH,value:n},{name:X.ConstantType.SCREEN_HEIGHT,value:t},{name:X.ConstantType.PI,value:3.14159265359},{name:X.ConstantType.RADIAN_ROUND,value:6.28318530718}]}(G||(G={}));var Q,Z=G,$=t(10);!function(e){e.checkRequired=function(e){return e.length>0},e.checkStringLength=function(e,n,t){return 0===e.length||e.length>=n&&e.length<=t},e.checkAsciiChars=function(e){return n(e,"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")};var n=e.checkIncludesChars=function(e,n){for(var t=0;t<e.length;t++){var a=e.charAt(t);if(-1===n.indexOf(a))return!1}return!0};e.checkNumber=function(e){return!isNaN(Number(e))},e.checkNumberRange=function(e,n,t){if(!isNaN(Number(e))){var a=Number(e);return a>=n&&a<=t}return!0},e.checkAll=function(e){for(var n=!0,t=0;t<e.length;t++)if(!e[t]){n=!1;break}return n},e.checkArrayNumber=function(e){return void 0==e.split(",").find((function(e){return isNaN(Number(e))}))}}(Q||(Q={}));var ee,ne,te,ae,re,ie,ce,oe,le,se,ue,de,be,fe,je=Q;(fe=be||(be={})).createNode=function(e,n){return{data:e,parent:n,depth:n.depth+1,isOpen:!1,children:[]}},fe.getChildIndex=function(e){var n=e.parent;if(null!=n)for(var t=0;t<n.children.length;t++)if(e==n.children[t])return t;return-1},fe.Frame=function(e){var n,t,a=null!==(n=e.isDisable)&&void 0!==n&&n,r=null!==(t=e.focusNode)&&void 0!==t?t:null,i=Object(x.useRef)({}),c=function(){return function e(n,t,a){var r={data:t.data,depth:n,isOpen:!1,children:[],parent:a};return r.children=t.children.map((function(t){return e(n+1,t,r)})),r}(0,e.rootDataNode,null)},o=Object(x.useState)(c()),l=Object(m.a)(o,2),s=l[0],u=l[1];Object(x.useEffect)((function(){u(c())}),[e.rootDataNode]),Object(x.useEffect)((function(){null!=r&&null!=r.parent&&(r.parent.isOpen=!0)}),[r]);var d=Object(x.useMemo)((function(){var n=[];return function t(c,o){var l=c.data==(null===r||void 0===r?void 0:r.data);n.push(Object(C.jsxs)(Re,{width:i.current.scrollWidth,isActive:l,isRelation:!a&&function(){for(var e=!1,n=r;null!=n;){if(null==c.parent||c==n){e=!0;break}n=n.parent}return!1===e&&null!=r&&null!=r.parent&&(e=void 0!=r.parent.children.find((function(e){return e==c}))),e}(),isDisable:l&&a,children:[o.map((function(e,n){var t=[];return(o.length-1===n||e)&&t.push(e?Object(C.jsx)(Pe,{},t.length):Object(C.jsx)(Ie,{},t.length)),o.length-1===n&&t.push(Object(C.jsx)(Ne,{},t.length)),Object(C.jsx)(Le,{children:t},n)})),0===c.children.length?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(Ae,{onClick:function(){c.isOpen=!c.isOpen,u(Object(p.a)({},s))},children:c.isOpen?"-":"+"}),Object(C.jsx)(Me,{onClick:function(){e.clickEvent(c),u(Object(p.a)({},s))},onDoubleClick:function(){c.isOpen=!c.isOpen,u(Object(p.a)({},s))},children:e.getLabelJsx(c)})]},n.length)),c.isOpen&&c.children.forEach((function(e,n){t(e,o.slice().concat(c.children.length-1!==n))}))}(s,[]),n}),[s,e.invalidate,a]);return Object(C.jsx)(Fe,{ref:i,isDisable:a,children:d})};var pe,he,me,xe,ge,ve,Oe,ye,ke,we,Ee,Se,Ce,Te=be,Fe=w.b.div(ee||(ee=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #374a54;\n    width: calc(100% - 10px);\n    height: calc(100% - 10px);\n    box-sizing: border-box;\n    border: solid 1px #000;\n    margin: 5px;\n    overflow: auto;\n    ","\n"])),(function(e){return e.isDisable?Object(w.a)(ne||(ne=Object(k.a)(["\n        pointer-events: none;\n        background-color: #1f3642;\n    "]))):""})),Re=w.b.div(te||(te=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    ","\n    opacity: 0.3;\n    ","\n    ","\n    width: ","px;\n    height: 40px;\n    box-sizing: border-box;\n    white-space: nowrap;\n    /* border: solid 1px #000;\n    margin: 5px; */\n    & *{\n        vertical-align: top;\n    }\n    &:hover {\n        opacity: 1;\n    }\n"])),(function(e){return e.isDisable?Object(w.a)(ae||(ae=Object(k.a)(["\n        background-color: #459cff46;\n    "]))):""}),(function(e){return e.isRelation?Object(w.a)(re||(re=Object(k.a)(["\n        background-color: #ffffff28;\n        opacity: 1;\n    "]))):""}),(function(e){return e.isActive?Object(w.a)(ie||(ie=Object(k.a)(["\n        background-color: #b4d9dd83;\n        opacity: 1;\n    "]))):""}),(function(e){return e.width})),Le=w.b.div(ce||(ce=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #b6d5be; */\n    width: 40px;\n    height: 100%;\n    box-sizing: border-box;\n    /* border: solid 1px #000; */\n"]))),Ie=w.b.div(oe||(oe=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #b60000;\n    width: 4px;\n    height: 22px;\n    box-sizing: border-box;\n    margin: 0 0 0 20px;\n"]))),Pe=w.b.div(le||(le=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #b60000;\n    width: 4px;\n    height: 100%;\n    box-sizing: border-box;\n    margin: 0 0 0 20px;\n"]))),Ne=w.b.div(se||(se=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #b60000;\n    width: 16px;\n    height: 4px;\n    box-sizing: border-box;\n    margin: 18px 0 0 0;\n"]))),Ae=w.b.div(ue||(ue=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    background-color: #d1d1d1;\n    width: 30px;\n    height: calc(100% - 10px);\n    border: solid 1px #000;\n    margin: 5px 0 0 3px;\n    box-sizing: border-box;\n    font-size: 30px;\n    /* font-weight: 600; */\n    color: #6d1717;\n    line-height: 20px;\n    padding-left: 3px;\n"]))),Me=w.b.div(de||(de=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #ffffff3c; */\n    min-width: 100px;\n    height: 100%;\n    margin: 0 0  0 3px;\n    box-sizing: border-box;\n"]))),Be=t(12),_e=Object(x.createContext)({}),De=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useState)(null),r=Object(m.a)(a,2),i=r[0],c=r[1],o=Object(x.useState)(!1),l=Object(m.a)(o,2),s=l[0],u=l[1],d=Object(x.useState)(null),b=Object(m.a)(d,2),f=b[0],j=b[1],h=n.libraryData,g=Object(x.useMemo)((function(){return{data:h,children:Mt.getChildrenDataNode(h)}}),[h]),v=Object(x.useMemo)((function(){for(var e=i;null!=e;){var n=e.data.type;if(["logic-item","seed-item"].includes(n))return e;e=e.parent}return null}),[i]),O=function(){null!=v&&(n.system.dialog=Object(C.jsx)(Va.Component,{master:v.data,rootData:h,closeButtonAction:function(){n.system.dialog=null,t(Object(p.a)({},n))}}),t(Object(p.a)({},n)))};return Object(C.jsxs)(qe,{tabIndex:0,onKeyDown:function(e){if(!s&&null!=i)switch(e.key){case"ArrowRight":i.children.length>0&&(i.isOpen?c(i.children[0]):i.isOpen=!0,j({}));break;case"ArrowLeft":i.isOpen?i.isOpen=!1:null!=i.parent&&c(i.parent),j({});break;case"ArrowUp":if(null!=i.parent){var n=i.parent.children;n.forEach((function(e,t){if(i==e)return 0===t?(c(i.parent),j({})):(c(n[t-1]),j({})),1}))}break;case"ArrowDown":if(null!=i.parent){var t=i.parent.children;t.forEach((function(e,n){if(i==e&&n<t.length-1)return c(t[n+1]),j({}),1}))}break;case" ":null!=v&&O()}},children:[Object(C.jsxs)(ze,{children:[Object(C.jsx)(Ue,{children:Object(C.jsx)(S.a.ButtonRecord,{align:"left",buttons:[{label:"Preview",isEnable:null!=v,callback:O}]})}),Object(C.jsx)(He,{children:Object(C.jsx)(Te.Frame,{rootDataNode:g,clickEvent:function(e){c(e)},getLabelJsx:function(e){return Mt.getNodeDisplayJsx(e,(null===i||void 0===i?void 0:i.data)==e.data)},invalidate:f,focusNode:i,isDisable:s})})]}),Object(C.jsx)(We,{children:Object(C.jsxs)(Je,{children:[Object(C.jsx)(Ve,{children:Object(C.jsx)(Ye,{children:Mt.getTypeName(i)})}),Object(C.jsx)(_e.Provider,{value:{rootData:h,node:i,setFocusNode:c,invalidate:function(){j({})},isModify:s,setModify:u,setRootData:function(e){n.libraryData=e,t(Object(p.a)({},n))},removeSelf:function(){var e,n,t,a=i,r=-1;null===(e=a.parent)||void 0===e||e.children.forEach((function(e,n){e==a&&(r=n)})),null===(n=a.parent)||void 0===n||n.children.splice(r,1);var o=null===(t=a.parent)||void 0===t?void 0:t.data,l=Vt.getListParamName(o.type);null!=l&&(o.data[l].splice(r,1),c(a.parent),j({}))}},children:Object(C.jsx)(Xe,{children:Mt.getDetailComponent(i)})})]})})]})},qe=w.b.div(pe||(pe=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #6c8186;\n    width: 100%;\n    height: 100%;\n"]))),ze=w.b.div(he||(he=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #d5d4d87b;\n    width: calc(100% - ","px);\n    height: 100%;\n    vertical-align: top;\n"])),460),Ue=w.b.div(me||(me=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #d5d4d8; */\n    width: 100%;\n    height: 40px;\n"]))),He=(w.b.div(xe||(xe=Object(k.a)(["\n    display: inline-block;\n    width: 50%;\n"]))),w.b.div(ge||(ge=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    background-color: #7fbdb47a;\n    height: calc(100% - 40px);\n"])))),We=w.b.div(ve||(ve=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    background-color: #9fa9b6;\n    width: ","px;\n    height: 100%;\n    vertical-align: top;\n    box-sizing: border-box;\n"])),460),Je=w.b.div(Oe||(Oe=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    background-color: #c0c9c9;\n    width: calc(100% - 4px);\n    height: calc(100% - 4px);\n    margin: 2px 0 0 2px;\n"]))),Ve=w.b.div(ye||(ye=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    /* background-color: #b4b29e; */\n    width: 100%;\n    height: 40px;\n"]))),Ye=w.b.div(ke||(ke=Object(k.a)(["\n    ","\n    color: #a10000;\n    /* background-color: #bbd0d3; */\n    border: solid 1px #a10000;\n    box-sizing: border-box;\n    width: calc(100% - 20px);\n    margin: 5px 0 0 10px;\n    border-radius: 4px;\n"])),$.a.CSS_LABEL_MIDIUM),Xe=w.b.div(we||(we=Object(k.a)(["\n    width: calc(100% - 8px);\n    height: calc(100% - 44px);\n    margin: 0 0 0 4px;\n    background-color: #ccd2d3;\n    border: solid 1px #0026a1;\n    box-sizing: border-box;\n    border-radius: 4px;\n    overflow-y: auto;\n"]))),Ge=(w.b.div(Ee||(Ee=Object(k.a)(["\n    display: inline-block;\n    ","\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    background-color: #0012616c;\n    width: 100%;\n    height: 100%;\n"])),(function(e){return e.isVisible?"":Object(w.a)(Se||(Se=Object(k.a)(["\n        display: none;\n    "])))})),function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode;n.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Argument",callback:function(){var e=Vt.addChild({type:"argument-item",data:null},n);t(e)}}]})})})});(Ce||(Ce={})).Component=function(e){var n,t=Object(x.useContext)(_e),a=t.node,r=t.isModify,i=t.setModify,c=t.removeSelf,o=a.data,l=S.a.isCompleteCheck(e.checkableFields);return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Cancel",isEnable:r,callback:function(){null==o.data?c():e.mappingForm(),i(!1)}},{label:r?"Regist":"Modify",isEnable:!r||(null!==(n=e.isInputOK)&&void 0!==n?n:l),callback:function(){r?(null==o.data?e.firstRegist():e.modifyRegist(),i(!1)):i(!0)}}]})})};var Ke,Qe,Ze,$e,en,nn,tn,an=Ce,rn=function(){var e,n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useContext)(_e),i=r.node,c=r.removeSelf,o=r.setModify,l=r.isModify,s=r.invalidate,u=i.data,d=null===(e=i.parent)||void 0===e?void 0:e.parent,b=Object(x.useState)({value:"",errors:[]}),f=Object(m.a)(b,2),j=f[0],h=f[1],g=Object(x.useState)({value:"number",errors:[]}),v=Object(m.a)(g,2),O=v[0],y=v[1],k=Object(x.useMemo)((function(){var e,n,t=(null===(e=i.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.data).data;return Vt.getParamNameList(t)}),[i]),w=function(){var e=u.data;h(Object(p.a)(Object(p.a)({},j),{},{value:e.name})),y(Object(p.a)(Object(p.a)({},O),{},{value:e.valueType}))};return Object(x.useEffect)((function(){null==u.data?o(!0):w()}),[i]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:w,checkableFields:[j,O],firstRegist:function(){var e={name:j.value,valueType:O.value};e.name=j.value,u.data=e,sn(d,j.value,O.value)},modifyRegist:function(){var e=u.data,n=e.name;e.name=j.value,e.valueType=O.value,u.data=e,n!==j.value&&on(d,n,j.value)}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!l,checkable:j,setCheckable:h,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){var n=k.filter((function(e){return null==u.data||u.data.name!==e}));return!n.includes(e)},errorType:"relation"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Type",jsx:Object(C.jsx)(S.a.Combobox,{checkable:O,setCheckable:y,list:Mt.ArgTypes.map((function(e){return{value:e,labelText:e}})),headBlank:!0,width:200,isReadOnly:!l,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!l,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",isEnable:!l,callback:function(){var e=u.data,n=cn(i,e.name);0===n.length?(un(d,j.value),c()):(t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"[".concat(e.name,"] is referenced in the formula.\n").concat(n)}),a(Object(p.a)({},t)))}}]}),Vt.getSwapButtons(i,s)]})})]})},cn=function(e,n){var t=[];return Vt.searchVariableReferInFormula(e,(function(e){e.forEach((function(e){var a=e.data;a.values.forEach((function(e){"argument"===e.type&&e.value===n&&t.push(a.name)}))}))})),t},on=function(e,n,t){var a=function(e){e.forEach((function(e){e.data.values.forEach((function(e){"argument"===e.type&&e.value===n&&(e.value=t)}))}))},r=e.data,i=r.data,c=i.mngs.find((function(e){return"field-mng"===e.type}));void 0!=c&&a(c.data.fields);var o=i.mngs.find((function(e){return"visual-mng"===e.type}));void 0!=o&&a(o.data.params);var l=i.mngs.find((function(e){return"behavior-mng"===e.type}));void 0!=l&&a(l.data.params);var s=i.mngs.find((function(e){return"inherit-mng"===e.type}));void 0!=s&&s.data.inherits.forEach((function(e){var n,t,r=Vt.getInnerWrap(e,"inhfld-mng");null!=r&&a(r.data.fields),a((null===(n=Vt.getInnerWrap(e,"extend-mng"))||void 0===n?void 0:n.data).params),a((null===(t=Vt.getInnerWrap(e,"send-mng"))||void 0===t?void 0:t.data).params)}));var u=function(e){e.forEach((function(e){var a=e.data;a.name===n&&(a.name=t)}))};if("logic-item"===r.type){var d,b=function e(n){var t=n.mngs.find((function(e){return"inherit-mng"===e.type}));void 0!=t&&t.data.inherits.forEach((function(n){var t=n.data;if("create"===t.method){var a=Vt.getInnerWrapFixed(n,"inherit-logic").data;e(a)}else if("depend"===t.method&&t.depend===i.name){var r=Vt.getInnerWrapFixed(n,"send-mng").data;u(r.params)}}))};e.parent.children.forEach((function(e){b(e.data.data)}));var f=(null===(d=e.parent)||void 0===d?void 0:d.parent).data.data.seedMng.data.defs;console.log(f.length),f.forEach((function(e){var n=Vt.getInnerWrapFixed(e,"interface-mng"),t=Vt.getInnerWrapFixed(n,"seedsend-mng").data;u(t.params)}))}else if("inherit-logic"===r.type){var j,p=null===(j=e.parent)||void 0===j?void 0:j.data,h=Vt.getInnerWrapFixed(p,"send-mng").data;u(h.params)}},ln=function(e,n){var t=e.data,a=t.data;if("logic-item"===t.type){var r,i=function e(t){var r=t.children.find((function(e){return"inherit-mng"===e.data.type}));void 0!=r&&r.children.forEach((function(t){var r=t.data.data;"create"===r.method?e(Vt.getInnerNodeFixed(t,"inherit-logic")):"depend"===r.method&&r.depend===a.name&&n(Vt.getInnerNodeFixed(t,"send-mng"))}))};e.parent.children.forEach((function(e){i(e)})),(null===(r=e.parent)||void 0===r?void 0:r.parent).children[0].children.forEach((function(e){var t=Vt.getInnerNodeFixed(e,"interface-mng"),r=Vt.getInnerNodeFixed(t,"seedsend-mng");e.data.data.entry===a.name&&n(r)}))}else if("inherit-logic"===t.type){var c=Vt.getInnerNodeFixed(e.parent,"send-mng");n(c)}},sn=function(e,n,t){ln(e,(function(e){var a="array"===t,r=Vt.createParamWrap("send-item",{name:n,formulaItems:["var"],values:a?[{type:"array",value:""}]:[{type:"direct",value:"0"}],isArray:!!a||void 0});e.data.data.params.push(r),e.children.push(Te.createNode(r,e))}))},un=function(e,n){ln(e,(function(e){var t=e.data.data,a=-1;t.params.some((function(e,t){if(e.data.name==n)return a=t,1})),t.params.splice(a,1),e.children.splice(a,1)}))},dn=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=n.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Seed",callback:function(){var e={type:"seed-item",data:null};a.data.defs.push(e);var r=Te.createNode(e,n);n.children.push(r),t(r)}}]})})})},bn=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode;n.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Logic",callback:function(){var e=Vt.addChild({type:"logic-item",data:null},n);t(e)}}]})})})},fn=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useContext)(_e),r=a.removeSelf,i=a.node,c=a.setFocusNode,o=a.invalidate,l=a.setModify,s=a.isModify,u=i.data,d=Object(x.useState)({value:"",errors:[]}),b=Object(m.a)(d,2),f=b[0],j=b[1],h=Object(x.useMemo)((function(){var e,n=i.children.map((function(e){return e.data.type}));return["connector"===(null===(e=i.parent)||void 0===e?void 0:e.data).type,n.includes("argument-mng"),n.includes("field-mng"),n.includes("inherit-mng")]}),[i]),g=Object(m.a)(h,4),v=g[0],O=g[1],y=g[2],k=g[3],w=function(){if(!v){var e=u.data;j(Object(p.a)(Object(p.a)({},f),{},{value:e.name}))}},E=Object(x.useMemo)((function(){return"inherit-logic"===u.type?[]:Vt.getExistNameList(i)}),[i]);Object(x.useEffect)((function(){null==u.data?l(!0):w()}),[i,v]);var T=function(e,n,t){e?(Vt.removeChild(i,n,1),c(Object(p.a)({},i)),o()):(Vt.insertChild(t,i,n),c(Object(p.a)({},i)),o())};return Object(C.jsxs)(C.Fragment,{children:[v?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:w,checkableFields:[f],firstRegist:function(){var e={name:f.value,mngs:Vt.getDefaultLogicMngs()};e.name=f.value,u.data=e,e.mngs.forEach((function(e){var n=Te.createNode(e,i);n.data.data.params.forEach((function(e){n.children.push(Te.createNode(e,n))})),i.children.push(n)})),o(),t(Object(p.a)({},n))},modifyRegist:function(){var e=u.data,n=e.name;e.name=f.value,u.data=e,n!==e.name&&pn(i,n,e.name)}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!s,checkable:f,setCheckable:j,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return!E.includes(e)},errorType:"relation"}]})})})})]}),Object(C.jsx)(S.a.BorderPanel,{title:"element",isEnable:!s,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Argument",width:300,isUse:O,isEnable:!function(){var e=Vt.getInnerNode(i,"argument-mng");return null!=e&&e.children.length>0}(),callback:function(){T(O,0,{type:"argument-mng",data:{args:[]}})}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",isEnable:!0,jsx:Object(C.jsx)(S.a.Switch,{label:"Field",width:300,isUse:y,isEnable:!function(){var e=Vt.getInnerNode(i,"field-mng");return null!=e&&e.children.length>0}(),callback:function(){var e=0;O&&e++,T(y,e,{type:"field-mng",data:{fields:[]}})}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Inherit",width:300,isUse:k,isEnable:!function(){var e=Vt.getInnerNode(i,"inherit-mng");return null!=e&&e.children.length>0}(),callback:function(){var e=2;O&&e++,y&&e++,T(k,e,{type:"inherit-mng",data:{inherits:[]}})}})})]})}),v?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!s,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Vt.getReplicateButton(i,!s,"logic",n,t,o),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",callback:function(){var e=u.data,a=jn(i,e.name);0===a.length?r():(n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"[".concat(e.name,"] is referenced in the Inherit.\n").concat(a)}),t(Object(p.a)({},n)))}}]}),Vt.getSwapButtons(i,o)]})})]})},jn=function(e,n){var t=[];return hn(e,n,(function(e){t.push(e.id)})),t},pn=function(e,n,t){hn(e,n,(function(e){e.depend=t}))},hn=function(e,n,t){var a=e.parent,r=function e(a){var r=a.mngs.find((function(e){return"inherit-mng"===e.type}));void 0!=r&&r.data.inherits.forEach((function(a){var r=a.data;if("create"===r.method){var i=Vt.getInnerWrap(a,"inherit-logic");e(null===i||void 0===i?void 0:i.data)}else r.depend===n&&t(r)}))};a.children.forEach((function(e){r(e.data.data)}))},mn=function(e){return e[e.FIELD=0]="FIELD",e[e.INITIAL=1]="INITIAL",e[e.INHERIT_FIELD=2]="INHERIT_FIELD",e[e.INHERIT_EXTEND=3]="INHERIT_EXTEND",e[e.INHERIT_SEND=4]="INHERIT_SEND",e[e.SEED=-1]="SEED",e}(mn||{}),xn=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useContext)(_e),r=a.removeSelf,i=a.node,c=a.invalidate,o=a.setModify,l=a.isModify,s=i.data,u=Object(x.useState)({value:"",errors:[]}),d=Object(m.a)(u,2),b=d[0],f=d[1],j=Object(x.useState)([]),h=Object(m.a)(j,2),g=h[0],v=h[1],O=Object(x.useState)([]),y=Object(m.a)(O,2),k=y[0],w=y[1],E="field-item"===s.type,T="condition-item"===s.type,F=function(){var e=s.data;f({value:e.name,errors:[]}),v(e.formulaItems.slice()),w(e.values.map((function(e){return{inputType:{value:e.type,errors:[]},value:{value:e.value,errors:[]}}})))};Object(x.useEffect)((function(){null==s.data?o(!0):F()}),[i]);var R=Object(x.useMemo)((function(){var e;switch((null===(e=i.parent)||void 0===e?void 0:e.data).type){case"field-mng":return mn.FIELD;case"visual-mng":case"behavior-mng":return mn.INITIAL;case"inhfld-mng":return mn.INHERIT_FIELD;case"extend-mng":return mn.INHERIT_EXTEND;case"send-mng":return mn.INHERIT_SEND}return mn.SEED}),[i]),L=Object(x.useMemo)((function(){var e,n=[],t=[],a=[],r=(null===(e=i.parent)||void 0===e?void 0:e.data).type;if(["field-mng","behavior-mng","visual-mng","inhfld-mng","send-mng","extend-mng"].includes(r)){var c,o=(null===(c=function(){var e,n,t,a;switch(r){case"field-mng":case"visual-mng":case"behavior-mng":return null===(e=i.parent)||void 0===e?void 0:e.parent;case"inhfld-mng":case"send-mng":case"extend-mng":return null===i||void 0===i||null===(n=i.parent)||void 0===n||null===(t=n.parent)||void 0===t||null===(a=t.parent)||void 0===a?void 0:a.parent}}())||void 0===c?void 0:c.data).data,l=o.mngs.find((function(e){return"argument-mng"===e.type}));void 0!=l&&(n=l.data.args.filter((function(e){s.data;return"number"===e.data.valueType})).map((function(e){return e.data.name})),t=l.data.args.filter((function(e){s.data;return"array"===e.data.valueType})).map((function(e){return e.data.name})));var u=o.mngs.find((function(e){return"field-mng"===e.type}));R>=mn.INITIAL&&void 0!=u&&u.data.fields.forEach((function(e){var n=e.data.name;a.push(n)}))}else if("seedsend-mng"===r){var d,b=Vt.getInnerWrap((null===(d=i.parent)||void 0===d?void 0:d.parent).data,"seedarg-mng");if(null==b)throw new Error("argMng is undefined.");n=b.data.args.filter((function(e){return!e.data.isArray})).map((function(e){return e.data.name})),t=b.data.args.filter((function(e){return e.data.isArray})).map((function(e){return e.data.name}))}if(R>=mn.INHERIT_FIELD){if(a.push(X.BehaviorParamType.POS_X),a.push(X.BehaviorParamType.POS_Y),a.push(X.BehaviorParamType.VEC_X),a.push(X.BehaviorParamType.VEC_Y),a.push(X.BehaviorParamType.VEC_RAD),a.push(X.BehaviorParamType.VEC_LEN),R>=mn.INHERIT_EXTEND){var f,j=Vt.getInnerNode(null===(f=i.parent)||void 0===f?void 0:f.parent,"inhfld-mng");if(null!=j)j.data.data.fields.forEach((function(e){var n=e.data.name;a.push(n)}))}var p;if(R===mn.INHERIT_SEND)void 0!=Vt.getInnerWrap((null===(p=i.parent)||void 0===p?void 0:p.parent).data,"extend-mng").data.params.find((function(e){return e.data.name===X.ExtendParamType.LOOP_COUNT}))&&(a.push(X.ExtendParamType.LOOP_COUNT),a.push(X.ExtendParamType.LOOP_ITERATE))}return[n,t,a]}),[i]),I=Object(m.a)(L,3),P=I[0],N=I[1],A=I[2],M=Object(x.useMemo)((function(){var e,n,t=(null===(e=i.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.data).data;return Vt.getParamNameList(t)}),[i]);Object(x.useEffect)((function(){var e=0;if(g.forEach((function(n){"var"===n&&e++})),k.length<e){for(var n=e-k.length,t=0;t<n;t++)k.push({inputType:{value:"direct",errors:[]},value:{value:"",errors:[]}});w(k.slice())}else if(k.length>e){for(var a=k.length-e,r=0;r<a;r++)k.splice(k.length-a,a);w(k.slice())}}),[g]);var B=Object(x.useMemo)((function(){var e=0;return g.forEach((function(n){["(","rand(","integer("].includes(n)?e++:")"===n&&e--})),e}),[g]),_=Object(x.useMemo)((function(){return k.map((function(e,n){return Object(C.jsx)(S.a.FormRecord,{titleLabel:"var_".concat(n),labelWidth:90,marginTop:0===n?4:0,jsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Combobox,{checkable:e.inputType,width:142,isReadOnly:!l,setCheckable:function(e){k[n].inputType=e,l&&(k[n].value.value="direct"===e.value?"0":""),w(k.slice())},list:Mt.ParamInputTypes.filter((function(e){if(s.data.isArray)switch(e){case"direct":case"constant":case"self":case"field":return!1;case"array":case"argument":return!0}else switch(e){case"direct":case"constant":case"argument":return!0;case"field":return R>=mn.INITIAL;case"array.len":case"self":return R>=mn.INHERIT_FIELD;case"array.itr":return R>=mn.INHERIT_SEND;case"array":return!1}})).map((function(e){return{value:e,labelText:e}}))}),function(){var t=e.inputType.value;if("direct"===t)return Object(C.jsx)(S.a.TextField,{marginLeft:2,checkable:e.value,isNumber:!0,isReadOnly:!l,width:178,setCheckable:function(e){k[n].value=e,w(k.slice())},validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]});if("array"===t)return Object(C.jsx)(S.a.TextField,{marginLeft:2,checkable:e.value,isReadOnly:!l,width:178,setCheckable:function(e){k[n].value=e,w(k.slice())},validates:[{checker:function(e){return je.checkArrayNumber(e)},errorType:"value"}]});var a=s.data.isArray,r=[];switch(t){case"argument":r=a?N:P;break;case"field":r=A;break;case"self":r=X.SelfParams;break;case"constant":r=Z.ConstantValueMap.map((function(e){return e.name}));break;case"array.itr":r=N.map((function(e){return e+".itr"}));break;case"array.len":r=N.map((function(e){return e+".len"}))}return Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:e.value,width:178,isReadOnly:!l,setCheckable:function(e){k[n].value=e,w(k.slice())},list:r.map((function(e){return{value:e,labelText:e}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}()]})},n)}))}),[k,l]),D=function(){return g.length>0&&["var",")"].includes(g[g.length-1])},q=0===B&&k.length>0&&["var",")"].includes(g[g.length-1]),z=!q||void 0!=k.find((function(e){return e.value.errors.length>0})),U=function(e,n,t,a){return{label:e,width:n,isEnable:!s.data.isArray&&t,callback:function(){g.push(a),v(g.slice())}}};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:F,checkableFields:[],firstRegist:function(){var e={name:b.value,formulaItems:g.slice(),values:k.map((function(e){return{type:e.inputType.value,value:e.value.value}}))};e.name=b.value,s.data=e},isInputOK:0===B&&!z&&0===b.errors.length,modifyRegist:function(){var e=s.data;if(e.formulaItems=g.slice(),e.values=k.map((function(e){return{type:e.inputType.value,value:e.value.value}})),E){var n=e.name;e.name=b.value,n!==b.value&&vn(i.parent,n,b.value)}}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!l||!E,checkable:b,setCheckable:f,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){var n=M.filter((function(e){return null==s.data||s.data.name!==e}));return!n.includes(e)},errorType:"relation"}]})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[U("+",50,l&&D(),"+"),U("-",50,l&&D(),"-"),U("*",50,l&&D(),"*"),U("/",50,l&&D(),"/"),U("%",50,l&&D(),"%"),U("(",35,l&&!D(),"("),U(")",35,l&&D()&&B>0,")"),{label:"del",width:60,isEnable:l&&g.length>0,callback:function(){g.splice(g.length-1,1),v(g.slice())}}]}),T?Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[U("<",50,l&&D(),"<"),U("<=",50,l&&D(),"<="),U("=",50,l&&D(),"="),U(">=",50,l&&D(),">="),U(">",50,l&&D(),">"),U("&&",50,l&&D(),"&&"),U("||",50,l&&D(),"||")]}):Object(C.jsx)(C.Fragment,{}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[U("var",70,l&&!D(),"var"),U("rand",80,l&&!D(),"rand("),U("integer",80,l&&!D(),"integer("),{label:"clear",isEnable:l&&g.length>0,width:90,callback:function(){v([])}}]}),Object(C.jsx)(On,{isInvalid:!q,children:function(){var e=0,n=[];return g.forEach((function(t){n.length>0&&n.push(Object(C.jsx)("span",{children:"\xa0"},n.length)),"var"===t?(n.push(Object(C.jsx)(yn,{children:"${var_".concat(e,"}")},n.length)),e++):n.push(Object(C.jsx)(kn,{children:t},n.length))})),n}()}),_]})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!l&&E,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Vt.getReplicateButton(i,!l,"field",n,t,c),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",isEnable:!l,callback:function(){var e=s.data,a=gn(i,e.name);0===a.length?r():(n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"[".concat(e.name,"] is referenced in the formula.\n").concat(a)}),t(Object(p.a)({},n)))}}]}),E?Vt.getSwapButtons(i,c):Object(C.jsx)(C.Fragment,{})]})})]})},gn=function(e,n){var t=[];return Vt.searchVariableReferInFormula(e,(function(e){e.forEach((function(e){var a=e.data;a.values.forEach((function(e){"field"===e.type&&e.value===n&&t.push(a.name)}))}))})),t},vn=function(e,n,t){var a=function(e){e.forEach((function(e){e.data.values.forEach((function(e){"field"===e.type&&e.value===n&&(e.value=t)}))}))},r=e.data.type;if("field-mng"===r){var i,c=(null===(i=e.parent)||void 0===i?void 0:i.data).data,o=c.mngs.find((function(e){return"visual-mng"===e.type}));void 0!=o&&a(o.data.params);var l=c.mngs.find((function(e){return"behavior-mng"===e.type}));void 0!=l&&a(l.data.params);var s=c.mngs.find((function(e){return"inherit-mng"===e.type}));void 0!=s&&s.data.inherits.forEach((function(e){var n,t,r=Vt.getInnerWrap(e,"inhfld-mng");null!=r&&a(r.data.fields),a((null===(n=Vt.getInnerWrap(e,"extend-mng"))||void 0===n?void 0:n.data).params),a((null===(t=Vt.getInnerWrap(e,"send-mng"))||void 0===t?void 0:t.data).params)}))}else if("inhfld-mng"===r){var u,d,b,f=null===(u=e.parent)||void 0===u?void 0:u.data;a((null===(d=Vt.getInnerWrap(f,"extend-mng"))||void 0===d?void 0:d.data).params),a((null===(b=Vt.getInnerWrap(f,"send-mng"))||void 0===b?void 0:b.data).params)}},On=w.b.div(Ke||(Ke=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 12px);\n    ","\n    overflow-wrap: break-word;\n    height: 100px;//calc(100% - 4px);\n    color: #585858;\n    border: solid 1px #7a7a7abf;\n    box-sizing: border-box;\n    background-color: #ffffff8b;\n    ","\n    border-radius: 4px;\n    text-align: left;\n    padding: 0 0 0 4px;\n    vertical-align: top;\n    margin: 5px 0 0 6px;\n"])),$.a.CSS_LABEL_MIDIUM,(function(e){return e.isInvalid?Object(w.a)(Qe||(Qe=Object(k.a)(["\n        background-color: #ffe8628a;\n    "]))):""})),yn=w.b.span(Ze||(Ze=Object(k.a)(["\n    color: #e70013;\n"]))),kn=w.b.span($e||($e=Object(k.a)(["\n    color: #3333339d;\n"]))),wn=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=e.invalidate,r=(e.setModify,e.isModify),i=n.data.data,c=Object(x.useMemo)((function(){var e=n.children.map((function(e){return e.data.data.name}));return[e.includes(X.BehaviorParamType.VEC_X),e.includes(X.ModulateParamType.DECAY_RATE),e.includes(X.ModulateParamType.GRAVITY_VAL)]}),[n]),o=Object(m.a)(c,3),l=o[0],s=o[1],u=o[2],d=function(){!function(e,r,i,c){var o=(e?i:c).length;Vt.removeChild(n,r,o),(e?i:c).forEach((function(e,t){var a={type:"param-item",data:e};Vt.insertChild(a,n,r+t)})),t(Object(p.a)({},n)),a()}(!l,3,[{name:X.BehaviorParamType.VEC_X,formulaItems:["var"],values:[{type:"direct",value:"0"}]},{name:X.BehaviorParamType.VEC_Y,formulaItems:["var"],values:[{type:"direct",value:"0"}]}],[{name:X.BehaviorParamType.VEC_RAD,formulaItems:["var"],values:[{type:"direct",value:"0"}]},{name:X.BehaviorParamType.VEC_LEN,formulaItems:["var"],values:[{type:"direct",value:"0"}]}])},b=function(e,r,c){var o=c.length;e?(i.params.splice(r,o),n.children.splice(r,o),t(Object(p.a)({},n)),a()):(c.forEach((function(e,t){var a={type:"param-item",data:e};i.params.splice(r+t,0,a);var c=Te.createNode(a,n);n.children.splice(r+t,0,c)})),t(Object(p.a)({},n)),a())};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"method",isEnable:!r,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Vector method",width:300,isRelation:!0,isUse:l,callback:d})}),Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Direction method",width:300,isRelation:!0,isUse:!l,callback:d})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"modulate",isEnable:!r,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Decay",width:300,isUse:s,callback:function(){b(s,5,[{name:X.ModulateParamType.DECAY_RATE,formulaItems:["var"],values:[{type:"direct",value:"0.9"}]},{name:X.ModulateParamType.DECAY_LIMIT,formulaItems:["var"],values:[{type:"direct",value:"1"}]}])}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Gravity",width:300,isUse:u,callback:function(){b(u,s?7:5,[{name:X.ModulateParamType.GRAVITY_VAL,formulaItems:["var"],values:[{type:"direct",value:"0.2"}]},{name:X.ModulateParamType.GRAVITY_LIMIT,formulaItems:["var"],values:[{type:"direct",value:"10"}]}])}})})]})})]})},En=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=e.invalidate,r=(e.setModify,e.isModify),i=n.data.data,c=Object(x.useMemo)((function(){var e=n.children.map((function(e){return e.data.data.name})),t="blank";return e.length>0&&(t=e.includes(X.VisualParamType.THICKNESS)?"snake":"particle"),[t,e.includes(X.EffectParamType.DISAPPEAR_START),e.includes(X.EffectParamType.SHRINK_START),e.includes(X.EffectParamType.FLASH_APPEAR_FRAME)]}),[n]),o=Object(m.a)(c,4),l=o[0],s=o[1],u=o[2],d=o[3],b=function(e,r,i){var c=i.length;e?(Vt.removeChild(n,r,c),t(Object(p.a)({},n)),a()):(i.forEach((function(e,t){var a={type:"param-item",data:e};Vt.insertChild(a,n,r+t)})),t(Object(p.a)({},n)),a())};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"method",isEnable:!r,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",isEnable:!(u||s||d),jsx:Object(C.jsx)(S.a.Switch,{label:"None",width:300,isRelation:!0,isUse:"blank"===l,callback:function(){i.params.length=0,n.children.length=0,t(Object(p.a)({},n)),a()}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Particle Method",width:300,isRelation:!0,isUse:"particle"===l,callback:function(){var e;e=[{name:X.VisualParamType.RADIUS,formulaItems:["var"],values:[{type:"direct",value:"20"}]},{name:X.VisualParamType.COLOR_R,formulaItems:["var"],values:[{type:"direct",value:"255"}]},{name:X.VisualParamType.COLOR_G,formulaItems:["var"],values:[{type:"direct",value:"255"}]},{name:X.VisualParamType.COLOR_B,formulaItems:["var"],values:[{type:"direct",value:"255"}]},{name:X.VisualParamType.COLOR_A,formulaItems:["var"],values:[{type:"direct",value:"255"}]}],e.forEach((function(e,t){var a={type:"param-item",data:e};Vt.insertChild(a,n,t)})),t(Object(p.a)({},n)),a()}})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"effect",isEnable:!r&&"blank"!==l,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",isEnable:!d,jsx:Object(C.jsx)(S.a.Switch,{label:"Disappear",width:300,isUse:s,callback:function(){b(s,5,[{name:X.EffectParamType.DISAPPEAR_START,formulaItems:["var"],values:[{type:"direct",value:"0"}]}])}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",isEnable:!d,jsx:Object(C.jsx)(S.a.Switch,{label:"Shrink",width:300,isUse:u,callback:function(){b(u,s?6:5,[{name:X.EffectParamType.SHRINK_START,formulaItems:["var"],values:[{type:"direct",value:"0"}]}])}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",isEnable:!(u||s),jsx:Object(C.jsx)(S.a.Switch,{label:"Flash",width:300,isUse:d,callback:function(){b(d,5,[{name:X.EffectParamType.FLASH_APPEAR_FRAME,formulaItems:["var"],values:[{type:"direct",value:"1"}]},{name:X.EffectParamType.FLASH_HIDE_FRAME,formulaItems:["var"],values:[{type:"direct",value:"1"}]}])}})})]})})]})},Sn=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=e.invalidate,r=n.data.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Inherit",callback:function(){var e={type:"connector",data:null};r.inherits.push(e);var i=Te.createNode(e,n);n.children.push(i),t(i),a()}}]})})})},Cn=function(){var e,n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useContext)(_e),i=r.rootData,c=r.node,o=r.invalidate,l=r.setModify,s=r.isModify,u=r.removeSelf,d=r.setFocusNode,b=c.data,f=Object(x.useState)({value:"",errors:[]}),j=Object(m.a)(f,2),h=j[0],g=j[1],v=Object(x.useState)({value:"",errors:[]}),O=Object(m.a)(v,2),y=O[0],k=O[1],w=Object(x.useState)({value:"",errors:[]}),E=Object(m.a)(w,2),T=E[0],F=E[1],R=function(){var e=b.data;k(Object(p.a)(Object(p.a)({},y),{},{value:e.method})),F(Object(p.a)(Object(p.a)({},T),{},{value:e.depend})),g(Object(p.a)(Object(p.a)({},h),{},{value:e.id}))};Object(x.useEffect)((function(){if(null==b.data){l(!0);var e=Vt.getNumberingOnPrefixName("id_",c.parent);g(Object(p.a)(Object(p.a)({},h),{},{value:e}))}else R()}),[c]);var L="create"===y.value,I=Object(x.useMemo)((function(){return null!=Vt.getInnerNode(c,"inhfld-mng")}),[c]),P=Object(x.useMemo)((function(){return i.data.logicMng.data.defs.map((function(e){return e.data.name}))}),[c]),N=Object(x.useMemo)((function(){return Vt.getExistNameList(c)}),[c]),A=function(e){e.mngs=[],c.children=[],e.mngs.push({type:"extend-mng",data:{params:[]}}),e.mngs.push({type:"send-mng",data:{params:[]}}),L&&e.mngs.push({type:"inherit-logic",data:{mngs:Vt.getDefaultLogicMngs()}}),b.data=e,e.mngs.forEach((function(e){var n=Te.createNode(e,c);switch(n.data.type){case"inherit-logic":Vt.syncTreeElementFromWrap(n);break;case"send-mng":var t;"depend"===(null===(t=n.parent)||void 0===t?void 0:t.data).data.method&&(console.log("initSendParams"),M(n,i))}c.children.push(n)}))},M=function(e,n){var t=function(e,n){var t,a=(null===(t=e.parent)||void 0===t?void 0:t.data).data,r=n.data.logicMng.data.defs.find((function(e){return e.data.name===a.depend}));if(void 0!=r){var i=r.data.mngs[0];if("argument-mng"===i.type)return i.data.args.map((function(e){return e.data.name}))}return[]}(e,n),a=e.data.data.params,r=a.map((function(e){return e.data.name}));t.forEach((function(n){if(!r.includes(n)){var t=Vt.createParamWrap("send-item",{name:n,formulaItems:["var"],values:[{type:"direct",value:"0"}]});a.push(t),e.children.push(Te.createNode(t,e))}}))},B=null!=b.data&&(null!==(e=b.data.disable)&&void 0!==e&&e);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:R,checkableFields:[h,y,T],firstRegist:function(){var e={method:y.value,depend:T.value,id:h.value,mngs:[]};A(e),o()},modifyRegist:function(){var e=b.data,n=e.method!==y.value||e.depend!==T.value;e.method=y.value,e.depend=T.value,e.id=h.value,b.data=e,n&&A(e),o()}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Method",jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:y,width:178,isReadOnly:!s,setCheckable:function(e){"create"===e.value&&F(Object(p.a)(Object(p.a)({},T),{},{value:""})),k(e)},list:Mt.ConnectTypes.map((function(e){return{value:e,labelText:e}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Depend",isEnabled:"depend"===y.value,jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:T,width:270,isReadOnly:!s,setCheckable:F,list:P.map((function(e){return{value:e,labelText:e}})),headBlank:!0,dependency:[y],validates:[{checker:function(e){return"depend"!==y.value||je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Identify",jsx:Object(C.jsx)(S.a.TextField,{marginLeft:2,checkable:h,width:270,isReadOnly:!s,setCheckable:g,validates:[{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return je.checkStringLength(e,0,20)},errorType:"length"},{checker:function(e){return!N.includes(e)},errorType:"relation"}]})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"element",isEnable:!s,innerJsx:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.Record,{textAlign:"center",isEnable:!0,jsx:Object(C.jsx)(S.a.Switch,{label:"Field",width:300,isUse:I,isEnable:!function(){var e=Vt.getInnerNode(c,"inhfld-mng");return null!=e&&e.children.length>0}(),callback:function(){var e,n;e=0,n={type:"inhfld-mng",data:{fields:[]}},I?(Vt.removeChild(c,e,1),d(Object(p.a)({},c)),o()):(Vt.insertChild(n,c,e),d(Object(p.a)({},c)),o())}})})})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Disable",width:300,isUse:B,isEnable:!s,callback:function(){var e=b.data;e.disable=!B||void 0,o()}})}),Vt.getReplicateButton(c,!s,"inherit",t,a,o),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Edit local",isEnable:!s&&!L,callback:function(){t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Create a clone from the depended inherit logic.",buttons:[{label:"Cancel",callback:function(){t.system.dialog=null,a(Object(p.a)({},t))}},{label:"Conversion",callback:function(){var e=i.data.logicMng.data.defs.map((function(e){return e.data})).find((function(e){return e.name===T.value}));if(void 0!=e){var n={type:"inherit-logic",data:{mngs:JSON.parse(JSON.stringify(e)).mngs}},r=Vt.addChild(n,c);r.children=Mt.getChildrenElementNode(r);var l=b.data;l.method="create",l.depend="",R()}t.system.dialog=null,a(Object(p.a)({},t)),o()}}]}),a(Object(p.a)({},t))}}]}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Detach global",isEnable:!s&&L,callback:function(){t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Detach a clone from the this inherit logic.",buttons:[{label:"Cancel",callback:function(){t.system.dialog=null,a(Object(p.a)({},t))}},{label:"Conversion",callback:function(){for(var e=c;null!=e.parent;)e=e.parent;var n=c.children.find((function(e){return"inherit-logic"===e.data.type})),r=e.children.find((function(e){return"logic-mng"===e.data.type}));if(void 0!=r&&void 0!=n){var i=n.data.data,l=JSON.parse(JSON.stringify(i)),s=Vt.getNumberingOnPrefixName("clone_inherit_",r),u=Object(p.a)(Object(p.a)({},l),{},{name:s}),d={type:"logic-item",data:u},f=Vt.addChild(d,r);f.children=Mt.getChildrenElementNode(f),Vt.removeChild(c,2,1);var j=b.data;j.method="depend",j.depend=u.name,R(),t.system.dialog=null,a(Object(p.a)({},t)),o()}}}]}),a(Object(p.a)({},t))}}]}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",isEnable:!s,callback:function(){u()}}]}),Vt.getSwapButtons(c,o)]})})]})};!function(e){var n=296;e.ConnectParentPosition=function(e){var t=Object(x.useContext)($d),a=t.store,r=t.setStore,i=Object(x.useState)({value:"",errors:[]}),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)({value:"",errors:[]}),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useMemo)((function(){var n,t=Vt.getInnerWrap(null===(n=e.node.parent)||void 0===n?void 0:n.data,"inherit-logic").data;return Vt.getParamNameList(t)}),[e.node]),j=[{label:"Cancel",callback:function(){a.system.dialog=null,r(Object(p.a)({},a))}},{label:"Execute",isEnable:S.a.checkItems([o,d]),callback:function(){Vt.addChild(Vt.createParamWrap("send-item",{name:o.value,formulaItems:["var"],values:[{type:"self",value:X.SelfParamType.POS_X}]}),e.node),Vt.addChild(Vt.createParamWrap("send-item",{name:d.value,formulaItems:["var"],values:[{type:"self",value:X.SelfParamType.POS_Y}]}),e.node);var n=Vt.getInnerNode(e.node.parent,"inherit-logic");void 0!=n.children.find((function(e){return"argument-mng"===e.data.type}))||Vt.insertChild({type:"argument-mng",data:{args:[]}},n,0);var t=n.children.find((function(e){return"argument-mng"===e.data.type}));Vt.addChild({type:"argument-item",data:{name:o.value,valueType:"number"}},t),Vt.addChild({type:"argument-item",data:{name:d.value,valueType:"number"}},t);var i=n.children.find((function(e){return"behavior-mng"===e.data.type})),c=function(e,n){var t=i.children.map((function(e){return e.data.data})).find((function(n){return n.name===e}));t.formulaItems=["var"],t.values=[{type:"argument",value:n}]};c(X.BehaviorParamType.POS_X,o.value),c(X.BehaviorParamType.POS_Y,d.value),a.system.dialog=null,r(Object(p.a)({},a)),e.invalidate()}}];return Object(C.jsxs)(_n,{width:450,height:160,children:[Object(C.jsxs)(Dn,{children:[Object(C.jsx)(S.a.Message,{message:"Please, input property name!",isCenter:!0}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"self_pos_x",jsx:Object(C.jsx)(S.a.TextField,{marginLeft:2,checkable:o,width:n,setCheckable:l,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return je.checkStringLength(e,0,20)},errorType:"length"},{checker:function(e){var n=f.slice();return""!==d.value&&n.push(d.value),!n.includes(e)},errorType:"relation"}],dependency:[d]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"self_pos_y",jsx:Object(C.jsx)(S.a.TextField,{marginLeft:2,checkable:d,width:n,setCheckable:b,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return je.checkStringLength(e,0,20)},errorType:"length"},{checker:function(e){var n=f.slice();return""!==o.value&&n.push(o.value),!n.includes(e)},errorType:"relation"}],dependency:[o]})})]}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:j})]})},e.SetParentPosition=function(e){var t=Object(x.useContext)($d),a=t.store,r=t.setStore,i=Object(x.useState)({value:"",errors:[]}),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)({value:"",errors:[]}),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useMemo)((function(){return e.node.children.map((function(e){return e.data.data.name}))}),[]),j=[{label:"Cancel",callback:function(){a.system.dialog=null,r(Object(p.a)({},a))}},{label:"Execute",isEnable:S.a.checkItems([o,d]),callback:function(){var n=e.node.children.map((function(e){return e.data.data})),t=n.find((function(e){return e.name===o.value})),i=n.find((function(e){return e.name===d.value}));t.formulaItems=["var"],t.values=[{type:"self",value:X.SelfParamType.POS_X}],i.formulaItems=["var"],i.values=[{type:"self",value:X.SelfParamType.POS_Y}],a.system.dialog=null,r(Object(p.a)({},a)),e.invalidate()}}];return Object(C.jsxs)(_n,{width:450,height:160,children:[Object(C.jsxs)(Dn,{children:[Object(C.jsx)(S.a.Message,{message:"Please, select property name!",isCenter:!0}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"self_pos_x",jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:o,width:n,setCheckable:l,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}],headBlank:!0,list:f.filter((function(e){return e!==d.value})).map((function(e){return{value:e,labelText:e}}))})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"self_pos_y",jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:d,width:n,setCheckable:b,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}],headBlank:!0,list:f.filter((function(e){return e!==o.value})).map((function(e){return{value:e,labelText:e}}))})})]}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:j})]})}}(tn||(tn={}));var Tn,Fn,Rn,Ln,In,Pn,Nn,An,Mn,Bn=tn,_n=w.b.div(en||(en=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),Dn=w.b.div(nn||(nn=Object(k.a)(["\n    /* text-align: center; */\n    display: inline-block;\n    width: 100%;\n    background-color: #d0e7e718;\n"]))),qn=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useContext)(_e),r=(a.rootData,a.node),i=(a.setFocusNode,a.invalidate);r.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"template",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Connect Position",isEnable:!function(){var e;return"depend"===(null===(e=r.parent)||void 0===e?void 0:e.data).data.method}(),callback:function(){n.system.dialog=Object(C.jsx)(Bn.ConnectParentPosition,{node:r,invalidate:i}),t(Object(p.a)({},n))}}]}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Set Position",callback:function(){n.system.dialog=Object(C.jsx)(Bn.SetParentPosition,{node:r,invalidate:i}),t(Object(p.a)({},n))}}]})]})})})},zn=function(){var e=Object(x.useContext)(_e),n=e.invalidate,t=e.node,a=e.setFocusNode;t.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Field",callback:function(){var e=Vt.addChild({type:"field-item",data:null},t);a(e),n()}}]})})})},Un=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=e.invalidate,r=(n.data,Object(x.useMemo)((function(){var e=n.children.map((function(e){return e.data.data.name}));return[e.includes(X.ExtendParamType.LOOP_COUNT),e.includes(X.ExtendParamType.INVOKE)]}),[n])),i=Object(m.a)(r,2),c=i[0],o=i[1];Object(x.useEffect)((function(){}),[n]);var l=function(e,r,i){e?(Vt.removeChild(n,r,1),t(Object(p.a)({},n)),a()):(Vt.insertChild(i,n,r),t(Object(p.a)({},n)),a())};return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"element",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Loop",width:300,isUse:c,callback:function(){l(c,0,{type:"param-item",data:{name:X.ExtendParamType.LOOP_COUNT,formulaItems:["var"],values:[{type:"direct",value:"1"}]}})}})}),Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Invoke",width:300,isUse:o,callback:function(){l(o,c?1:0,{type:"condition-item",data:{name:X.ExtendParamType.INVOKE,formulaItems:["var","=","var"],values:[{type:"direct",value:"0"},{type:"direct",value:"0"}]}})}})})]})})})},Hn=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useContext)(_e),r=a.removeSelf,i=a.node,c=a.rootData,o=a.invalidate,l=a.setModify,s=a.isModify,u=i.data,d=Object(x.useState)({value:"",errors:[]}),b=Object(m.a)(d,2),f=b[0],j=b[1],h=Object(x.useState)({value:"",errors:[]}),g=Object(m.a)(h,2),v=g[0],O=g[1],y=Object(x.useState)({value:"",errors:[]}),k=Object(m.a)(y,2),w=k[0],E=k[1],T=Object(x.useState)({value:"",errors:[]}),F=Object(m.a)(T,2),R=F[0],L=F[1],I=function(){var e,n=u.data;j(Object(p.a)(Object(p.a)({},f),{},{value:n.name})),O(Object(p.a)(Object(p.a)({},f),{},{value:null!==(e=n.disp)&&void 0!==e?e:""})),E(Object(p.a)(Object(p.a)({},w),{},{value:n.entry})),L(Object(p.a)(Object(p.a)({},R),{},{value:n.permit}))},P=Object(x.useMemo)((function(){return Vt.getExistNameList(i)}),[i]);Object(x.useEffect)((function(){null==u.data?l(!0):I()}),[i]);var N=Object(x.useMemo)((function(){return c.data.logicMng.data.defs.map((function(e){return e.data.name}))}),[i]),A=function(){var e=function(){var e=u.data,n=c.data.logicMng.data.defs.find((function(n){return n.data.name===e.entry}));if(void 0!=n){var t=n.data.mngs[0];if("argument-mng"===t.type)return t.data.args.map((function(e){return e.data}))}return[]}(),n=Vt.getInnerNode(i,"interface-mng","seedsend-mng"),t=n.data.data.params,a=t.map((function(e){return e.data.name}));e.forEach((function(e){if(!a.includes(e.name)){var n="array"===e.valueType,r=Vt.createParamWrap("seedsend-item",{name:e.name,formulaItems:["var"],values:n?[{type:"array",value:""}]:[{type:"direct",value:"0"}],isArray:!!n||void 0});t.push(r)}})),Vt.syncTreeElementFromWrap(n)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:I,checkableFields:[f,v,w,R],firstRegist:function(){var e={name:f.value,disp:""===v.value?void 0:v.value,entry:w.value,permit:R.value,mngs:[{type:"interface-mng",data:{mngs:[{type:"seedarg-mng",data:{args:[]}},{type:"seedsend-mng",data:{params:[]}}]}},{type:"thumbnail-mng",data:{items:[]}},{type:"sample-mng",data:{samples:[]}}]};u.data=e,Vt.syncTreeElementFromWrap(i),A(),o(),t(Object(p.a)({},n))},modifyRegist:function(){var e=u.data;e.name=f.value,e.disp=""===v.value?void 0:v.value,e.permit=R.value,u.data=e}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!s,checkable:f,setCheckable:j,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return!P.includes(e)},errorType:"relation"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Display",jsx:Object(C.jsx)(S.a.TextField,{width:270,isReadOnly:!s,checkable:v,setCheckable:O,validates:[{checker:function(e){return je.checkStringLength(e,0,24)},errorType:"length"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Entry",jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:w,width:200,isReadOnly:!s||null!=u.data,setCheckable:E,list:N.map((function(e){return{value:e,labelText:e}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Permit",jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:R,width:178,isReadOnly:!s,setCheckable:L,list:Mt.PermitTypes.map((function(e){return{value:e,labelText:e}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!s,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Vt.getReplicateButton(i,!s,"seed",n,t,o),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",callback:function(){r()}}]}),Vt.getSwapButtons(i,o)]})})]})},Wn=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode;e.invalidate,n.data.data,Object(x.useMemo)((function(){return Vt.getInnerNode(n.parent,"sample-mng").children.length>0}),[]);return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Thumbnail",callback:function(){var e=Vt.addChild({type:"thumbnail-item",data:null},n);t(e)}}]})})})},Jn=100,Vn=function(){var e,n,t,a=Object(x.useContext)(_e),r=a.rootData,i=a.node,c=a.removeSelf,o=a.setModify,l=a.isModify,s=a.invalidate,u=i.data,d=u.data,b=null===(e=i.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.data,f=(null===(t=Vt.getInnerWrap(b,"sample-mng"))||void 0===t?void 0:t.data).samples.map((function(e){return e.data})),j=Object(x.useState)({value:"",errors:[]}),h=Object(m.a)(j,2),g=h[0],v=h[1],O=Object(x.useState)({value:"",errors:[]}),y=Object(m.a)(O,2),k=y[0],w=y[1],E=Object(x.useState)([]),T=Object(m.a)(E,2),F=T[0],R=T[1],L=(Object(x.useMemo)((function(){var e,n,t=(null===(e=i.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.data).data;return Vt.getParamNameList(t)}),[i]),function(){var e=u.data;v(Object(p.a)(Object(p.a)({},g),{},{value:e.name})),w(Object(p.a)(Object(p.a)({},k),{},{value:e.frame.toString()}))}),I=Object(x.useMemo)((function(){return Vt.getExistNameList(i)}),[i]);Object(x.useEffect)((function(){null==u.data?o(!0):(L(),setTimeout((function(){var e=[];f.forEach((function(n,t){e.push(P(d.frame,t))})),R(e)}),1))}),[i]);var P=function(e,n){console.log("create start!");var t=[],a=0,c=function(){if(0===a){var c,o,l=(null===(c=i.parent)||void 0===c||null===(o=c.parent)||void 0===o?void 0:o.data).data,s=r.data.logicMng.data.defs.find((function(e){return e.data.name===l.entry}));if(void 0==s)return"break";var u=function(e){var n,t,a=null===(n=Vt.getInnerWrap(b,"interface-mng","seedarg-mng"))||void 0===n?void 0:n.data,r=null===(t=Vt.getInnerWrap(b,"interface-mng","seedsend-mng"))||void 0===t?void 0:t.data,i=[];a.args.forEach((function(n,t){var a=n.data;if(!a.isArray){var r=a.name,c=Number(f[e].values[t]);i.push({name:r,value:c})}}));var c=r.params.map((function(e){return e.data}));return c.filter((function(e){return!e.isArray})).map((function(e){var n;return{name:e.name,value:null!==(n=Z.convertParamsToValue(e.name,c,i))&&void 0!==n?n:0}}))}(n),d=function(e){var n,t,a=null===(n=Vt.getInnerWrap(b,"interface-mng","seedarg-mng"))||void 0===n?void 0:n.data,r=null===(t=Vt.getInnerWrap(b,"interface-mng","seedsend-mng"))||void 0===t?void 0:t.data,i=[];a.args.forEach((function(n,t){var a=n.data;if(a.isArray){var r=a.name,c=f[e].values[t].split(",").map((function(e){return Number(e)}));i.push({name:r,array:c})}}));var c=r.params.map((function(e){return e.data}));return c.filter((function(e){return e.isArray})).map((function(e){var n;return{name:e.name,array:null!==(n=Z.convertParamsToArray(e.name,c,i))&&void 0!==n?n:[]}}))}(n);t.push(new U.Instance(Z.buildLogicProps(t,s.data,r,u,d)))}if(a===e)return{v:_.createURL(550,550,(function(e){t.forEach((function(n){n.draw(e)})),e.save()}))};for(var j=t.length-1;j>=0;j--){t[j].update()}for(var p=t.length-1;p>=0;p--){t[p].isLive||t.splice(p,1)}if(a>500||t.length>3e3)return"break";a++};do{var o=c();if("break"===o)break;if("object"===typeof o)return o.v}while(t.length>0);return""},N=Object(x.useMemo)((function(){var e,n;return(null===(e=Vt.getInnerWrap((null===(n=i.parent)||void 0===n?void 0:n.parent).data,"sample-mng"))||void 0===e?void 0:e.data).samples.map((function(e,n){var t=e.data,a=void 0==F[n]?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(Kn,{src:F[n]});return Object(C.jsxs)(Yn,{children:["-",Object(C.jsx)(Xn,{children:t.name}),Object(C.jsx)(Gn,{children:a})]},n)}))}),[i,F]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:L,checkableFields:[g,k],firstRegist:function(){var e={name:g.value,frame:Number(k.value)};u.data=e},modifyRegist:function(){var e=u.data;e.name=g.value,e.frame=Number(k.value),u.data=e}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!l,checkable:g,setCheckable:v,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return!I.includes(e)},errorType:"relation"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Frame",jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!l,isNumber:!0,checkable:k,setCheckable:w,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"preview",isEnable:!l,innerJsx:Object(C.jsx)(C.Fragment,{children:N})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!l,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",isEnable:!l,callback:function(){c()}}]}),Vt.getSwapButtons(i,s)]})})]})},Yn=w.b.div(Tn||(Tn=Object(k.a)(["\n    display: inline-block;\n    /* width: ","px;\n    height: ","px; */\n    margin: 0 0 0 5px;\n"])),Jn,Jn),Xn=w.b.div(Fn||(Fn=Object(k.a)(["\n    display: block;\n    color: #09056c;\n    font-size: 14px;\n    font-weight: 600;\n    font-style: italic;\n    background-color: #ffffff5e;\n"]))),Gn=w.b.div(Rn||(Rn=Object(k.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    background-color: #020202df;\n    border: solid 2px #ca0000;\n    box-sizing: border-box;\n"])),Jn,Jn),Kn=w.b.img(Ln||(Ln=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]))),Qn=400;(Mn||(Mn={})).Component=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=t.env.screenRate,i=Object(x.useState)(!1),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useRef)(null),u=Object(x.useMemo)((function(){return e.xList.map((function(n,t){var a=e.yList[t];return Object(C.jsx)(ct,{x:n,y:a},t)}))}),[e.xList.length]),d=function(n,i){l(!0);var c=s.current.getBoundingClientRect(),o=(n-c.x)/r,u=(i-c.y)/r;e.addPoint(o-200,u-200),t.env.scrollLock=!0,a(Object(p.a)({},t))},b=function(n,t){if(o){var a=s.current.getBoundingClientRect(),i=(n-a.x)/r,c=(t-a.y)/r,l=i-(e.xList[e.xList.length-1]+200),u=c-(e.yList[e.yList.length-1]+200);Math.sqrt(l*l+u*u)>10&&e.addPoint(i-200,c-200)}},f=function(){l(!1),t.env.scrollLock=!1,a(Object(p.a)({},t))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Point",jsx:Object(C.jsx)(S.a.FixedText,{value:e.xList.length.toString(),isRecordItem:!0})}),Object(C.jsxs)(it,{ref:s,onMouseDown:function(e){d(e.clientX,e.clientY)},onMouseMove:function(e){b(e.clientX,e.clientY)},onMouseUp:f,onMouseLeave:f,onTouchStart:function(e){d(e.touches[0].pageX,e.touches[0].pageY)},onTouchMove:function(e){b(e.touches[0].pageX,e.touches[0].pageY)},onTouchEnd:f,onTouchCancel:f,isDraw:t.env.scrollLock,children:[Object(C.jsx)(ot,{}),u]}),Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Clear",isEnable:e.xList.length>0,callback:e.clear}]})]})};var Zn,$n,et,nt,tt,at,rt=Mn,it=w.b.div(In||(In=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: 400px;\n    margin: 0 0 0 3px;\n    background-color: #2e7085;\n    ","\n    border: 2px solid #800;\n    box-sizing: border-box;\n"])),Qn,(function(e){return e.isDraw?Object(w.a)(Pn||(Pn=Object(k.a)(["\n        background-color: #5c9caf;\n    "]))):""})),ct=w.b.div(Nn||(Nn=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    top: ","px;\n    width: 10px;\n    height: 10px;\n    border-radius: 10px;\n    background-color: #fcfeff9d;\n    border: 1px solid #dfe5ff;\n    box-sizing: border-box;\n"])),(function(e){return e.x+200-5}),(function(e){return e.y+200-5})),ot=w.b.div(An||(An=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    top: ","px;\n    width: 20px;\n    height: 20px;\n    border-radius: 20px;\n    background-color: #800;\n    box-sizing: border-box;\n"])),190,190);(at||(at={})).buildPreviewForms=function(e,n,t,a,r){var i=[],c=[];return a.forEach((function(o,l){var s=n[l],u=t.find((function(e){return e.args.includes(s.name)}));if(void 0!=u){if(c.includes(u.name))return 1;c.push(u.name);var d=[];switch(n.forEach((function(e,n){u.args.includes(e.name)&&d.push(n)})),u.method){case"color":var b=W.convertColorCodeFromRgba({r:Number(a[d[0]].value),g:Number(a[d[1]].value),b:Number(a[d[2]].value),a:255}).substring(0,7);i.push(Object(C.jsxs)("div",{children:[Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(xt,{children:[u.name,": ",Object(C.jsx)(gt,{children:"color "}),Object(C.jsxs)(vt,{children:["(",0," \uff5e ",255," respectively)"]})]})}),Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(C.Fragment,{children:[d.map((function(n,t){return Object(C.jsx)(S.a.TextField,{width:72,marginLeft:0===t?5:4,isNumber:!0,isReadOnly:e,checkable:a[n],setCheckable:function(){r(a.slice())},validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,s.min,s.max)},errorType:"value"}]},n)})),Object(C.jsx)(yt,{type:"color",value:b,disabled:e,onChange:function(e){var n=W.convertRgbaFromColorCode(e.target.value+"ff");null!=n&&(a[d[0]].value=n.r.toString(),a[d[1]].value=n.g.toString(),a[d[2]].value=n.b.toString()),r(a.slice())}})]})})]},l));break;case"draw":var f=a[d[0]].value,j=a[d[1]].value,h=""===f?[]:f.split(",").map((function(e){return Number(e)})),m=""===f?[]:j.split(",").map((function(e){return Number(e)}));i.push(Object(C.jsxs)("div",{children:[Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(xt,{children:[u.name,": ",Object(C.jsx)(gt,{children:"point "}),Object(C.jsxs)(vt,{children:["(\uff5e ",255," drawing)"]})]})}),Object(C.jsx)(rt.Component,{addPoint:function(e,n){h.push(e),m.push(n),a[d[0]].value=h.join(","),a[d[1]].value=m.join(","),r(a.slice())},clear:function(){a[d[0]].value="",a[d[1]].value="",r(a.slice())},xList:h,yList:m})]},l))}}else{var x=s.name;void 0!=s.disp&&(x=s.disp),i.push(Object(C.jsxs)("div",{children:[Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(xt,{children:[x,": ",Object(C.jsx)(gt,{children:"number "}),Object(C.jsxs)(vt,{children:["(",s.min," \uff5e ",s.max,")"]})]})}),Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.TextField,{width:142,marginLeft:6,isNumber:!0,isReadOnly:e,step:s.step,checkable:o,setCheckable:function(){r(a.slice())},validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,s.min,s.max)},errorType:"value"}]}),Object(C.jsx)(Ot,{type:"range",value:Number(o.value),min:s.min,max:s.max,step:s.step,disabled:e,onChange:function(e){a[l]=Object(p.a)(Object(p.a)({},o),{},{value:e.target.value}),r(a.slice())}})]})})]},l))}})),i};var lt,st,ut,dt,bt,ft,jt,pt,ht,mt=at,xt=w.b.div(Zn||(Zn=Object(k.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    margin-top: 2px;\n    font-size: ","px;\n    line-height: 32px;\n    /* font-weight: 600; */\n    border-radius: 4px;\n    padding: 0 5px;\n    /* background-color: #d37878; */\n    text-align: left;\n    vertical-align: top;\n    user-select: text;\n    overflow: hidden;\n    /* white-space: nowrap; */\n"])),$.a.FONT_MIDIUM),gt=w.b.span($n||($n=Object(k.a)(["\n    color: #c10000;\n    font-weight: 600;\n"]))),vt=w.b.span(et||(et=Object(k.a)(["\n    color: #423e84fb;\n"]))),Ot=w.b.input(nt||(nt=Object(k.a)(["\n    display: inline-block;\n    vertical-align: top;\n    margin: 11px 0 0 6px;\n    width: calc(100% - 160px);\n"]))),yt=w.b.input(tt||(tt=Object(k.a)(["\n    display: inline-block;\n    vertical-align: top;\n    margin: 3px 0 0 6px;\n    width: 100px;\n    height: 34px;\n"]))),kt=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useContext)(_e),r=a.removeSelf,i=a.node,c=(a.rootData,a.invalidate),o=a.setModify,l=a.isModify,s=i.data,u=Object(x.useState)({value:"",errors:[]}),d=Object(m.a)(u,2),b=d[0],f=d[1],j=Object(x.useState)([]),h=Object(m.a)(j,2),g=h[0],v=h[1],O=function(){var e=s.data;f(Object(p.a)(Object(p.a)({},b),{},{value:e.name})),v(e.values.map((function(e){return{value:e.toString(),errors:[]}})))},y=Object(x.useMemo)((function(){return Vt.getExistNameList(i)}),[i]),k=Object(x.useMemo)((function(){var e,n,t=Vt.getInnerWrapFixed((null===(e=i.parent)||void 0===e?void 0:e.parent).data,"interface-mng","seedarg-mng").data.args.map((function(e){return e.data})),a=[],r=Vt.getInnerWrap((null===(n=i.parent)||void 0===n?void 0:n.parent).data,"interface-mng","formgrp-mng");return null!=r&&(a=r.data.defines.map((function(e){return e.data}))),[t,a]}),[i]),w=Object(m.a)(k,2),E=w[0],T=w[1];Object(x.useEffect)((function(){null==s.data?(v(E.map((function(e){var n="";return void 0!=e.defval&&(n=e.defval.toString()),{value:n,errors:[]}}))),o(!0)):O()}),[i]);var F=Object(x.useMemo)((function(){return mt.buildPreviewForms(!l,E,T,g,v)}),[g,l]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:O,checkableFields:[b].concat(g),firstRegist:function(){var e={name:b.value,values:[]};g.forEach((function(n,t){e.values[t]=n.value})),s.data=e,c(),t(Object(p.a)({},n))},modifyRegist:function(){var e=s.data;e.name=b.value,g.forEach((function(n,t){e.values[t]=n.value})),s.data=e}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:250,isReadOnly:!l,checkable:b,setCheckable:f,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,22)},errorType:"length"},{checker:function(e){return!y.includes(e)},errorType:"relation"}]})}),F]})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!l,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Vt.getReplicateButton(i,!l,"preset",n,t,c),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",callback:function(){r()}}]}),Vt.getSwapButtons(i,c)]})})]})},wt=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=n.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Preset",callback:function(){var e={type:"sample-item",data:null};a.data.samples.push(e);var r=Te.createNode(e,n);n.children.push(r),t(r)}}]})})})},Et=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useContext)(_e),r=(a.rootData,a.node),i=a.setFocusNode,c=a.invalidate,o=(r.data,Vt.getInnerNodeFixed(r,"seedarg-mng")),l=Vt.getInnerNodeFixed(r,"seedsend-mng"),s=Vt.getInnerNodeFixed(r.parent,"sample-mng"),u=Object(x.useMemo)((function(){return[r.children.map((function(e){return e.data.type})).includes("formgrp-mng")]}),[r]),d=Object(m.a)(u,1)[0],b=function(){return o.children.length>0},f=function(){b()&&(Vt.removeChildAll(o),Vt.removeChildAll(s)),l.children.forEach((function(e){var n=e.data.data;n.formulaItems=["var"],n.values=[{type:"argument",value:n.name}];var t={type:"seedarg-item",data:{name:n.name,step:1,min:-9999,max:9999,defval:""}};o.data.data.args.push(t),o.children.push(Te.createNode(t,o)),c()}))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"element",innerJsx:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.Record,{textAlign:"center",jsx:Object(C.jsx)(S.a.Switch,{label:"Group",width:300,isUse:d,isEnable:!function(){var e=Vt.getInnerNode(r,"formgrp-mng");return null!=e&&e.children.length>0}(),callback:function(){!function(e,n,t){e?(Vt.removeChild(r,n,1),i(Object(p.a)({},r)),c()):(Vt.insertChild(t,r,n),i(Object(p.a)({},r)),c())}(d,0,{type:"formgrp-mng",data:{defines:[]}})}})})})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Initialize Params",callback:function(){b()?(n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Are you sure you want to delete the existing element?",buttons:[{label:"Cancel",callback:function(){n.system.dialog=null,t(Object(p.a)({},n))}},{label:"Execute",callback:function(){f(),n.system.dialog=null,t(Object(p.a)({},n))}}]}),t(Object(p.a)({},n))):f(),c()}}]})})]})},St=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=n.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Argument",callback:function(){var e={type:"seedarg-item",data:null};a.data.args.push(e);var r=Te.createNode(e,n);n.children.push(r),t(r)}}]})})})},Ct=function(e,n){var t=[];return Vt.getInnerWrapFixed(e.data,"interface-mng","seedsend-mng").data.params.forEach((function(e){var a=e.data;a.values.forEach((function(e){"argument"===e.type&&e.value===n&&t.push(a.name)}))})),t},Tt=function(){var e,n,t=Object(x.useContext)($d),a=t.store,r=t.setStore,i=Object(x.useContext)(_e),c=i.node,o=i.removeSelf,l=i.setModify,s=i.isModify,u=i.invalidate,d=c.data,b=Object(x.useState)({value:"",errors:[]}),f=Object(m.a)(b,2),j=f[0],h=f[1],g=Object(x.useState)({value:"",errors:[]}),v=Object(m.a)(g,2),O=v[0],y=v[1],k=Object(x.useState)({value:"",errors:[]}),w=Object(m.a)(k,2),E=w[0],T=w[1],F=Object(x.useState)({value:"",errors:[]}),R=Object(m.a)(F,2),L=R[0],I=R[1],P=Object(x.useState)({value:"1",errors:[]}),N=Object(m.a)(P,2),A=N[0],M=N[1],B=Object(x.useState)({value:"",errors:[]}),_=Object(m.a)(B,2),D=_[0],q=_[1],z=Object(x.useState)({value:"",errors:[]}),U=Object(m.a)(z,2),H=U[0],W=U[1],J=Object(x.useState)({value:"",errors:[]}),V=Object(m.a)(J,2),Y=V[0],X=V[1],G=null===(e=c.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.parent,K=Vt.getInnerNodeFixed(G,"sample-mng"),Q=(Object(x.useMemo)((function(){var e,n,t=(null===(e=c.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.data).data;return Vt.getParamNameList(t)}),[c]),function(){var e,n,t,a=d.data;h(Object(p.a)(Object(p.a)({},j),{},{value:a.name})),y(Object(p.a)(Object(p.a)({},j),{},{value:null!==(e=a.disp)&&void 0!==e?e:""})),T(Object(p.a)(Object(p.a)({},E),{},{value:void 0!=a.min?a.min.toString():""})),I(Object(p.a)(Object(p.a)({},L),{},{value:void 0!=a.max?a.max.toString():""})),M(Object(p.a)(Object(p.a)({},A),{},{value:void 0!=a.step?a.step.toString():""})),q(Object(p.a)(Object(p.a)({},D),{},{value:void 0!=a.defval?a.defval.toString():""})),W(Object(p.a)(Object(p.a)({},H),{},{value:null!==(n=a.isPosX)&&void 0!==n&&n?"1":""})),X(Object(p.a)(Object(p.a)({},Y),{},{value:null!==(t=a.isArray)&&void 0!==t&&t?"1":""}))}),Z=Object(x.useMemo)((function(){return Vt.getExistNameList(c)}),[c]);return Object(x.useEffect)((function(){null==d.data?l(!0):Q()}),[c]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:Q,checkableFields:[j,O,E,L,A,D],firstRegist:function(){var e={name:j.value,disp:""===O.value?void 0:O.value,min:Number(E.value),max:Number(L.value),step:Number(A.value),defval:""===D.value?void 0:D.value,isPosX:""!==H.value||void 0,isArray:""!==Y.value||void 0};d.data=e,Rt(G,e)},modifyRegist:function(){var e=d.data,n=e.name;e.name=j.value,e.disp=""===O.value?void 0:O.value,e.min=Number(""===E.value?"0":E.value),e.max=Number(""===L.value?"0":L.value),e.step=Number(""===A.value?"0":A.value),e.defval=""===D.value?void 0:D.value,e.isPosX=""!==H.value||void 0,e.isArray=""!==Y.value||void 0,d.data=e,n!==j.value&&Ft(G,n,j.value)}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!s,checkable:j,setCheckable:h,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return Mt.checkFieldName(e)},errorType:"value"},{checker:function(e){return!Z.includes(e)},errorType:"relation"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Display",jsx:Object(C.jsx)(S.a.TextField,{width:200,isReadOnly:!s,checkable:O,setCheckable:y,validates:[{checker:function(e){return je.checkStringLength(e,0,16)},errorType:"length"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Array",jsx:Object(C.jsx)(S.a.Combobox,{width:100,isReadOnly:!s,checkable:Y,setCheckable:function(e){X(e),T(Object(p.a)(Object(p.a)({},E),{},{value:""})),I(Object(p.a)(Object(p.a)({},L),{},{value:""})),M(Object(p.a)(Object(p.a)({},A),{},{value:""})),q(Object(p.a)(Object(p.a)({},D),{},{value:""})),W(Object(p.a)(Object(p.a)({},H),{},{value:""}))},headBlank:!0,list:[{labelText:"Yes",value:"1"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Min",isEnabled:""===Y.value,jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!s,checkable:E,setCheckable:T,isNumber:!0,isEnabled:""===Y.value,dependency:[L,Y],validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return Number(e)<Number(L.value)},errorType:"relation"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Max",isEnabled:""===Y.value,jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!s,checkable:L,setCheckable:I,isNumber:!0,isEnabled:""===Y.value,dependency:[E,Y],validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return Number(e)>Number(E.value)},errorType:"relation"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Step",isEnabled:""===Y.value,jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!s,checkable:A,setCheckable:M,isNumber:!0,isEnabled:""===Y.value,dependency:[Y],validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Default",isEnabled:""===Y.value,jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!s,checkable:D,setCheckable:q,isNumber:!0,isEnabled:""===Y.value,dependency:[Y]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Position",isEnabled:""===Y.value,jsx:Object(C.jsx)(S.a.Combobox,{width:100,isReadOnly:!s,checkable:H,setCheckable:W,isEnabled:""===Y.value,headBlank:!0,list:[{labelText:"Yes",value:"1"}],dependency:[Y]})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!s,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Vt.getReplicateButton(c,!s,"argument",a,r,u),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",isEnable:!s,callback:function(){var e=d.data,n=Ct(G,e.name);if(0===n.length){var t=Vt.getCurrentIndex(c);if(-1===t)throw new Error("[curIndex] is -1.");Lt(G,t),o()}else a.system.dialog=Object(C.jsx)(Be.a.Component,{message:"[".concat(e.name,"] is referenced in the formula.\n").concat(n)}),r(Object(p.a)({},a))}}]}),Vt.getSwapButtonsCallback(c,u,(function(e,n){var t=K.data.data,a=n?-1:1;t.samples.forEach((function(n){var t=n.data.values,r=t[e];t[e]=t[e+a],t[e+a]=r}))}))]})})]})},Ft=function(e,n,t){var a=Vt.getInnerWrapFixed(e.data,"interface-mng","seedsend-mng");a.data.params.forEach((function(e){e.data.values.forEach((function(e){"argument"===e.type&&e.value===n&&(e.value=t)}))}))},Rt=function(e,n){Vt.getInnerNodeFixed(e,"sample-mng").data.data.samples.forEach((function(e){var t;e.data.values.push((null!==(t=n.defval)&&void 0!==t?t:0).toString())}))},Lt=function(e,n){Vt.getInnerNodeFixed(e,"sample-mng").data.data.samples.forEach((function(e){e.data.values.splice(n,1)}))},It=function(){var e=Object(x.useContext)($d),n=(e.store,e.setStore,Object(x.useContext)(_e)),t=(n.rootData,n.node);n.setFocusNode,n.invalidate,t.data;return Object(C.jsx)(C.Fragment,{})},Pt=function(){var e=Object(x.useContext)($d),n=(e.store,e.setStore,Object(x.useContext)(_e)),t=n.node,a=n.removeSelf,r=n.setModify,i=n.isModify,c=n.invalidate,o=t.data,l=Object(x.useState)({value:"",errors:[]}),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(x.useState)({value:"",errors:[]}),f=Object(m.a)(b,2),j=f[0],h=f[1],g=Object(x.useState)([]),v=Object(m.a)(g,2),O=v[0],y=v[1],k=function(){var e=o.data;d(Object(p.a)(Object(p.a)({},u),{},{value:e.name})),h(Object(p.a)(Object(p.a)({},j),{},{value:e.method})),y(e.args.map((function(e){return{value:e,errors:[]}})))},w=(Object(x.useMemo)((function(){return Vt.getExistNameList(t)}),[t]),Object(x.useMemo)((function(){var e,n;return Vt.getInnerWrapFixed(null===(e=t.parent)||void 0===e||null===(n=e.parent)||void 0===n?void 0:n.data,"seedarg-mng").data.args.map((function(e){return e.data}))}),[t]));return Object(x.useEffect)((function(){null==o.data?r(!0):k()}),[t]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(an.Component,{mappingForm:k,checkableFields:[u,j].concat(O),firstRegist:function(){var e={name:u.value,method:j.value,args:O.map((function(e){return e.value}))};o.data=e},modifyRegist:function(){var e=o.data;e.name=u.value,e.method=j.value,e.args=O.map((function(e){return e.value})),o.data=e}}),Object(C.jsx)(S.a.BorderPanel,{title:"param",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Display",jsx:Object(C.jsx)(S.a.TextField,{width:270,isReadOnly:!i,checkable:u,setCheckable:d,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,24)},errorType:"length"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Method",jsx:Object(C.jsx)(S.a.Combobox,{checkable:j,setCheckable:function(e){var n=e.value;y("color"===n?new Array(3).fill({value:"",errors:[]}):"draw"===n?new Array(2).fill({value:"",errors:[]}):[]),h(Object(p.a)({},e))},list:Mt.FromGrpMedhods.map((function(e){return{value:e,labelText:e}})),headBlank:!0,width:200,isReadOnly:!i,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),O.map((function(e,n){var t="Target_",a=j.value;if("color"===a)switch(n){case 0:t+="R";break;case 1:t+="G";break;case 2:t+="B"}else if("draw"===a)switch(n){case 0:t+="X";break;case 1:t+="Y"}else t+="_".concat(n);return Object(C.jsx)(S.a.FormRecord,{titleLabel:t,jsx:Object(C.jsx)(S.a.Combobox,{checkable:e,setCheckable:function(e){O[n]=e,y(O.slice())},list:w.filter((function(e){return"color"===j.value?!e.isArray:e.isArray})).map((function(e){return{value:e.name,labelText:e.name}})),headBlank:!0,width:250,isReadOnly:!i,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return void 0==O.find((function(t,a){return n!==a&&t.value===e}))},errorType:"relation"}],dependency:O})},n)}))]})}),Object(C.jsx)(S.a.BorderPanel,{title:"operation",isEnable:!i,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Delete",isEnable:!i,callback:a}]}),Vt.getSwapButtons(t,c)]})})]})},Nt=function(){var e=Object(x.useContext)(_e),n=e.node,t=e.setFocusNode,a=n.data;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.BorderPanel,{title:"operation",innerJsx:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Add Group",callback:function(){var e={type:"formgrp-item",data:null};a.data.defines.push(e);var r=Te.createNode(e,n);n.children.push(r),t(r)}}]})})})};!function(e){e.checkFieldName=function(e){return!["0","1","2","3","4","5","6","7","8","9"].includes(e.substring(0,1))&&je.checkIncludesChars(e,"0123456789abcdefghijklmnopqrstuvwxyz_")},e.ArgTypes=["number","array"],e.ParamInputTypes=["direct","array","constant","argument","self","field","array.len","array.itr"],e.ConnectTypes=["create","depend"],e.PermitTypes=["develop","private","release"],e.FromGrpMedhods=["color","draw"];var n="#cca67b",t="#37a2bd",a="#b85f5f",r="#ae628c",i="#cec256",c=(e.getNodeDisplayJsx=function(e,c){var o=e.data;switch(o.type){case"root":return Object(C.jsx)(Bt,{backgroundColor:"#a1a1a1",children:"Library"});case"seed-mng":return Object(C.jsx)(Bt,{backgroundColor:n,children:"Seed Manager"});case"logic-mng":return Object(C.jsx)(Bt,{backgroundColor:n,children:"Logic Manager"});case"visual-mng":return Object(C.jsx)(Bt,{backgroundColor:t,children:"Visual"});case"extend-mng":return Object(C.jsx)(Bt,{backgroundColor:t,children:"Extend"});case"seed-item":var l=Object(C.jsx)(C.Fragment,{children:"..."});if(null!=o.data){var s=o.data;l=Object(C.jsxs)("span",{children:[s.name,"\xa0",Object(C.jsx)(qt,{color:"#ffe89ba6",children:"entry:\xa0"}),Object(C.jsx)(Ht,{children:s.entry})]})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Bt,{backgroundColor:r,children:"Seed"}),Object(C.jsx)(Dt,{children:l})]});case"logic-item":var u="...";if(null!=o.data)u=o.data.name;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Bt,{backgroundColor:r,children:"Logic"}),Object(C.jsx)(Dt,{children:u})]});case"inherit-logic":return Object(C.jsx)(Bt,{backgroundColor:t,children:"Logic"});case"argument-mng":case"seedarg-mng":return Object(C.jsx)(Bt,{backgroundColor:a,children:"Argument Manager"});case"inhfld-mng":case"field-mng":return Object(C.jsx)(Bt,{backgroundColor:a,children:"Field Manager"});case"behavior-mng":return Object(C.jsx)(Bt,{backgroundColor:t,children:"Behavior"});case"inherit-mng":return Object(C.jsx)(Bt,{backgroundColor:a,children:"Inherit Manager"});case"connector":var d=Object(C.jsx)("span",{children:"..."}),b=r,f=!1;if(null!=o.data){var j,p=o.data;d=Object(C.jsxs)("span",{children:[p.id,"\xa0",Object(C.jsx)(qt,{color:"#ffe89ba6",children:p.method})]}),"depend"===p.method&&(d=Object(C.jsxs)("span",{children:[p.id,"\xa0",Object(C.jsxs)(qt,{color:"#ffe89ba6",children:[p.method,":\xa0"]}),Object(C.jsx)(Ht,{children:p.depend})]})),null!==(j=p.disable)&&void 0!==j&&j&&(b="#685b79",f=!0)}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Bt,{backgroundColor:b,isDisable:f,children:"Inherit"}),void 0==d?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(Dt,{children:d})]});case"param-item":case"seedsend-item":case"send-item":var h=o.data,m=[],x=0;return h.formulaItems.forEach((function(e,n){var t=Object(C.jsx)(Ut,{children:e},n);if("var"===e){var a=h.values[x];t="direct"!==a.type?Object(C.jsx)(Ht,{children:"${".concat(a.value,"}")},n):Object(C.jsx)("span",{children:a.value},n),x++}m.push(t)})),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Bt,{backgroundColor:"#8dae62",children:["Param",Object(C.jsxs)(_t,{children:["\xa0[",h.name,"]"]})]}),Object(C.jsx)(Dt,{children:m})]});case"condition-item":var g=o.data,v=[],O=0;return g.formulaItems.forEach((function(e,n){var t=Object(C.jsx)(Ut,{children:e},n);if("var"===e){var a=g.values[O];t="direct"!==a.type?Object(C.jsx)(Ht,{children:"${".concat(a.value,"}")},n):Object(C.jsx)("span",{children:a.value},n),O++}v.push(t)})),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Bt,{backgroundColor:"#56ce7e",children:["Condition",Object(C.jsxs)(_t,{children:["\xa0[",g.name,"]"]})]}),Object(C.jsx)(Dt,{children:v})]});case"field-item":var y=Object(C.jsx)("span",{children:"..."}),k=Object(C.jsx)("span",{children:"..."});if(null!=o.data){var w=o.data;y=Object(C.jsxs)(_t,{children:["\xa0[",w.name,"]"]});var E=[],S=0;w.formulaItems.forEach((function(e,n){var t=Object(C.jsx)(Ut,{children:e},n);if("var"===e){var a=w.values[S];t="direct"!==a.type?Object(C.jsx)(Ht,{children:"${".concat(a.value,"}")},n):Object(C.jsx)("span",{children:a.value},n),S++}E.push(t)})),k=Object(C.jsx)(C.Fragment,{children:E})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Bt,{backgroundColor:i,children:["Field",y]}),Object(C.jsx)(Dt,{children:k})]});case"argument-item":var T=Object(C.jsx)("span",{children:"..."});if(null!=o.data){var F=o.data;T=Object(C.jsxs)("span",{children:[F.name,Object(C.jsxs)(zt,{children:["\xa0(",F.valueType,")"]})]})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Bt,{backgroundColor:i,children:["Argument",Object(C.jsx)(_t,{})]}),Object(C.jsx)(Dt,{children:T})]});case"send-mng":case"seedsend-mng":return Object(C.jsx)(Bt,{backgroundColor:t,children:"Send"});case"thumbnail-mng":return Object(C.jsx)(Bt,{backgroundColor:a,children:"Thumnail Manager"});case"thumbnail-item":var R=Object(C.jsx)("span",{children:"..."});if(null!=o.data){var L=o.data;R=Object(C.jsxs)("span",{children:[L.name,Object(C.jsxs)(zt,{children:["\xa0(",L.frame,")"]})]})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Bt,{backgroundColor:"#8283be",children:"Thumbnail"}),Object(C.jsx)(Dt,{children:R})]});case"sample-mng":return Object(C.jsx)(Bt,{backgroundColor:a,children:"Preset Manager"});case"sample-item":var I="...";if(null!=o.data)I=o.data.name;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Bt,{backgroundColor:r,children:"Preset"}),Object(C.jsx)(Dt,{children:I})]});case"interface-mng":return Object(C.jsx)(Bt,{backgroundColor:t,children:"Interface"});case"seedarg-item":var P=Object(C.jsx)("span",{children:"..."});if(null!=o.data){var N=o.data;P=Object(C.jsxs)("span",{children:[N.name,Object(C.jsxs)(zt,{children:["\xa0(",N.min,"\uff5e",N.max,")"]})]})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Bt,{backgroundColor:i,children:["Argument",Object(C.jsx)(_t,{})]}),Object(C.jsx)(Dt,{children:P})]});case"formgrp-mng":return Object(C.jsx)(Bt,{backgroundColor:a,children:"Group Manager"});case"formgrp-item":var A=Object(C.jsx)("span",{children:"..."});if(null!=o.data){var M=o.data;A=Object(C.jsxs)("span",{children:[M.name,Object(C.jsxs)(zt,{children:["\xa0(",M.method,")"]})]})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Bt,{backgroundColor:r,children:["Group",Object(C.jsx)(_t,{})]}),Object(C.jsx)(Dt,{children:A})]})}return Object(C.jsx)(Bt,{backgroundColor:"#ffffff",children:"XXXXX"})},e.getTypeName=function(e){if(null==e)return"";switch(e.data.type){case"root":return"Root";case"seed-mng":return"Seed Manager";case"logic-mng":return"Logic Manager";case"seed-item":return"Seed Item";case"logic-item":return"Logic Item";case"argument-mng":case"seedarg-mng":return"Argument Manager";case"inhfld-mng":case"field-mng":return"Field Manager";case"field-item":return"Field Item";case"visual-mng":return"Visual Manager";case"seedarg-item":case"argument-item":return"Argument Item";case"extend-mng":return"Extend Manager";case"behavior-mng":return"Behavior Manager";case"inherit-mng":return"Inherit Manager";case"connector":return"Inherit Connector";case"inherit-logic":return"Inherit Logic";case"send-mng":return"Send Manager";case"seedsend-item":case"send-item":return"Send Item";case"param-item":return"Param Item";case"condition-item":return"Condition Item";case"interface-mng":return"Interface Manager";case"thumbnail-mng":return"Thumbnail Manager";case"thumbnail-item":return"Thumbnail Item";case"sample-mng":return"Preset Manager";case"sample-item":return"Preset Item";case"seedsend-mng":return"Send";case"formgrp-mng":return"Group Manager";case"formgrp-item":return"Group Item"}},e.getDetailComponent=function(e){if(null==e)return Object(C.jsx)(C.Fragment,{});switch(e.data.type){case"root":return Object(C.jsx)(C.Fragment,{});case"seed-mng":return Object(C.jsx)(dn,{});case"logic-mng":return Object(C.jsx)(bn,{});case"seed-item":return Object(C.jsx)(Hn,{});case"logic-item":case"inherit-logic":return Object(C.jsx)(fn,{});case"argument-mng":return Object(C.jsx)(Ge,{});case"argument-item":return Object(C.jsx)(rn,{});case"inhfld-mng":case"field-mng":return Object(C.jsx)(zn,{});case"visual-mng":return Object(C.jsx)(En,{});case"extend-mng":return Object(C.jsx)(Un,{});case"behavior-mng":return Object(C.jsx)(wn,{});case"inherit-mng":return Object(C.jsx)(Sn,{});case"connector":return Object(C.jsx)(Cn,{});case"send-mng":return Object(C.jsx)(qn,{});case"field-item":case"param-item":case"condition-item":case"send-item":case"seedsend-item":return Object(C.jsx)(xn,{});case"interface-mng":return Object(C.jsx)(Et,{});case"sample-mng":return Object(C.jsx)(wt,{});case"sample-item":return Object(C.jsx)(kt,{});case"thumbnail-mng":return Object(C.jsx)(Wn,{});case"thumbnail-item":return Object(C.jsx)(Vn,{});case"seedarg-mng":return Object(C.jsx)(St,{});case"seedarg-item":return Object(C.jsx)(Tt,{});case"seedsend-mng":return Object(C.jsx)(It,{});case"formgrp-item":return Object(C.jsx)(Pt,{});case"formgrp-mng":return Object(C.jsx)(Nt,{})}},e.getChildrenElementNode=function(e){var n=e.data,t=function(t){return n.data[t].map((function(n){var t=Te.createNode(n,e);return t.children=c(t),t}))};switch(n.type){case"seed-mng":case"logic-mng":return t("defs");case"seed-item":case"connector":case"inherit-logic":case"interface-mng":case"logic-item":return t("mngs");case"send-mng":case"behavior-mng":case"visual-mng":case"extend-mng":case"seedsend-mng":case"visual-mng":return t("params");case"inherit-mng":return t("inherits");case"seedarg-mng":case"argument-mng":return t("args");case"sample-mng":return t("samples");case"inhfld-mng":case"field-mng":return t("fields");case"thumbnail-mng":return t("items");case"formgrp-mng":return t("defines")}return[]}),o=e.getChildrenDataNode=function(e){var n=function(n){return e.data[n].map((function(e){return{data:e,children:o(e)}}))};switch(e.type){case"root":var t=e.data;return[{data:t.seedMng,children:o(t.seedMng)},{data:t.logicMng,children:o(t.logicMng)}];case"seed-mng":case"logic-mng":return n("defs");case"seed-item":case"connector":case"inherit-logic":case"interface-mng":case"logic-item":return n("mngs");case"send-mng":case"behavior-mng":case"visual-mng":case"extend-mng":case"seedsend-mng":case"visual-mng":return n("params");case"inherit-mng":return n("inherits");case"seedarg-mng":case"argument-mng":return n("args");case"sample-mng":return n("samples");case"inhfld-mng":case"field-mng":return n("fields");case"thumbnail-mng":return n("items");case"formgrp-mng":return n("defines")}return[]}}(ht||(ht={}));var At,Mt=ht,Bt=w.b.div(lt||(lt=Object(k.a)(["\n    ","\n    display: inline-block;\n    position: relative;\n    background-color: ",";\n    /* width: 100%; */\n    ","\n    border-radius: 4px 0 0 4px;\n    margin: 5px 0 0 0;\n    padding: 0 10px;\n    border: solid 1px #000000d2;\n"])),$.a.CSS_LABEL_MIDIUM,(function(e){return e.backgroundColor}),(function(e){var n;return null!==(n=e.isDisable)&&void 0!==n&&n?Object(w.a)(st||(st=Object(k.a)(["\n        text-decoration: line-through;\n        color: #00054dac;\n    "]))):""})),_t=w.b.span(ut||(ut=Object(k.a)(["\n    color: #000b69bd;\n"]))),Dt=w.b.div(dt||(dt=Object(k.a)(["\n    ","\n    display: inline-block;\n    position: relative;\n    background-color: #0c0c0c;\n    color: #ebebeb;\n    border-radius: 0 4px 4px 0;\n    /* width: 100%; */\n    margin: 5px 0 0 0;\n    padding: 0 10px;\n"])),$.a.CSS_LABEL_MIDIUM),qt=w.b.span(bt||(bt=Object(k.a)(["\n    color: ",";\n"])),(function(e){return e.color})),zt=w.b.span(ft||(ft=Object(k.a)(["\n    color: #fff9d6b9;\n"]))),Ut=w.b.span(jt||(jt=Object(k.a)(["\n    color: #ffffff78;\n"]))),Ht=w.b.span(pt||(pt=Object(k.a)(["\n    color: #ff2d2d;\n"])));!function(e){var n=e.getInnerNode=function(e){for(var n=e,t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return a.some((function(e){if(null==n)return 1;var t=n.children.find((function(n){return n.data.type===e}));n=void 0==t?null:t})),n},t=(e.getInnerNodeFixed=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var i=n.apply(void 0,[e].concat(a));if(null==i)throw new Error("[innerNode] is null.");return i},e.getInnerWrap=function(e){for(var n=e,t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return a.some((function(e){if(null==n)return 1;var t=o(n.type);if(null==t)n=null;else{var a=n.data["".concat(t)].find((function(n){return n.type===e}));n=void 0==a?null:a}})),n}),a=(e.getInnerWrapFixed=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var i=t.apply(void 0,[e].concat(a));if(null==i)throw new Error("[innerWrap] is null.");return i},e.addChild=function(e,n){return a(e,n,n.children.length)},e.insertChild=function(e,n,t){var a=n.data,r=o(a.type);a.data["".concat(r)].splice(t,0,e);var i=Te.createNode(e,n);return n.children.splice(t,0,i),i}),r=(e.removeChild=function(e,n,t){var a=e.data,r=o(a.type);a.data["".concat(r)].splice(n,t),e.children.splice(n,t)},e.removeChildAll=function(e){var n=e.data,t=o(n.type);n.data["".concat(t)].length=0,e.children.length=0},e.isHead=function(e){return null!=e.parent&&e.parent.children[0]==e},e.isTail=function(e){if(null==e.parent)return!1;var n=e.parent.children;return n[n.length-1]==e},e.getCurrentIndex=function(e){var n,t=null===(n=e.parent)||void 0===n?void 0:n.data,a=o(t.type);return null==a||null==t.data?-1:t.data[a].findIndex((function(n){return n==e.data}))}),i=function(e,n){if(null!=e.parent){var t=e.parent.children,a=e.parent.data,i=o(a.type),c=a.data["".concat(i)],l=r(e);if(-1!==l){var s=t[l];t[l]=t[l+n],t[l+n]=s;var u=c[l];c[l]=c[l+n],c[l+n]=u}}},c=(e.getSwapButtons=function(e,n){for(var t=arguments.length,a=new Array(t>2?t-2:0),r=2;r<t;r++)a[r-2]=arguments[r];return c(e,n,(function(e,n){a.length>0&&a.forEach((function(t){i(t.children[e],n?-1:1)}))}))},e.getSwapButtonsCallback=function(e,n,t){var a=r(e);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Swap \u2191",isEnable:!At.isHead(e),callback:function(){i(e,-1),t(a,!0),n()}}]}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Swap \u2193",isEnable:!At.isTail(e),callback:function(){i(e,1),t(a,!1),n()}}]})]})}),o=(e.replicateSameLevel=function(e,n){if(null!=e.parent){var t=e.data,a=t.data,r=JSON.parse(JSON.stringify(a)),i={type:t.type,data:r},c=s(t.type);i.data[c]=n;var o=At.addChild(i,e.parent);o.children=Mt.getChildrenElementNode(o)}},e.getReplicateButton=function(e,n,t,a,r,i){var c=e.data;return Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Replicate",isEnable:n,callback:function(){a.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Replicate this ".concat(t,"."),buttons:[{label:"Cancel",callback:function(){a.system.dialog=null,r(Object(p.a)({},a))}},{label:"Enter",callback:function(){var n=At.getNamableProps(c.type),t=c.data[n],o=At.getNumberingOnPrefixName("".concat(t,"_"),e.parent);At.replicateSameLevel(e,o),a.system.dialog=null,r(Object(p.a)({},a)),i()}}]}),r(Object(p.a)({},a))}}]})},e.getListParamName=function(e){switch(e){case"seed-mng":case"logic-mng":return"defs";case"seed-item":case"connector":case"inherit-logic":case"interface-mng":case"logic-item":return"mngs";case"send-mng":case"behavior-mng":case"visual-mng":case"extend-mng":case"seedsend-mng":case"visual-mng":return"params";case"inherit-mng":return"inherits";case"seedarg-mng":case"argument-mng":return"args";case"sample-mng":return"samples";case"inhfld-mng":case"field-mng":return"fields";case"thumbnail-mng":return"items";case"formgrp-mng":return"defines"}return null}),l=e.getIdentifyParamName=function(e){switch(e){case"argument-item":case"field-item":case"seed-item":case"thumbnail-item":case"seedarg-item":case"sample-item":case"formgrp-item":case"logic-item":return"name";case"connector":return"id"}return null},s=e.getNamableProps=function(e){switch(e){case"connector":return"id";case"seed-item":case"argument-item":case"seedarg-item":case"field-item":case"sample-item":case"thumbnail-item":case"logic-item":return"name"}throw new Error("Namable props not found.")},u=e.syncTreeElementFromWrap=function(e){var n=e.data,t=o(n.type);null!=t&&n.data[t].forEach((function(n){var t=Te.createNode(n,e);e.children.push(t),u(t)}))},d=(e.createParamWrap=function(e,n){return{type:e,data:n}},e.createParamWrapList=function(e,n){return n.map((function(n){return{type:e,data:n}}))}),b=e.createVisualParams=function(){var e=X.VisualParamType;return d("param-item",[{name:e.RADIUS,formulaItems:["var"],values:[{type:"direct",value:"20"}]},{name:e.COLOR_R,formulaItems:["var"],values:[{type:"direct",value:"255"}]},{name:e.COLOR_G,formulaItems:["var"],values:[{type:"direct",value:"255"}]},{name:e.COLOR_B,formulaItems:["var"],values:[{type:"direct",value:"255"}]},{name:e.COLOR_A,formulaItems:["var"],values:[{type:"direct",value:"255"}]}])},f=e.createBehaviorParams=function(){var e=[],n=X.BehaviorParamType;return e.push({name:n.LIMIT,formulaItems:["var"],values:[{type:"direct",value:"30"}]}),e.push({name:n.POS_X,formulaItems:["var"],values:[{type:"direct",value:"0"}]}),e.push({name:n.POS_Y,formulaItems:["var"],values:[{type:"direct",value:"0"}]}),e.push({name:n.VEC_X,formulaItems:["var"],values:[{type:"direct",value:"0"}]}),e.push({name:n.VEC_Y,formulaItems:["var"],values:[{type:"direct",value:"0"}]}),d("param-item",e)},j=(e.getDefaultLogicMngs=function(){return[{type:"visual-mng",data:{params:b()}},{type:"behavior-mng",data:{params:f()}}]},e.getInitialData=function(){return{type:"root",data:{seedMng:{type:"seed-mng",data:{defs:[]}},logicMng:{type:"logic-mng",data:{defs:[]}}}}},e.getExistNameList=function(e){var n,t=[],a=e.data,r=l(a.type),i=null===(n=e.parent)||void 0===n?void 0:n.data,c=o(i.type);if(null==c||null==r)throw Error("List param or identifiy param not found.");return i.data[c].forEach((function(e){null!=e.data&&a!=e&&t.push(e.data[r])})),t},e.getLogicNameList=function(e){var n=[];return e.defs.forEach((function(e){null!=e.data&&n.push(e.data.name)})),n},e.getParamNameList=function(e){var n=[];X.VisualParams.forEach((function(e){n.push(e)})),X.BehaviorParams.forEach((function(e){n.push(e)})),X.SelfParams.forEach((function(e){n.push(e)})),X.ExtendParams.forEach((function(e){n.push(e)})),X.EffectParams.forEach((function(e){n.push(e)})),X.ModulateParams.forEach((function(e){n.push(e)})),X.Constants.forEach((function(e){n.push(e)}));var t=e.mngs.find((function(e){return"argument-mng"===e.type}));void 0!=t&&t.data.args.forEach((function(e){null!=e.data&&n.push(e.data.name)}));var a=e.mngs.find((function(e){return"field-mng"===e.type}));void 0!=a&&a.data.fields.forEach((function(e){null!=e.data&&n.push(e.data.name)}));return n},e.getNumberingOnPrefixName=function(e,n){for(var t=0;;){if(void 0==n.children.find((function(n){var a=n.data;return null!=a.data&&(console.log(a),a.data[s(a.type)]==="".concat(e).concat(t))})))break;t++}return"".concat(e).concat(t)},e.searchVariableReferInFormula=function(e,n){var t,a,r=(null===(t=e.parent)||void 0===t?void 0:t.data).type,i=null===(a=function(){var n,t,a,i,c,o;switch(r){case"field-mng":case"argument-mng":return null===(n=e.parent)||void 0===n||null===(t=n.parent)||void 0===t?void 0:t.data;case"inhfld-mng":return null===(a=e.parent)||void 0===a||null===(i=a.parent)||void 0===i||null===(c=i.parent)||void 0===c||null===(o=c.parent)||void 0===o?void 0:o.data}}())||void 0===a?void 0:a.data;if("argument-mng"===r){var c=i.mngs.find((function(e){return"field-mng"===e.type}));void 0!=c&&n(c.data.fields)}if("inhfld-mng"!==r){var o=i.mngs.find((function(e){return"visual-mng"===e.type}));void 0!=o&&n(o.data.params);var l=i.mngs.find((function(e){return"behavior-mng"===e.type}));void 0!=l&&n(l.data.params)}var s=i.mngs.find((function(e){return"inherit-mng"===e.type}));void 0!=s&&s.data.inherits.forEach((function(e){var t,a;if("inhfld-mng"!==r){var i=At.getInnerWrap(e,"inhfld-mng");null!=i&&n(i.data.fields)}n((null===(t=At.getInnerWrap(e,"extend-mng"))||void 0===t?void 0:t.data).params),n((null===(a=At.getInnerWrap(e,"send-mng"))||void 0===a?void 0:a.data).params)}))},e.findSeedWrap=function(e,n){var t=e.data.seedMng.data.defs.find((function(e){return e.data.name===n}));if(void 0==t)throw new Error;return t});e.doParticleJob=function(e,n,t){var a=j(e,n.seedId),r=a.data;t.push(new U.Instance(Z.buildLogicProps(t,function(){var n;return null===(n=e.data.logicMng.data.defs.find((function(e){return e.data.name===r.entry})))||void 0===n?void 0:n.data}(),e,function(){var e=At.getInnerWrapFixed(a,"interface-mng","seedarg-mng").data,t=[];e.args.forEach((function(e,a){var r=e.data;r.isArray||t.push({name:r.name,value:Number(n.values[a])})}));var r=At.getInnerWrapFixed(a,"interface-mng","seedsend-mng").data.params.map((function(e){return e.data}));return r.filter((function(e){return!e.isArray})).map((function(e){var n=Z.convertParamsToValue(e.name,r,t);if(void 0==n)throw new Error("[".concat(e.name,"]\u304cSend\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5b58\u5728\u3057\u306a\u3044\u3002"));return{name:e.name,value:n}}))}(),function(){var e=At.getInnerWrapFixed(a,"interface-mng","seedarg-mng").data,t=[];e.args.forEach((function(e,a){var r=e.data;r.isArray&&t.push({name:r.name,array:n.values[a].split(",").map((function(e){return Number(e)}))})}));var r=At.getInnerWrapFixed(a,"interface-mng","seedsend-mng").data.params.map((function(e){return e.data}));return r.filter((function(e){return e.isArray})).map((function(e){var n=Z.convertParamsToArray(e.name,r,t);if(void 0==n)throw new Error("[".concat(e.name,"]\u304cSend\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5b58\u5728\u3057\u306a\u3044\u3002"));return{name:e.name,array:n}}))}())))},e.getSeedProperties=function(e,n){var t=j(e,n),a=t.data,r=At.getInnerWrapFixed(t,"interface-mng","seedarg-mng").data.args.map((function(e){return e.data})),i=At.getInnerWrapFixed(t,"interface-mng","seedsend-mng").data.params.map((function(e){return e.data})),c=At.getInnerWrapFixed(t,"thumbnail-mng").data.items.map((function(e){return e.data}));return{seed:a,logic:function(){var n;return null===(n=e.data.logicMng.data.defs.find((function(e){return e.data.name===a.entry})))||void 0===n?void 0:n.data}(),seedargList:r,seedsendList:i,thumbnailList:c}}}(At||(At={}));var Wt,Jt,Vt=At,Yt=function(e){var n=Object(x.useState)([]),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useMemo)((function(){var n=[],t=Vt.getInnerWrap(e.logicWrap,"argument-mng");return null!=t&&(n=t.data.args.map((function(e){return e.data}))),n}),[]);return Object(x.useEffect)((function(){r(i.map((function(e){return{value:"",errors:[]}})))}),[]),Object(x.useEffect)((function(){void 0==a.find((function(e){return e.errors.length>0}))?(e.setSendingValueMap((function(){return a.filter((function(e,n){return"number"===i[n].valueType})).map((function(e,n){return{name:i[n].name,value:Number(e.value)}}))})),e.setSendingArrayMap((function(){return a.filter((function(e,n){return"array"===i[n].valueType})).map((function(e,n){var t=i[n],a=e.value.split(",").map((function(e){return Number(e)}));return{name:t.name,array:a}}))}))):(e.setSendingValueMap(null),e.setSendingArrayMap(null))}),[a]),Object(C.jsx)(C.Fragment,{children:a.map((function(e,n){var t=i[n],c=[],o=!1;return"number"===t.valueType?(c.push({checker:function(e){return je.checkRequired(e)},errorType:"required"}),o=!0):c.push({checker:function(e){return je.checkArrayNumber(e)},errorType:"value"}),Object(C.jsx)(S.a.FormRecord,{titleLabel:t.name,labelWidth:250,jsx:Object(C.jsx)(S.a.TextField,{width:312,isNumber:o,checkable:e,setCheckable:function(){r(a.slice())},validates:c})},n)}))})},Xt=function(e){var n=Object(x.useState)([]),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useState)({value:"",errors:[]}),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useMemo)((function(){var n=Vt.getInnerWrap(e.seedWrap,"interface-mng","formgrp-mng"),t=[];return null!=n&&(t=n.data.defines.map((function(e){return e.data}))),[t,Vt.getInnerWrapFixed(e.seedWrap,"interface-mng","seedarg-mng").data.args.map((function(e){return e.data})),Vt.getInnerWrapFixed(e.seedWrap,"sample-mng").data.samples.map((function(e){return e.data}))]}),[]),u=Object(m.a)(s,3),d=u[0],b=u[1],f=u[2];return Object(x.useEffect)((function(){r(b.map((function(e){var n="";return void 0!=e.defval&&(n=e.defval.toString()),{value:n,errors:[]}})))}),[]),Object(x.useEffect)((function(){void 0==a.find((function(e){return e.errors.length>0}))?(e.setSendingValueMap((function(){var n=[];a.forEach((function(e,t){var a=b[t];a.isArray||n.push({name:a.name,value:Number(e.value)})}));var t=Vt.getInnerWrapFixed(e.seedWrap,"interface-mng","seedsend-mng").data.params.map((function(e){return e.data}));return t.filter((function(e,n){return!e.isArray})).map((function(e){var a=Z.convertParamsToValue(e.name,t,n);if(void 0==a)throw new Error("[".concat(e.name,"]\u304cSend\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5b58\u5728\u3057\u306a\u3044\u3002"));return{name:e.name,value:a}}))})),e.setSendingArrayMap((function(){var n=[];a.forEach((function(e,t){var a=b[t];if(a.isArray){var r=""===e.value?[]:e.value.split(",").map((function(e){return Number(e)}));n.push({name:a.name,array:r})}}));var t=Vt.getInnerWrapFixed(e.seedWrap,"interface-mng","seedsend-mng").data.params.map((function(e){return e.data}));return t.filter((function(e,n){return e.isArray})).map((function(e){console.log(n);var a=Z.convertParamsToArray(e.name,t,n);if(void 0==a)throw new Error("[".concat(e.name,"]\u304cSend\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5b58\u5728\u3057\u306a\u3044\u3002"));return{name:e.name,array:a}}))}))):(e.setSendingValueMap(null),e.setSendingArrayMap(null))}),[a]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"Preset",innerJsx:Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Combobox,{width:402,checkable:o,setCheckable:l,headBlank:!0,list:f.map((function(e,n){return{labelText:e.name,value:n.toString()}}))}),Object(C.jsx)(S.a.ButtonItem,{button:{label:"Apply",isEnable:""!==o.value,callback:function(){var e=Number(o.value);f[e].values.forEach((function(e,n){a[n].value=e.toString()})),r(a.slice())}}})]})})}),mt.buildPreviewForms(!1,b,d,a,r)]})};(Jt=Wt||(Wt={})).SCREEN_WIDTH=640,Jt.SCREEN_HEIGHT=960;var Gt,Kt,Qt,Zt,$t,ea,na,ta=t(20),aa=t(35),ra=t(73),ia=t(15);(na||(na={})).Component=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useRef)({}),i=Object(x.useState)(0),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)(!1),u=Object(m.a)(s,2),d=u[0],b=u[1],f=e.sceens,j=e.frameCnt;Object(x.useEffect)((function(){d&&(o<j?setTimeout((function(){l(o+1)}),1e3/30):(b(!1),l(0)))}),[d,o]);var h=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ja,{children:0===f.length?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(ma,{src:f[o]})}),Object(C.jsx)(pa,{ref:r,onClick:function(e){if(!d){var n=e.pageX,t=r.current.getBoundingClientRect(),a=(n-(t.left+window.pageXOffset))/t.width;l(Math.floor(j*a))}},children:Object(C.jsx)(ha,{rate:100*o/j})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",isIconButton:!0,interval:12,buttons:[{label:"\u2190",width:60,isEnable:!d&&o>0,icon:Object(C.jsx)(ia.b,{}),callback:function(){l(o-1)}},{label:"\u2192",width:60,isEnable:!d&&o<f.length-1,icon:Object(C.jsx)(ia.c,{}),callback:function(){l(o+1)}},{label:d?"Stop":"start",width:100,icon:d?Object(C.jsx)(aa.c,{}):Object(C.jsx)(ta.a,{}),callback:function(){b(!d)}},{label:"reset",width:100,isEnable:!d,icon:Object(C.jsx)(ra.a,{}),callback:function(){l(0)}}]})]});return Object(C.jsxs)(fa,{width:Wt.SCREEN_WIDTH-1,height:768,tabIndex:0,onKeyDown:function(e){switch(e.key){case"ArrowLeft":!d&&!d&&o>0&&l(o-1);break;case"ArrowRight":!d&&o<f.length-1&&l(o+1);break;case" ":b(!d)}"Escape"===e.key&&(t.system.dialog=null,a(Object(p.a)({},t)))},children:[h,Object(C.jsx)(xa,{isEnable:!d,onClick:function(){t.system.dialog=null,a(Object(p.a)({},t)),void 0!=e.closeAction&&e.closeAction()},children:"\xd7"})]})};var ca,oa,la,sa,ua,da,ba=na,fa=w.b.div(Gt||(Gt=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #575a61ce;\n    border: 1px solid #8f8f8f;\n    box-sizing: border-box;\n    border-radius: 4px;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),ja=w.b.div(Kt||(Kt=Object(k.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 35px 0 0 0;\n    background-color: #020202df;\n"])),Wt.SCREEN_WIDTH-3,Wt.SCREEN_WIDTH-3),pa=w.b.div(Qt||(Qt=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: 20px;\n    margin: 5px 0 0 4px;\n    background-color: #000000;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"]))),ha=w.b.div(Zt||(Zt=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","%;\n    height: 100%;\n    /* background-color: #2fccf3; */\n    background: linear-gradient(to bottom, #37819492, #2fccf3, #37819492);\n"])),(function(e){return e.rate})),ma=w.b.img($t||($t=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]))),xa=w.b.div(ea||(ea=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 2px;\n    right: 4px;\n    width: 30px;\n    height: 30px;\n    z-index: 12;\n    background-color: #d5d5d5;\n    border: 1px solid #3d3d3d;\n    border-radius: 4px;\n    font-size: 18px;\n    padding-left: 8px;\n    font-weight: 600;\n    color: #3d3d3d;\n    box-sizing: border-box;\n    ","\n    &:hover {\n        background-color: #ce9595;\n    }\n"])),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE}));!function(e){e.run=function(e){for(var n,t=null!==(n=e.guaranteeFrame)&&void 0!==n?n:0,a=[],r=0;;){e.doIterate(r,a);for(var i=a.length-1;i>=0;i--){var c=a[i];c.update(),c.isLive||a.splice(i,1)}if(r>e.limitFrame||a.length>e.limitParticle||r>t&&0===a.length)break;r++}void 0!=e.doEnd&&e.doEnd(r,a)};var n=e.runPaging=function(e,n,t,a){r=e.guaranteeFrame;for(var r,i=t;i-t<a;){e.doIterate(i,n);for(var c=n.length-1;c>=0;c--){var o=n[c];o.update(),o.isLive||n.splice(c,1)}i++}};e.BuildFrame=function(e){var t=Object(x.useContext)($d),a=t.store,r=(t.setStore,t.dispatcher),i=Object(x.useState)(null),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)({useFrame:0,curFrame:0,owner:[],sceens:[]}),u=Object(m.a)(s,2),d=u[0],b=u[1],f=a.libraryData,j=a.storyData;Object(x.useEffect)((function(){if(0==d.useFrame||d.curFrame!=d.useFrame){var e=j.fuseList,t=j.limitFrame,a=j.limitParticle,r=e[0].frame;0===d.useFrame?(da.run({limitFrame:t,limitParticle:a,guaranteeFrame:r,doIterate:function(n,t){e.some((function(e){if(e.frame===n)Vt.doParticleJob(f,e,t);else if(e.frame>n)return 1}))},doEnd:function(e){d.useFrame=e}}),b(Object(p.a)({},d))):(n({limitFrame:t,limitParticle:a,guaranteeFrame:r,doIterate:function(n,t){e.some((function(e){if(e.frame===n)Vt.doParticleJob(f,e,t);else if(e.frame>n)return 1})),d.sceens.push(_.createURL(550,550,(function(e){t.forEach((function(n){n.draw(e)})),e.save()})))}},d.owner,d.curFrame,1),d.curFrame+=1,d.curFrame>d.useFrame&&(d.curFrame=d.useFrame),b(Object(p.a)({},d)))}else l({sceens:d.sceens,useFrame:d.useFrame})}),[d]),Object(x.useEffect)((function(){null!=o&&(a.system.dialog=Object(C.jsx)(ba.Component,{sceens:o.sceens,frameCnt:o.useFrame,closeAction:e.closeAction}),r.updateStore())}),[o]);return function(){if(null==o){if(null==d)return Object(C.jsx)(C.Fragment,{});var e=d.curFrame/d.useFrame*100,n=0===d.useFrame;return Object(C.jsxs)(Pa,{children:[Object(C.jsx)(Na,{children:Object(C.jsx)(Aa,{rate:e})}),Object(C.jsx)(Ma,{isStandby:n,children:n?"Calculating...":"".concat(Math.floor(e),"%")})]})}return Object(C.jsx)(C.Fragment,{})}()}}(da||(da={}));var ga,va,Oa,ya,ka,wa,Ea,Sa,Ca,Ta,Fa,Ra,La,Ia=da,Pa=w.b.div(ca||(ca=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #002910c0;\n    z-index: 10;\n    /* text-align: center; */\n"]))),Na=w.b.div(oa||(oa=Object(k.a)(["\n    display: inline-block;\n    position: relaltive;\n    width: calc(100% - 20px);\n    height: 40px;\n    margin: 200px 0 0 10px;\n    background-color: #ffffff29;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"]))),Aa=w.b.div(la||(la=Object(k.a)(["\n    display: inline-block;\n    width: ","%;\n    height: 100%;\n    background-color: #ffffffc1;\n"])),(function(e){return e.rate})),Ma=w.b.div(sa||(sa=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 50px;\n    background-color: #0000003b;\n\n    color: #ffffff;\n    ","\n    font-size: 28px;\n    font-wieght: 600;\n    line-height: 48px;\n    padding-left: 8px;\n    box-sizing: border-box;\n    text-align: center;\n"])),(function(e){return e.isStandby?Object(w.a)(ua||(ua=Object(k.a)(["\n        color: #f50000;\n    "]))):""}));(La||(La={})).Component=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useRef)({}),i=Object(x.useState)([]),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)(-1),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useState)(0),j=Object(m.a)(f,2),h=j[0],g=j[1],v=Object(x.useState)(0),O=Object(m.a)(v,2),y=O[0],k=O[1],w=Object(x.useState)(!1),E=Object(m.a)(w,2),F=E[0],R=E[1],L=Object(x.useState)(0),I=Object(m.a)(L,2),P=(I[0],I[1],Object(x.useState)(!1)),N=Object(m.a)(P,2),A=N[0],M=N[1],B=Object(x.useState)(null),D=Object(m.a)(B,2),q=D[0],z=D[1],H=Object(x.useState)(null),W=Object(m.a)(H,2),J=W[0],V=W[1],Y="seed-item"===e.master.type;Object(x.useEffect)((function(){A&&(y<d?setTimeout((function(){k(y+1)}),1e3/30):(M(!1),k(0)))}),[A,y]),Object(x.useEffect)((function(){F&&X()}),[F]);var X=function(){if(null!=q){k(0);var n=[];Ia.run({limitFrame:500,limitParticle:3e3,doIterate:function(t,a){0===t&&a.push(new U.Instance(Z.buildLogicProps(a,function(){if(Y){var n,t=e.master.data;return null===(n=e.rootData.data.logicMng.data.defs.find((function(e){return e.data.name===t.entry})))||void 0===n?void 0:n.data}return e.master.data}(),e.rootData,q,J))),n.push(_.createURL(550,550,(function(e){a.forEach((function(n){n.draw(e)})),e.globalAlpha=1,e.font="16pt Arial",e.fillStyle="#ffffff",e.fillText("".concat(t),6,24),e.fillStyle="#ffec5c",e.fillText("".concat(a.length),6,44)})))},doEnd:function(e){b(e),l(n),R(!1),g(1)}})}},G=null!=q,K=Object(C.jsxs)(Qa,{children:[Object(C.jsx)(tr,{isEnable:F,children:Object(C.jsx)(ar,{children:"Now building..."})}),Object(C.jsx)(Ga,{isSeed:"seed-item"===e.master.type,children:Y?Object(C.jsx)(Xt,{seedWrap:e.master,setSendingValueMap:z,setSendingArrayMap:V}):Object(C.jsx)(Yt,{logicWrap:e.master,setSendingValueMap:z,setSendingArrayMap:V})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Build",isEnable:G&&!F,callback:function(){R(!0)}}]})]}),Q=Object(C.jsxs)(Qa,{children:[Object(C.jsx)(Ka,{children:0===o.length?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(er,{src:o[y]})}),Object(C.jsx)(Za,{ref:r,onClick:function(e){if(!A){var n=e.pageX,t=r.current.getBoundingClientRect(),a=(n-(t.left+window.pageXOffset))/t.width;k(Math.floor(d*a))}},children:Object(C.jsx)($a,{rate:100*y/d})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"\u2190",width:50,isEnable:!A&&y>0,callback:function(){k(y-1)}},{label:"\u2192",width:50,isEnable:!A&&y<o.length-1,callback:function(){k(y+1)}},{label:A?"Stop":"start",callback:function(){M(!A)}},{label:"reset",isEnable:!A,callback:function(){k(0)}}]})]});return Object(C.jsxs)(Ya,{width:600,height:660,tabIndex:0,onKeyDown:function(e){if(0===h)G&&" "===e.key&&X();else switch(e.key){case"ArrowLeft":!A&&!A&&y>0&&k(y-1);break;case"ArrowRight":!A&&y<o.length-1&&k(y+1);break;case" ":M(!A)}A||"Escape"!==e.key||(t.system.dialog=null,a(Object(p.a)({},t)))},children:[Object(C.jsx)(Xa,{children:Object(C.jsx)(T,{tabElements:[{name:"Build",enable:!0,cont:K},{name:"Play",enable:-1!==d,cont:Q}],activeNo:h,selectTabIndex:function(e){return g(e)}})}),Object(C.jsx)(nr,{isEnable:!A,onClick:e.closeButtonAction,children:"\xd7"})]})};var Ba,_a,Da,qa,za,Ua,Ha,Wa,Ja,Va=La,Ya=w.b.div(ga||(ga=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n    box-sizing: border-box;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),Xa=w.b.div(va||(va=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #4d5056df;\n"]))),Ga=w.b.div(Oa||(Oa=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 580px;\n    background-color: #c5cfd6df;\n    ","\n    overflow-y: auto;\n"])),(function(e){return e.isSeed?Object(w.a)(ya||(ya=Object(k.a)(["\n        background-color: #c6d6c5df;\n    "]))):""})),Ka=w.b.div(ka||(ka=Object(k.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 5px 0 0 20px;\n    background-color: #020202df;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"])),Z.SCREEN_WIDTH,Z.SCREEN_HEIGHT),Qa=w.b.div(wa||(wa=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-color: #c5c5c5df;\n"]))),Za=w.b.div(Ea||(Ea=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: 20px;\n    margin: 5px 0 0 4px;\n    background-color: #000000;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"]))),$a=w.b.div(Sa||(Sa=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","%;\n    height: 100%;\n    /* background-color: #2fccf3; */\n    background: linear-gradient(to bottom, #37819492, #2fccf3, #37819492);\n"])),(function(e){return e.rate})),er=w.b.img(Ca||(Ca=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]))),nr=w.b.div(Ta||(Ta=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 2px;\n    right: 4px;\n    width: 30px;\n    height: 30px;\n    z-index: 12;\n    background-color: #d5d5d5;\n    border: 1px solid #3d3d3d;\n    border-radius: 4px;\n    font-size: 18px;\n    padding-left: 8px;\n    font-weight: 600;\n    color: #3d3d3d;\n    box-sizing: border-box;\n    ","\n    &:hover {\n        background-color: #ce9595;\n    }\n"])),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE})),tr=w.b.div(Fa||(Fa=Object(k.a)(["\n    display: ",";\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #000552cd;\n    z-index: 99;\n"])),(function(e){return e.isEnable?"inline-block;":"none;"})),ar=w.b.div(Ra||(Ra=Object(k.a)(["\n    display: inline-block;\n    /* width: 100%;\n    height: 100%; */\n    margin: 240px 0 0 110px;\n    /* background-color: #26f055cd; */\n    color: white;\n    font-size: 56px;\n    font-weight: 600;\n\n"])));(Ja||(Ja={})).Component=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useRef)({}),i=Object(x.useState)(0),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)(0),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useState)(!1),j=Object(m.a)(f,2),h=j[0],g=j[1],v=e.sceens,O=e.frameCnt;Object(x.useEffect)((function(){h&&(d<O?setTimeout((function(){b(d+1)}),1e3/30):(g(!1),b(0)))}),[h,d]);var y=Object(C.jsxs)(Zi,{children:[Object(C.jsx)(Qi,{children:0===v.length?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(nc,{src:v[d]})}),Object(C.jsx)($i,{ref:r,onClick:function(e){if(!h){var n=e.pageX,t=r.current.getBoundingClientRect(),a=(n-(t.left+window.pageXOffset))/t.width;b(Math.floor(O*a))}},children:Object(C.jsx)(ec,{rate:100*d/O})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"\u2190",width:50,isEnable:!h&&d>0,callback:function(){b(d-1)}},{label:"\u2192",width:50,isEnable:!h&&d<v.length-1,callback:function(){b(d+1)}},{label:h?"Stop":"start",callback:function(){g(!h)}},{label:"reset",isEnable:!h,callback:function(){b(0)}}]})]});return Object(C.jsxs)(Gi,{width:600,height:660,tabIndex:0,onKeyDown:function(e){switch(e.key){case"ArrowLeft":!h&&!h&&d>0&&b(d-1);break;case"ArrowRight":!h&&d<v.length-1&&b(d+1);break;case" ":g(!h)}"Escape"===e.key&&(t.system.dialog=null,a(Object(p.a)({},t)))},children:[Object(C.jsx)(Ki,{children:Object(C.jsx)(T,{tabElements:[{name:"Play",enable:!0,cont:y}],activeNo:o,selectTabIndex:function(e){return l(e)}})}),Object(C.jsx)(tc,{isEnable:!h,onClick:function(){t.system.dialog=null,a(Object(p.a)({},t)),void 0!=e.closeAction&&e.closeAction()},children:"\xd7"})]})};var rr,ir,cr,or,lr,sr,ur,dr,br,fr,jr,pr,hr,mr,xr,gr,vr,Or,yr,kr,wr,Er,Sr,Cr,Tr,Fr,Rr,Lr,Ir,Pr,Nr,Ar,Mr,Br,_r,Dr,qr,zr,Ur,Hr,Wr,Jr,Vr,Yr,Xr,Gr,Kr,Qr,Zr,$r,ei,ni,ti,ai,ri,ii,ci,oi,li,si,ui,di,bi,fi,ji,pi,hi,mi,xi,gi,vi,Oi,yi,ki,wi,Ei,Si,Ci,Ti,Fi,Ri,Li,Ii,Pi,Ni,Ai,Mi,Bi,_i,Di,qi,zi,Ui,Hi,Wi,Ji,Vi,Yi,Xi=Ja,Gi=w.b.div(Ba||(Ba=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),Ki=w.b.div(_a||(_a=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #4d5056df;\n"]))),Qi=w.b.div(Da||(Da=Object(k.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 5px 0 0 20px;\n    background-color: #020202df;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"])),Z.SCREEN_WIDTH,Z.SCREEN_HEIGHT),Zi=w.b.div(qa||(qa=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #aec7d8df;\n"]))),$i=w.b.div(za||(za=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: 20px;\n    margin: 5px 0 0 4px;\n    background-color: #000000;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"]))),ec=w.b.div(Ua||(Ua=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","%;\n    height: 100%;\n    /* background-color: #2fccf3; */\n    background: linear-gradient(to bottom, #37819492, #2fccf3, #37819492);\n"])),(function(e){return e.rate})),nc=w.b.img(Ha||(Ha=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]))),tc=w.b.div(Wa||(Wa=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 2px;\n    right: 4px;\n    width: 30px;\n    height: 30px;\n    z-index: 12;\n    background-color: #d5d5d5;\n    border: 1px solid #3d3d3d;\n    border-radius: 4px;\n    font-size: 18px;\n    padding-left: 8px;\n    font-weight: 600;\n    color: #3d3d3d;\n    box-sizing: border-box;\n    ","\n    &:hover {\n        background-color: #ce9595;\n    }\n"])),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE})),ac=function(e){var n=Object(x.useState)(null),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useState)(null),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)(null),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useState)(null),j=Object(m.a)(f,2),h=j[0],g=j[1],v=Object(x.useState)(-1),O=Object(m.a)(v,2),y=O[0],k=O[1];Object(x.useEffect)((function(){rc(e.projectSeq).then((function(e){if(e.length>0){var n=e[0],t=n.name,a=n.owner,i=n.lastmod,c=JSON.parse(E.a.unZip(n.source));if(c.hasOwnProperty("scenarioData")){var o=c;l({name:t,ownerId:a,lastmod:i,libraryData:o.libraryData,scenarioData:o.scenarioData})}else{var s=c,u=s.data.seedMng.data.defs.filter((function(e){return"release"===e.data.permit})).map((function(e){var n=e.data,t=Vt.getInnerWrapFixed(e,"interface-mng","seedarg-mng").data.args.length;return{name:n.name,disp:n.disp,argCount:t,master:e}}));r({name:t,ownerId:a,lastmod:i,rootData:s,seedList:u})}}}))}),[]),Object(x.useEffect)((function(){if(null!=h&&null!=o)if(0==h.useFrame||h.curFrame!=h.useFrame){var e=o.scenarioData.fuseList,n=o.scenarioData.limitFrame,t=o.scenarioData.limitParticle,a=e[0].frame,r=o.libraryData;0===h.useFrame?(Ia.run({limitFrame:n,limitParticle:t,guaranteeFrame:a,doIterate:function(n,t){e.some((function(e){if(e.frame===n)Vt.doParticleJob(r,e,t);else if(e.frame>n)return 1}))},doEnd:function(e){h.useFrame=e}}),g(Object(p.a)({},h))):(Ia.runPaging({limitFrame:n,limitParticle:t,guaranteeFrame:a,doIterate:function(n,t){e.some((function(e){if(e.frame===n)Vt.doParticleJob(r,e,t);else if(e.frame>n)return 1})),h.sceens.push(_.createURL(550,550,(function(e){t.forEach((function(n){n.draw(e)})),e.save()})))}},h.owner,h.curFrame,1),h.curFrame+=1,h.curFrame>h.useFrame&&(h.curFrame=h.useFrame),g(Object(p.a)({},h)))}else b({sceens:h.sceens,useFrame:h.useFrame})}),[h]);return function(){var e=Object(C.jsx)(C.Fragment,{});if(null!=a)e=-1===y?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(sc,{children:a.name}),a.seedList.map((function(e,n){var t,a=null!==(t=e.disp)&&void 0!==t?t:e.name;return Object(C.jsxs)(uc,{onClick:function(){k(n)},children:[Object(C.jsx)(dc,{children:a}),Object(C.jsxs)(bc,{children:[" [",e.argCount," arguments]"]})]},n)}))]}):Object(C.jsx)(Va.Component,{master:a.seedList[y].master,rootData:a.rootData,closeButtonAction:function(){k(-1)}});else if(null!=o)if(null==d){e=Object(C.jsxs)(C.Fragment,{children:[function(){if(null==h)return Object(C.jsx)(C.Fragment,{});var e=h.curFrame/h.useFrame*100,n=0===h.useFrame;return Object(C.jsxs)(ic,{children:[Object(C.jsx)(cc,{children:Object(C.jsx)(oc,{rate:e})}),Object(C.jsx)(lc,{isStandby:n,children:n?"Calculating...":"".concat(Math.floor(e),"%")})]})}(),Object(C.jsx)(sc,{children:o.name}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",isIconButton:!0,buttons:[{label:"Build",icon:Object(C.jsx)(ta.d,{}),width:200,callback:function(){g({useFrame:0,curFrame:0,owner:[],sceens:[]})}}]})]})}else e=Object(C.jsx)(Xi.Component,{sceens:d.sceens,frameCnt:d.useFrame});return e}()},rc=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n){var t,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","\n        SELECT name, (select id from user_tbl where seq = prj.owner) as owner, source, lastmod\n        FROM prjcttbl prj\n        WHERE seq = ".concat(n,"\n    "));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ic=w.b.div(rr||(rr=Object(k.a)(["\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #002910c0;\n    z-index: 10;\n    /* text-align: center; */\n"]))),cc=w.b.div(ir||(ir=Object(k.a)(["\n    display: inline-block;\n    position: relaltive;\n    width: calc(100% - 20px);\n    height: 40px;\n    margin: 200px 0 0 10px;\n    background-color: #ffffff29;\n    border: solid 1px #fff;\n    box-sizing: border-box;\n"]))),oc=w.b.div(cr||(cr=Object(k.a)(["\n    display: inline-block;\n    width: ","%;\n    height: 100%;\n    background-color: #ffffffc1;\n"])),(function(e){return e.rate})),lc=w.b.div(or||(or=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 50px;\n    background-color: #0000003b;\n\n    color: #ffffff;\n    ","\n    font-size: 28px;\n    font-wieght: 600;\n    line-height: 48px;\n    padding-left: 8px;\n    box-sizing: border-box;\n    text-align: center;\n"])),(function(e){return e.isStandby?Object(w.a)(lr||(lr=Object(k.a)(["\n        color: #f50000;\n    "]))):""})),sc=w.b.div(sr||(sr=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 50px;\n    background: linear-gradient(to bottom, #00215e, #000000, #00215e);\n\n    color: #e0e0e0;\n    font-size: 28px;\n    font-wieght: 600;\n    line-height: 48px;\n    padding-left: 8px;\n    box-sizing: border-box;\n"]))),uc=w.b.div(ur||(ur=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 40px;\n    background: linear-gradient(to bottom, #192f7e, #000540, #192f7e);\n\n    font-size: 24px;\n    font-wieght: 600;\n    line-height: 38px;\n    padding-left: 8px;\n    box-sizing: border-box;\n"]))),dc=w.b.span(dr||(dr=Object(k.a)(["\n    color: #abc9e6;\n"]))),bc=w.b.span(br||(br=Object(k.a)(["\n    color: #fbffbf;\n"]))),fc=function(e){var n=Object(x.useState)(!0),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useState)({adjLeft:0,adjTop:0,rate:1}),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useRef)(null),u=E.a.getDecryptionedProjectSeq(e.hashKey),d=function(){if(null!=s.current){var e=s.current.getBoundingClientRect(),n=[e.width,e.height],t=n[0],a=n[1],r=a/660>t/600,i=r?t/600:a/660;l({adjLeft:r?0:t/2-600*i/2,adjTop:r?a/2-660*i/2:0,rate:i})}};Object(x.useEffect)((function(){d(),console.log(navigator.userAgent),jc()&&r(0===window.orientation),jc()?window.addEventListener("orientationchange resize",(function(){alert("change"),d(),r(0===window.orientation)})):window.addEventListener("resize",(function(){d()}))}),[]);var b=Object(C.jsx)(xc,{children:"Make your smartphone vertical!"});return a&&(b=Object(C.jsx)(mc,{children:Object(C.jsx)(ac,{projectSeq:u})})),Object(C.jsx)(pc,{ref:s,children:Object(C.jsx)(hc,{left:o.adjLeft,top:o.adjTop,rate:o.rate,children:b})})},jc=function(){return!!navigator.userAgent.match(/iPhone|Android.+Mobile/)},pc=w.b.div(fr||(fr=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* width: calc(100% - 10px);\n  height: calc(100% - 10px);\n  background-color: #9eadc9;\n  margin: 5px 0 0 5px; */\n  width: 100%;\n  height: 100%;\n"]))),hc=w.b.div(jr||(jr=Object(k.a)(["\n  display: inline-block;\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform-origin: top left;\n  /* width: 100%;\n  height: 100%; */\n  transform: scale(",");\n"])),(function(e){return e.top}),(function(e){return e.left}),(function(e){return e.rate})),mc=w.b.div(pr||(pr=Object(k.a)(["\n  display: inline-block;\n  width: ","px;\n  height: ","px;\n  background-color: #929292;\n"])),600,660),xc=w.b.div(hr||(hr=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-color: #750000;\n    color: white;\n    font-size: 24px;\n    font-wieght: 600;\n    line-height: 38px;\n    padding-left: 8px;\n    box-sizing: border-box;\n"]))),gc=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=n.system.dialog;return null==a?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(vc,{onClick:function(){n.system.canDialogClose&&(n.system.dialog=null,n.system.canDialogClose=!1,t(Object(p.a)({},n)))}}),a]})},vc=w.b.div(mr||(mr=Object(k.a)(["\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #000329a2;\n    z-index: 10;\n    text-align: center;\n"]))),Oc=t(39),yc=t(26),kc=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useState)(0),r=Object(m.a)(a,2),i=r[0],c=r[1],o=Object(x.useState)({value:"",errors:[]}),l=Object(m.a)(o,2),s=l[0],u=l[1],d=Object(x.useState)({value:"",errors:[]}),b=Object(m.a)(d,2),f=b[0],j=b[1],h=Object(x.useState)({value:"",errors:[]}),g=Object(m.a)(h,2),v=g[0],O=g[1],y=Object(x.useState)({value:"",errors:[]}),k=Object(m.a)(y,2),w=k[0],F=k[1],R=Object(x.useState)({value:"",errors:[]}),L=Object(m.a)(R,2),I=L[0],P=L[1],N=Object(x.useState)([]),A=Object(m.a)(N,2),M=A[0],B=A[1],_=Object(x.useState)([]),D=Object(m.a)(_,2),q=D[0],z=D[1],U=Object(x.useState)(!1),H=Object(m.a)(U,2),W=H[0],J=H[1],V=n.system.user,Y=function(){u(Object(p.a)(Object(p.a)({},s),{},{value:V.id})),O(Object(p.a)(Object(p.a)({},v),{},{value:""})),F(Object(p.a)(Object(p.a)({},w),{},{value:""})),P(Object(p.a)(Object(p.a)({},I),{},{value:V.email})),j(Object(p.a)(Object(p.a)({},f),{},{value:V.password}))};Object(x.useEffect)((function(){E.a.findUserInfoList().then((function(e){var n=[],t=[];e.forEach((function(e){e.id!==V.id&&n.push(e.id),""!==e.email&&t.push(e.email)})),B(n),z(t)}));var e=E.a.getHashedFromUserSeq(V.seq);return window.history.replaceState("","","/#/user?v=".concat(e)),Y(),function(){window.history.replaceState("","","/#/")}}),[]);var X=Object(C.jsxs)(Tc,{children:[Object(C.jsx)(S.a.InputTextFormBak,{titleLabel:"user id",checkable:s,setCheckable:u,validates:[{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return je.checkAsciiChars(e)},errorType:"value"},{checker:function(e){return!M.includes(e)},errorType:"relation"}],width:300,marginTop:5,isReadOnly:!W}),Object(C.jsx)(S.a.InputTextFormBak,{titleLabel:"new pass",isPassword:!0,checkable:v,setCheckable:O,validates:[{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return e===w.value},errorType:"relation"}],dependency:[w],width:300,marginTop:5,isReadOnly:!W}),Object(C.jsx)(S.a.InputTextFormBak,{titleLabel:"new pass*",isPassword:!0,checkable:w,setCheckable:F,validates:[{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return e===v.value},errorType:"relation"}],dependency:[v],width:300,marginTop:5,isReadOnly:!W}),Object(C.jsx)(S.a.InputTextFormBak,{titleLabel:"email",checkable:I,setCheckable:P,validates:[{checker:function(e){return je.checkStringLength(e,4,40)},errorType:"length"},{checker:function(e){return 0===e.length||2===e.split("@").length},errorType:"value"},{checker:function(e){return!q.includes(e)},errorType:"relation"}],marginTop:5,isReadOnly:!W}),Object(C.jsx)(S.a.InputTextFormBak,{titleLabel:"old pass",isPassword:!0,checkable:f,setCheckable:j,validates:[{checker:function(e){return e===V.password},errorType:"relation"}],width:300,marginTop:55,isReadOnly:!W})]}),G=0===s.errors.length&&0===v.errors.length&&0===w.errors.length&&0===I.errors.length&&0===f.errors.length;return Object(C.jsxs)(wc,{width:750,height:600,children:[Object(C.jsx)(Ec,{children:Object(C.jsx)(S.a.Message,{message:"If you bookmark this page, you can easily login by URL."})}),Object(C.jsx)(Sc,{children:Object(C.jsx)(T,{tabElements:[{name:"User",enable:!0,cont:X},{name:"Security",enable:!1,cont:Object(C.jsx)(C.Fragment,{})}],activeNo:i,selectTabIndex:function(e){return c(e)}})}),Object(C.jsx)(Cc,{children:Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Close",callback:function(){}},{label:"Cancel",isEnable:W,callback:function(){J(!1),Y()}},{label:W?"Regist":"Modify",isEnable:!W||G,callback:function(){W?function(){var e=0===v.value.length?"":",password = '".concat(v.value,"'");E.a.sendQueryRequestToAPI("update","UPDATE user_tbl SET id = '".concat(s.value,"', email = '").concat(I.value,"'").concat(e,"\n            WHERE seq = ").concat(null===V||void 0===V?void 0:V.seq)).then((function(){V.id=s.value,v.value.length>0&&(V.password=v.value),V.email=I.value,n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Modify successful!"}),t(Object(p.a)({},n))}))}():(J(!0),j(Object(p.a)(Object(p.a)({},f),{},{value:""})))}}]})})]})},wc=w.b.div(xr||(xr=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7eb;\n    border: 1px solid #9e9e9e;\n    border-radius: 4px;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),Ec=(w.b.div(gr||(gr=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 80px;\n    background-color: #eeeaea;\n    text-align: center;\n"]))),w.b.div(vr||(vr=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 50px;\n    /* background-color: #d1d1d1; */\n    /* text-align: center; */\n"])))),Sc=w.b.div(Or||(Or=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - 100px);\n    padding: 4px;\n    box-sizing: border-box;\n    /* background-color: #d1d1d1; */\n    text-align: center;\n"]))),Cc=w.b.div(yr||(yr=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    padding: 6px 4px 0 0;\n    box-sizing: border-box;\n    width: 100%;\n    height: 50px;\n    background-color: #d1d1d1;\n    text-align: right;\n"]))),Tc=w.b.div(kr||(kr=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #cecece;\n"]))),Fc=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useState)(!1),r=Object(m.a)(a,2),i=r[0],c=r[1],o=Object(x.useState)({value:"",errors:[]}),l=Object(m.a)(o,2),s=l[0],u=l[1],d=Object(x.useState)({value:"",errors:[]}),b=Object(m.a)(d,2),f=b[0],g=b[1],v=Object(x.useState)({value:"",errors:[]}),O=Object(m.a)(v,2),y=O[0],k=O[1],w=Object(x.useState)([]),T=Object(m.a)(w,2),F=T[0],R=T[1],L=Object(x.useState)([]),I=Object(m.a)(L,2),P=I[0],N=I[1],A=function(){for(var e="0123456789",n="",t=0;t<6;t++)n+=e.charAt(10*Math.random());return n};Object(x.useEffect)((function(){E.a.findUserIdList().then((function(e){N(e)}))}),[]);var M=Object(x.useState)(A()),B=Object(m.a)(M,2),D=B[0],q=B[1],z=Object(x.useState)({value:"",errors:[]}),U=Object(m.a)(z,2),H=U[0],W=U[1],J=Object(x.useMemo)((function(){return _.getAuthTextURL(D)}),[D]);Object(x.useEffect)((function(){var e=[];if(s.errors.length>0)switch(s.errors[0]){case"required":e.push("[user id] is required.");break;case"length":e.push("[user id] set a value between 4 and 20.");break;case"value":e.push("[user id] accepts only half-width alphanumeric characters.");break;case"relation":e.push("[user id] already in use.")}if(f.errors.length>0)switch(f.errors[0]){case"required":e.push("[password] is required.");break;case"length":e.push("[password] set a value between 4 and 20.");break;case"relation":e.push("[password] does not match confirm.")}if(y.errors.length>0&&"length"===y.errors[0])e.push("[password *] set a value between 4 and 20.");R(e)}),[s,f]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Rc,{isVisible:!i,children:Object(C.jsx)(S.a.BorderPanel,{title:"Login information",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Message,{message:"Please, enter User ID/Pass (Confirm)."}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"user id",checkable:s,setCheckable:u,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return je.checkAsciiChars(e)},errorType:"value"},{checker:function(e){return!P.includes(e)},errorType:"relation"}],width:300,isCenter:!0}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"password",isPassword:!0,checkable:f,setCheckable:g,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return e===y.value},errorType:"relation"}],dependency:[y],width:300,isCenter:!0}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"password*",isPassword:!0,checkable:y,setCheckable:k,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return e===f.value},errorType:"relation"}],dependency:[f],width:300,isCenter:!0}),Object(C.jsx)(S.a.InfoFrame,{textRecords:F}),Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Enter",isEnable:0===s.errors.length&&0===f.errors.length&&0===y.errors.length,callback:function(){c(!0)}}]})]})})}),Object(C.jsxs)(Rc,{isVisible:i,children:[Object(C.jsx)(S.a.BorderPanel,{title:"Proof not a robot",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Message,{message:"Please, input the same 6 number as the picture."}),Object(C.jsx)(Lc,{src:J}),Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Change",callback:function(){q(A()),W({value:"",errors:[]})}}]}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"6 numbers",checkable:H,setCheckable:W,width:300,isCenter:!0}),Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Regist",isEnable:0===H.errors.length&&D===H.value,callback:function(){Object(h.a)(Object(j.a)().mark((function e(){var a,r,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","SELECT count(*) as cnt FROM user_tbl where id = '".concat(s,"'"));case 2:return a=e.sent,e.next=5,a.json();case 5:if(r=e.sent,console.log(JSON.stringify(r[0].cnt)),!(r[0].cnt>0)){e.next=12;break}R(["That user id has already been recorded."]),e.next=22;break;case 12:return e.next=14,E.a.getNextUserSeq();case 14:return i=e.sent,console.log(i),e.next=18,E.a.sendQueryRequestToAPI("update","INSERT INTO user_tbl(seq, id, password) VALUES(".concat(i,", '").concat(s.value,"', '").concat(f.value,"')"));case 18:n.system.user={seq:i,id:s.value,password:f.value,email:""},n.cloud={projects:[]},n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"You have successfully created an account!",buttons:[{label:"OK",callback:function(){n.system.dialog=Object(C.jsx)(kc,{}),t(Object(p.a)({},n))}}]}),t(Object(p.a)({},n));case 22:case"end":return e.stop()}}),e)})))()}}]})]})}),Object(C.jsx)(S.a.MessageLink,{message:"Return to login information.",clickAction:function(){c(!1)}})]})]})},Rc=w.b.div(wr||(wr=Object(k.a)(["\n    display: ",";\n"])),(function(e){return e.isVisible?"block":"none"})),Lc=w.b.img(Er||(Er=Object(k.a)(["\n    display: block;\n    text-align: center;\n    margin: 4px auto;\n    background-color: #f7f0f0;\n    border: 1px solid #888888;\n    box-sizing: border-box;\n"]))),Ic=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=Object(x.useState)(!1),r=Object(m.a)(a,2),i=r[0],c=r[1],o=Object(x.useState)({value:"",errors:[]}),l=Object(m.a)(o,2),s=l[0],u=l[1],d=Object(x.useState)({value:"",errors:[]}),b=Object(m.a)(d,2),f=b[0],g=b[1],v=Object(x.useState)({value:"",errors:[]}),O=Object(m.a)(v,2),y=O[0],k=O[1],w=Object(x.useState)([]),T=Object(m.a)(w,2),F=T[0],R=T[1];Object(x.useEffect)((function(){var e=[];if(s.errors.length>0)switch(s.errors[0]){case"required":e.push("[user id] is required.");break;case"length":e.push("[user id] set a value between 4 and 20.");break;case"value":e.push("[user id] accepts only half-width alphanumeric characters.");break;case"relation":e.push("[user id] already in use.")}if(f.errors.length>0)switch(f.errors[0]){case"required":e.push("[password] is required.");break;case"length":e.push("[password] set a value between 4 and 20.")}R(e)}),[s,f]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Pc,{isVisible:!i,children:[Object(C.jsx)(S.a.BorderPanel,{title:"Login information",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Message,{message:"Please, enter User ID/Pass."}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"user id",checkable:s,setCheckable:u,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"},{checker:function(e){return je.checkAsciiChars(e)},errorType:"value"}],width:300,isCenter:!0}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"password",isPassword:!0,checkable:f,setCheckable:g,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,4,20)},errorType:"length"}],width:300,isCenter:!0}),Object(C.jsx)(S.a.InfoFrame,{textRecords:F}),Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Enter",isEnable:0===s.errors.length&&0===f.errors.length,callback:function(){Object(h.a)(Object(j.a)().mark((function e(){var a,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.findUserInfoLogin(s.value,f.value);case 2:if(!((a=e.sent).length>0)){e.next=14;break}return localStorage.setItem(M.SESSTION_KEY_LOGIN,a[0].seq.toString()),n.system.user={seq:a[0].seq,id:a[0].id,password:a[0].password,email:a[0].email},e.next=8,E.a.findUserProjectList(a[0].seq,n.system.isSPMode);case 8:r=e.sent,n.cloud={projects:r.map((function(e){return{source:e.source,type:e.type,name:e.name,seq:e.seq,lastmod:e.lastmod}}))},n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Login successful!"}),t(Object(p.a)({},n)),e.next=15;break;case 14:R(["Incorrect user id or password."]);case 15:case"end":return e.stop()}}),e)})))()}}]})]})}),Object(C.jsx)(S.a.MessageLink,{message:"Forgot your login information?",clickAction:function(){c(!0)}})]}),Object(C.jsxs)(Pc,{isVisible:i,children:[Object(C.jsx)(S.a.BorderPanel,{title:"Email",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Message,{message:"Submit login information to account address."}),Object(C.jsx)(S.a.InputTextFormBak,{placeholder:"email",checkable:y,setCheckable:k,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,4,40)},errorType:"length"},{checker:function(e){return 0===e.length||2===e.split("@").length},errorType:"value"}],width:500,isCenter:!0}),Object(C.jsx)(S.a.ButtonRecord,{buttons:[{label:"Send",isEnable:0===y.errors.length,callback:function(){E.a.findUserInfoFromEmail(y.value).then((function(e){if(e.length>0){var n=e[0],t=E.a.getHashedFromUserSeq(n.seq),a="https://demo-app.licresia.com/#/user?v=".concat(t);E.a.sendQueryRequestToMailAPI({from:"info@licresia.com",to:y.value,subject:"\u3010LiCreSia\u3011support",text:"Your login information is as follows.\n\nURL: ".concat(a,"\nUSR ID: ").concat(n.id)})}}))}}]})]})}),Object(C.jsx)(S.a.MessageLink,{message:"Return to login information.",clickAction:function(){c(!1)}})]})]})},Pc=w.b.div(Sr||(Sr=Object(k.a)(["\n    display: ",";\n"])),(function(e){return e.isVisible?"block":"none"})),Nc=function(){var e=Object(x.useContext)($d),n=(e.store,e.setStore,Object(x.useState)(!1)),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useMemo)((function(){return _.getLogoURL()}),[]);return Object(C.jsxs)(Ac,{width:600,height:500,children:[Object(C.jsx)(Mc,{children:Object(C.jsx)("img",{src:i})}),Object(C.jsxs)(Bc,{children:[Object(C.jsx)(_c,{isActive:!a,onClick:function(){r(!1)},children:"Login"}),Object(C.jsx)(_c,{isActive:a,onClick:function(){r(!0)},children:"Create Account"})]}),a?Object(C.jsx)(Fc,{}):Object(C.jsx)(Ic,{})]})},Ac=w.b.div(Cr||(Cr=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #9e9e9e;\n    border-radius: 4px;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),Mc=w.b.div(Tr||(Tr=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 80px;\n    background-color: #eeeaea;\n    text-align: center;\n"]))),Bc=w.b.div(Fr||(Fr=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 50px;\n    /* background-color: #d1d1d1; */\n    text-align: center;\n"]))),_c=w.b.div(Rr||(Rr=Object(k.a)(["\n    ",";\n    background-color: #bf808075;\n    ","\n    color: white;\n    width: 250px;\n    margin: 10px 10px;\n    text-align: center;\n    &:hover {\n    background-color: #bf8080a2;\n        ","\n    }\n"])),$.a.CSS_LABEL_MIDIUM,(function(e){return e.isActive?Object(w.a)(Lr||(Lr=Object(k.a)(["\n        background-color: #c7a73e;\n    "]))):""}),(function(e){return e.isActive?Object(w.a)(Ir||(Ir=Object(k.a)(["\n            background-color: #c7a73e;\n        "]))):""})),Dc=(w.b.div(Pr||(Pr=Object(k.a)(["\n    display: inline-block;\n    margin: 2px 0 0 0;\n    width: 100%;\n    height: 50px;\n    /* background-color: #e6e3c1; */\n    text-align: left;\n"]))),w.b.div(Nr||(Nr=Object(k.a)(["\n    ",";\n    /* background-color: #80e45832; */\n    color: #bd2d2d;\n    width: 150px;\n    margin: 10px 0 0 5px;\n    text-align: center;\n"])),$.a.CSS_LABEL_MIDIUM),w.b.input(Ar||(Ar=Object(k.a)(["\n    ",";\n    background-color: #f7f09787;\n    width: 300px;\n    margin: 10px 0 0 15px;\n    text-align: center;\n    border: solid 1px #5e5e5e;\n    text-align: left;\n    box-sizing: border-box;\n    border-radius: 4px;\n"])),$.a.CSS_LABEL_MIDIUM),w.b.div(Mr||(Mr=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    padding: 6px 4px 0 0;\n    box-sizing: border-box;\n    width: 100%;\n    height: 50px;\n    background-color: #d1d1d1;\n    text-align: right;\n"]))),w.b.div(Br||(Br=Object(k.a)(["\n    ",";\n    ",";\n    background-color: #5c9253;\n    width: 150px;\n    margin: 10px 5px 0 0;\n    text-align: center;\n    &:hover {\n        background-color: #7eaf75;\n    }\n"])),$.a.CSS_LABEL_MIDIUM,(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE})),function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=n.system.user,r=Object(x.useState)(""),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useMemo)((function(){return _.getLogoURL()}),[]);Object(x.useEffect)((function(){null!=a&&o("@"+a.id)}),[a]);var s=null==a?Object(C.jsxs)(Hc,{onClick:function(){n.system.canDialogClose=!0,n.system.dialog=Object(C.jsx)(Nc,{}),t(Object(p.a)({},n)),console.log(window.location.origin)},children:[Object(C.jsx)("div",{children:Object(C.jsx)(Oc.b,{})}),"Login / Sign up"]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Wc,{isEntry:null!=a,onClick:function(){n.system.dialog=Object(C.jsx)(kc,{}),t(Object(p.a)({},n))},children:c}),Object(C.jsxs)(Hc,{onClick:function(){n.system.user=null,n.cloud=null,localStorage.removeItem(M.SESSTION_KEY_LOGIN),n.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Logout.\nSee you next time!"}),n.system.logoutActions.forEach((function(e){return e()})),t(Object(p.a)({},n))},children:[Object(C.jsx)("div",{children:Object(C.jsx)(Oc.b,{})}),"Logout"]})]});return Object(C.jsxs)(qc,{children:[Object(C.jsx)(Vc,{src:l}),Object(C.jsxs)(zc,{children:[s,Object(C.jsx)(Jc,{children:Object(C.jsx)("div",{children:Object(C.jsx)(yc.d,{})})})]})]})}),qc=w.b.div(_r||(_r=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background: linear-gradient(to bottom, #a6bdc7, #7895b1, #a6bdc7);\n    /* background-color: #c2c2c2; */\n    box-shadow: 0 0 8px 0 #000b3a48;\n"])),44),zc=w.b.div(Dr||(Dr=Object(k.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    position: absolute;\n    right: 30px;\n    /* background-color: #ff00002b; */\n"]))),Uc=w.b.div(qr||(qr=Object(k.a)(["\n    background-color: #c9c7c7;\n    &:hover {\n        background-color: #cf9bae;\n    }\n    transition: background-color 800ms;\n"]))),Hc=Object(w.b)(Uc)(zr||(zr=Object(k.a)(["\n    display: inline-block;\n    /* width: 240px; */\n    padding: 0 30px;\n    margin: 5px 10px 0 0;\n    height: calc(100% - 10px);\n    border-radius: 20px;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #adadad; */\n    border: 1px solid #7e7e7e;\n    box-sizing: border-box;\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    text-align: center;\n    font-size: 22px;\n    font-weight: 600;\n    line-height: 28px;\n    color: #ffffff;\n    vertical-align: top;\n\n    & div {\n        display: inline-block;\n        /* background-color: #0000007d; */\n        margin: 2px 5px 0 0;\n        vertical-align: top;\n    }\n"]))),Wc=w.b.div(Ur||(Ur=Object(k.a)(["\n    display: inline-block;\n    /* width: 240px; */\n    margin: 5px 20px 0 0;\n    height: calc(100% - 10px);\n    text-align: center;\n    font-size: 22px;\n    font-weight: 600;\n    line-height: 28px;\n    color: #9afff292;\n    ","\n    vertical-align: top;\n"])),(function(e){return e.isEntry?"":Object(w.a)(Hr||(Hr=Object(k.a)(["\n        color: #ff393983;\n    "])))})),Jc=Object(w.b)(Uc)(Wr||(Wr=Object(k.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 3px 0 0 0;\n    border-radius: 50%;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #48aa9d; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    /* text-align: center; */\n    font-size: 28px;\n    font-weight: 600;\n    color: #ffffff;\n    & div {\n        display: inline-block;\n        margin: 2px 0 0 5px;\n        /* background-color: #0000007d; */\n        vertical-align: top;\n    }\n"])),38,38),Vc=w.b.img(Jr||(Jr=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 180px;\n    height: 100%;\n    padding: 3px 0;\n    box-sizing: border-box;\n    /* background-color: #bc28289f; */\n"]))),Yc=function(e){var n,t=Object(x.useState)(e.activeNo),a=Object(m.a)(t,2),r=a[0],i=a[1],c=null===(n=e.isLandscape)||void 0===n||n;return Object(x.useEffect)((function(){i(e.activeNo)}),[e.activeNo]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Kc,{isLandscape:c,children:e.tabElements.map((function(n,t){return Object(C.jsx)(Xc,{name:n.name,icon:n.icon,isActive:t==r,isEnable:n.isEnable,selectTab:function(){return function(n){void 0!=e.selectTabIndex?e.selectTabIndex(n):i(n)}(t)}},t)}))}),Object(C.jsx)(Qc,{isLandscape:c,children:e.tabElements.map((function(e,n){return Object(C.jsx)(Gc,{cont:e.cont,isActive:n===r},n)}))})]})},Xc=function(e){return Object(C.jsxs)($c,{isEnable:e.isEnable,isActive:e.isActive,onClick:function(){return e.selectTab()},children:[Object(C.jsx)(eo,{children:e.icon}),Object(C.jsx)(no,{children:e.name})]})},Gc=function(e){return Object(C.jsx)(Zc,{isActive:e.isActive,children:e.cont})},Kc=w.b.div(Vr||(Vr=Object(k.a)(["\n    display: inline-block;\n    ","\n    margin-right: 5px;\n    background-color: #c0d3db;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    border-radius: 10px 0 0 10px;\n    vertical-align: top;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"])),(function(e){return e.isLandscape?Object(w.a)(Yr||(Yr=Object(k.a)(["\n        width: 100px;\n        height: 100%;\n    "]))):Object(w.a)(Xr||(Xr=Object(k.a)(["\n        width: 100%;\n        height: 100px;\n    "])))})),Qc=w.b.div(Gr||(Gr=Object(k.a)(["\n    display: inline-block;\n    background-color: #c0d3db;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    ","\n    border-radius: 0 6px 6px 0;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"])),(function(e){return e.isLandscape?Object(w.a)(Kr||(Kr=Object(k.a)(["\n        width: calc(100% - 105px);\n        height: 100%;\n    "]))):Object(w.a)(Qr||(Qr=Object(k.a)(["\n        height: calc(100% - 105px);\n        width: 100%;\n    "])))})),Zc=w.b.div(Zr||(Zr=Object(k.a)(["\n    /* margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px); */\n    width: 100%;\n    height: 100%;\n    /* background-color: #ece6e6; */\n    ","\n"])),(function(e){return e.isActive?Object(w.a)(ei||(ei=Object(k.a)(["display: inline-block;"]))):Object(w.a)($r||($r=Object(k.a)(["display: none;"])))})),$c=w.b.div(ni||(ni=Object(k.a)(["\n    display: inline-block;\n    width: 90px;\n    height: 90px;\n    margin: 5px 0 0 5px;\n    border-radius: 10px;\n    border: 1px solid #8d9aaa7b;\n    box-sizing: border-box;\n    ","\n    ","\n    transition: background-color 500ms;\n    & *{\n        transition: color 150ms;\n    }\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u3058\u3083\u306a\u3044\u6642\u3060\u3051hover\u8981\u7d20\u3092\u4ed8\u52a0\n    ","\n"])),(function(e){return e.isActive?Object(w.a)(ti||(ti=Object(k.a)(["\n                background-color: #d5dddf;\n                border: 1px solid #949494\n            "]))):Object(w.a)(ai||(ai=Object(k.a)(["\n                background-color: #cacecf;\n                opacity: 0.8;\n            "])))}),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE}),(function(e){return e.isActive?"":Object(w.a)(ri||(ri=Object(k.a)(["\n        &:hover {\n            & *{\n                transition: color 150ms;\n                /* background-color: #e2d6d6; */\n                text-shadow: 1px 2px 22px #f7f7f7ea;\n                color: #a7a7a7;\n            }\n        }\n    "])))})),eo=(Object(w.a)(ii||(ii=Object(k.a)(["\n    text-shadow: 1px 2px 22px #f7f7f7cf;\n    color: #a3a3a3;\n"]))),w.b.div(ci||(ci=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 60px;\n    /* background-color: #df828221; */\n    font-size: 50px;\n    color: #757575;\n    text-align: center;\n    padding-top: 5px;\n    box-sizing: border-box;\n"])))),no=w.b.div(oi||(oi=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #8482df20; */\n    font-size: 20px;\n    font-weight: 600;\n    color: #757575;\n    text-align: center;\n"]))),to=function(){var e=Object(x.useContext)($d),n=e.store,t=(e.setStore,Object(x.useState)({value:"20",errors:[]})),a=Object(m.a)(t,2),r=a[0],i=a[1],c=Object(x.useState)({value:"0",errors:[]}),o=Object(m.a)(c,2),l=o[0],s=o[1],u=Object(x.useState)({value:"0",errors:[]}),d=Object(m.a)(u,2),b=d[0],f=d[1],j=Object(x.useState)([]),h=Object(m.a)(j,2),g=h[0],v=h[1],O=n.storyData,y=O.limitFrame,k=O.limitParticle,w=O.fuseList,E=n.libraryData,T=Object(x.useMemo)((function(){var e=1/Number(r.value)/1;return g.map((function(n,t){var a=n/k;return Object(C.jsx)(io,{rate:100*a,height:100*e},t)}))}),[g]);return Object(C.jsxs)(ao,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"Property",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Divide",jsx:Object(C.jsx)(S.a.TextField,{width:100,isNumber:!0,checkable:r,setCheckable:i,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,5,200)},errorType:"value"}]})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Analysis",isEnable:0===r.errors.length&&w.length>0,callback:function(){var e=w[0].frame,n=1/Number(r.value),t=[],a=0;Ia.run({limitFrame:y,limitParticle:k,guaranteeFrame:e,doIterate:function(e,r){var i=w.find((function(n){return n.frame===e}));if(void 0!=i){var c=Vt.findSeedWrap(E,i.seedId),o=c.data;r.push(new U.Instance(Z.buildLogicProps(r,function(){var e;return null===(e=E.data.logicMng.data.defs.find((function(e){return e.data.name===o.entry})))||void 0===e?void 0:e.data}(),E,function(){var e=Vt.getInnerWrapFixed(c,"interface-mng","seedarg-mng").data.args.map((function(e,n){return{name:e.data.name,value:Number(i.values[n])}})),n=Vt.getInnerWrapFixed(c,"interface-mng","seedsend-mng").data.params.map((function(e){return e.data}));return n.map((function(t){var a=Z.convertParamsToValue(t.name,n,e);if(void 0==a)throw new Error("[".concat(t.name,"]\u304cSend\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5b58\u5728\u3057\u306a\u3044\u3002"));return{name:t.name,value:a}}))}(),[])))}var l=e/y,s=t.length+1;l/n>=s&&t.push(r.length),r.length>a&&(a=r.length)},doEnd:function(e){f(Object(p.a)(Object(p.a)({},b),{},{value:e.toString()}))}}),s(Object(p.a)(Object(p.a)({},b),{},{value:a.toString()})),v(t)}}]})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"Result",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Peak",jsx:Object(C.jsx)(S.a.TextField,{width:150,isNumber:!0,checkable:l,isReadOnly:!0,setCheckable:s})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"End frame",jsx:Object(C.jsx)(S.a.TextField,{width:150,isNumber:!0,checkable:b,isReadOnly:!0,setCheckable:f})}),Object(C.jsx)(ro,{children:T})]})})]})},ao=w.b.div(li||(li=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #d1d1d1;\n    width: 100%;\n    height: 100%;\n"]))),ro=w.b.div(si||(si=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #000000d3;\n    width: calc(100% - 16px);\n    height: 500px;\n    margin: 4px 0 0 8px;\n"]))),io=w.b.div(ui||(ui=Object(k.a)(["\n    display: block;\n    position: relative;\n    /* background-color: #ededed77; */\n    background: linear-gradient(to bottom, #d1ceda, #b3aec2, #d1ceda);\n    width: ","%;\n    height: calc(","% - 1px);\n    margin: 1px 0 0 0;\n    /* height: 20px; */\n"])),(function(e){return e.rate}),(function(e){return e.height})),co=function(e){var n=Object(x.useContext)($d),t=n.store,a=(n.setStore,t.storyData),r=Object(x.useState)({value:"",errors:[]}),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useState)({value:"",errors:[]}),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(x.useState)([]),f=Object(m.a)(b,2),j=f[0],h=f[1],g=e.newFrame,v=e.setNewFrame,O=0===c.errors.length&&0===g.errors.length&&void 0==j.find((function(e){return e.errors.length>0})),y=function(){v(Object(p.a)(Object(p.a)({},g),{},{value:e.curFuse.frame.toString()})),o(Object(p.a)(Object(p.a)({},c),{},{value:e.curFuse.seedId.toString()})),h(e.curFuse.values.map((function(e){return{value:e.toString(),errors:[]}})))};Object(x.useEffect)((function(){void 0!=e.curFuse&&(""===e.curFuse.seedId?(v(Object(p.a)(Object(p.a)({},g),{},{value:""})),o(Object(p.a)(Object(p.a)({},c),{},{value:""})),h([])):y())}),[e.curFuse]);var k=Object(x.useMemo)((function(){if(""===c.value)return Object(C.jsx)(C.Fragment,{});var n=[],t=[],a=[],r=e.seedList.find((function(e){return e.name===c.value}));return void 0!=r&&(n=r.args,t=r.formgrps,a=r.presets),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"Preset",innerJsx:Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Combobox,{width:250,checkable:u,setCheckable:d,headBlank:!0,list:a.map((function(e,n){return{labelText:e.name,value:n.toString()}})),isReadOnly:!e.isModify}),Object(C.jsx)(S.a.ButtonItem,{button:{label:"Apply",isEnable:""!==u.value,callback:function(){var e=Number(u.value);a[e].values.forEach((function(e,n){j[n].value=e.toString()})),h(j.slice())}}})]})})}),Object(C.jsx)(S.a.BorderPanel,{title:"Properties",innerJsx:Object(C.jsx)(C.Fragment,{children:mt.buildPreviewForms(!e.isModify,n,t,j,h)})})]})}),[u,j,e.isModify]);return Object(C.jsxs)(oo,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Cancel",isEnable:e.isModify,callback:function(){e.cancelAction(),d(Object(p.a)(Object(p.a)({},u),{},{value:""})),y()}},{label:e.isModify?"Regist":"Modify",isEnable:!e.isModify||O,callback:function(){e.modifyAction(Number(g.value),c.value,j.map((function(e){return e.value}))),d(Object(p.a)(Object(p.a)({},u),{},{value:""}))}}]}),Object(C.jsx)(S.a.BorderPanel,{title:"Base",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Frame",jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!e.isModify,isNumber:!0,checkable:g,setCheckable:v,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,0,a.limitFrame)},errorType:"value"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Seed",jsx:Object(C.jsx)(S.a.Combobox,{checkable:c,setCheckable:function(n){!function(n){var t=[],a=e.seedList.find((function(e){return e.name===n}));void 0!=a&&(t=a.args),h(t.map((function(e){var n="";return void 0!=e.defval&&(n=e.defval.toString()),{value:n,errors:[]}})))}(n.value),o(Object(p.a)({},n))},list:e.seedList.map((function(e){var n;return{value:e.name,labelText:null!==(n=e.disp)&&void 0!==n?n:e.name}})),headBlank:!0,width:250,isReadOnly:!e.isModify,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})})]})}),k]})},oo=w.b.div(di||(di=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #d1d1d1;\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n"]))),lo=(w.b.div(bi||(bi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #dbebd6;\n    width: 100%;\n    height: 40px;\n"]))),function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useState)({value:"",errors:[]}),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useState)({value:"",errors:[]}),s=Object(m.a)(l,2),u=s[0],d=s[1],b=t.storyData,f=function(){o(Object(p.a)(Object(p.a)({},c),{},{value:b.limitFrame.toString()})),d(Object(p.a)(Object(p.a)({},u),{},{value:b.limitParticle.toString()}))};Object(x.useEffect)((function(){f()}),[]);var j=0===u.errors.length&&0===c.errors.length,h=b.fuseList.map((function(e){return e.frame})).reduce((function(e,n){return e>n?e:n}),0);return Object(C.jsxs)(so,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Cancel",isEnable:e.isModify,callback:function(){f(),e.cancelAction()}},{label:e.isModify?"Regist":"Modify",isEnable:!e.isModify||j,callback:function(){b.limitFrame=Number(c.value),b.limitParticle=Number(u.value),a(Object(p.a)({},t)),e.modifyAction()}}]}),Object(C.jsx)(S.a.BorderPanel,{title:"Limit",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Frame",jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!e.isModify,isNumber:!0,checkable:c,setCheckable:o,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,h,1e3)},errorType:"value"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Particle",jsx:Object(C.jsx)(S.a.TextField,{width:100,isReadOnly:!e.isModify,isNumber:!0,checkable:u,setCheckable:d,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,100,5e3)},errorType:"value"}]})})]})})]})}),so=w.b.div(fi||(fi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #d1d1d1;\n    width: 100%;\n    height: 100%;\n"]))),uo=10,bo=function(e){var n=Object(x.useContext)($d),t=n.store,a=(n.setStore,t.storyData),r=a.fuseList,i=t.fuseCacheList,c=a.limitFrame,o=Object(x.useRef)(null),l=Object(x.useMemo)((function(){if(i.length!==r.length)return[];var n=e.newFrameValue/c;return r.map((function(a,r){var i=100*(e.isModify&&e.focus===r?n:a.frame/c),o=5+13*r,l=t.fuseCacheList.find((function(e){return e.seq===a.seq})).useFrame/c*100;return Object(C.jsxs)("div",{children:[e.isModify&&e.focus===r?Object(C.jsx)(xo,{x:i}):Object(C.jsx)(C.Fragment,{}),Object(C.jsx)(ho,{x:i,y:o,isFocus:r===e.focus}),Object(C.jsx)(mo,{x:i,y:o,sus:l})]},r)}))}),[c,e.focus,r,e.isModify,e.newFrameValue,i]),s=Object(x.useMemo)((function(){for(var e=[],n=0;n<6;n++){var t=n/5,a=Math.floor(c*t);e.push(Object(C.jsx)(jo,{x:100*t,children:a},n))}return e}),[c]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(fo,{children:s}),Object(C.jsx)(po,{ref:o,isModify:e.isModify,onClick:function(n){if(e.isModify&&null!=o){var t=o.current.getBoundingClientRect(),a=(n.clientX-t.x)/t.width,r=Math.floor(c*a);e.setNewFrameValue(r)}},children:l})]})},fo=w.b.div(ji||(ji=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #f2d9341a;\n    /* border-bottom: 3px solid #fff; */\n    box-sizing: border-box;\n    width: calc(100% - 36px);\n    height: ","px;\n    margin: 2px 0 0 18px;\n"])),40),jo=w.b.div(pi||(pi=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    /* background-color: #ffffff31; */\n    width: 30px;\n    height: 20px;\n    left: calc(","% - 18px);\n    bottom: 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n"])),(function(e){return e.x})),po=w.b.div(hi||(hi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #b3d0b937;\n    /* border: 1px solid #ffffff4c; */\n    ","\n    border-radius: 2px;\n    box-sizing: border-box;\n    width: calc(100% - 36px);\n    height: calc(100% - ","px);\n    margin: 2px 0 0 18px;\n"])),(function(e){return e.isModify?Object(w.a)(mi||(mi=Object(k.a)(["\n        background-color: #ff000049;\n    "]))):""}),48),ho=w.b.div(xi||(xi=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    background-color: #ffffff8d;\n    ","\n    /* border: solid 1px #000000; */\n    border-radius: ","px;\n    width: ","px;\n    height: ","px;\n    left: calc(","% - ","px);\n    top: ","px;\n"])),(function(e){return e.isFocus?Object(w.a)(gi||(gi=Object(k.a)(["\n        background-color: #ffb222;\n    "]))):""}),uo,uo,uo,(function(e){return e.x}),5,(function(e){return e.y})),mo=w.b.div(vi||(vi=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    background-color: #bfffb324;\n    /* border: solid 1px #000000; */\n    /* border-radius: ","px; */\n    width: ","%;\n    height: ","px;\n    left: calc(","%);\n    top: calc(","px + ","px);\n"])),uo,(function(e){return e.sus}),5,(function(e){return e.x}),(function(e){return e.y}),2.5),xo=w.b.div(Oi||(Oi=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    background-color: #ff0000f0;\n    left: ","%;\n    top: 0;\n    width: 1px;\n    height: 100%;\n"])),(function(e){return e.x})),go=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=n.storyData,r=a.limitFrame,i=a.limitParticle,c=Object(x.useState)({value:"",errors:[]}),o=Object(m.a)(c,2),l=o[0],s=o[1],u=Object(x.useState)(!1),d=Object(m.a)(u,2),b=d[0],f=d[1],j=Object(x.useState)(!1),h=Object(m.a)(j,2),g=h[0],v=h[1],O=Object(x.useState)(0),y=Object(m.a)(O,2),k=y[0],w=y[1],E=Object(x.useState)(-1),F=Object(m.a)(E,2),R=F[0],L=F[1],I=a.fuseList,P=function(e){a.fuseList=e,t(Object(p.a)({},n))},N=Object(x.useMemo)((function(){return null==n.libraryData?[]:n.libraryData.data.seedMng.data.defs.map((function(e){var n,t=e.data,a=Vt.getInnerWrapFixed(e,"interface-mng","seedarg-mng").data.args.map((function(e){return e.data})),r=Vt.getInnerWrap(e,"interface-mng","formgrp-mng"),i=[];null!=r&&(i=r.data.defines.map((function(e){return e.data})));var c=(null===(n=Vt.getInnerWrap(e,"sample-mng"))||void 0===n?void 0:n.data).samples.map((function(e){return e.data}));return{name:t.name,disp:t.disp,args:a,formgrps:i,presets:c}}))}),[n.libraryData]);Object(x.useEffect)((function(){if(a.fuseList.length>0){var e=[];a.fuseList.forEach((function(n){var t={seq:n.seq,thumbList:[],useFrame:0};B(n,t),e.push(t)})),n.fuseCacheList=e,t(Object(p.a)({},n))}}),[a]);var A=function(){return I.map((function(e){return e.seq})).reduce((function(e,n){return e<n?n:e}),-1)+1},M=Object(x.useMemo)((function(){return I.map((function(e,t){var a=n.fuseCacheList.find((function(n){return n.seq===e.seq})),r=[];return void 0!=a&&(r=a.thumbList.slice(0,3).map((function(e,n){var t=void 0==e?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(_o,{src:e.url});return Object(C.jsxs)(Ao,{children:["-",Object(C.jsx)(Mo,{children:e.name}),Object(C.jsx)(Bo,{children:t})]},n)}))),Object(C.jsx)(To,{isEnable:!b||R===t,children:Object(C.jsx)(Fo,{isFocus:t===R,onClick:function(){L(t)},children:""===e.seedId?Object(C.jsx)(Ro,{children:"Creating..."}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Io,{children:e.frame}),Object(C.jsx)(Po,{children:e.seedId}),Object(C.jsx)(No,{children:r}),e.values.map((function(n,t){var a=N.find((function(n){return n.name===e.seedId})).args[t].name;return Object(C.jsxs)(Ro,{children:[Object(C.jsxs)(Lo,{children:[a,": "]}),n]},t)}))]})})},t)}))}),[I,R,b,n.fuseCacheList]),B=function(e,a){var c=n.libraryData;a.thumbList=[],a.useFrame=0;var o=Vt.getSeedProperties(c,e.seedId);Ia.run({limitFrame:r,limitParticle:i,doIterate:function(n,t){0===n&&Vt.doParticleJob(c,e,t);var r=o.thumbnailList.find((function(e){return e.frame===n}));if(void 0!=r){var i=_.createURL(550,550,(function(e){t.forEach((function(n){n.draw(e)})),e.save()}));a.thumbList.push({name:r.name,url:i})}},doEnd:function(e){a.useFrame=e}}),t(Object(p.a)({},n))},D=0!==I.length&&""===I[I.length-1].seedId;return Object(C.jsxs)(vo,{tabIndex:0,children:[Object(C.jsxs)(Oo,{children:[Object(C.jsx)(yo,{children:Object(C.jsx)(S.a.ButtonRecord,{align:"left",buttons:[{label:"Preview All",isEnable:!b,callback:function(){var e=I[0].frame,a=n.libraryData,c=[],o=0;Ia.run({limitFrame:r,limitParticle:i,guaranteeFrame:e,doIterate:function(e,n){I.some((function(t){if(t.frame===e)Vt.doParticleJob(a,t,n);else if(t.frame>e)return 1})),c.push(_.createURL(550,550,(function(e){n.forEach((function(n){n.draw(e)})),e.save()})))},doEnd:function(e){o=e}}),n.system.dialog=Object(C.jsx)(Xi.Component,{sceens:c,frameCnt:o}),t(Object(p.a)({},n))}}]})}),Object(C.jsx)(yo,{children:Object(C.jsx)(S.a.ButtonRecord,{align:"left",buttons:[{label:"Add",isEnable:!b,callback:function(){var e=A();I.push({seq:e,frame:0,seedId:"",values:[]}),P(I.slice()),L(I.length-1),n.fuseCacheList.push({seq:e,thumbList:[],useFrame:0}),w(2),f(!0)}},{label:"Delete",isEnable:!b&&-1!=R,callback:function(){I.splice(R,1),P(I.slice()),R>0?L(R-1):0===R&&0===I.length&&(L(-1),w(0))}},{label:"Replicate",isEnable:!b&&-1!=R,callback:function(){var e=JSON.parse(JSON.stringify(I[R])),a=A();e.seq=a,I.splice(R,0,e),P(I.slice()),L(R+1);var r={seq:a,thumbList:[],useFrame:0};B(e,r),n.fuseCacheList.push(r),t(Object(p.a)({},n))}},{label:"Preview Solo",isEnable:!b&&-1!=R,callback:function(){var e=n.libraryData,a=[],c=0;Ia.run({limitFrame:r,limitParticle:i,doIterate:function(n,t){var r=I[R];0===n&&Vt.doParticleJob(e,r,t),a.push(_.createURL(550,550,(function(e){t.forEach((function(n){n.draw(e)})),e.save()})))},doEnd:function(e){c=e}}),n.system.dialog=Object(C.jsx)(Xi.Component,{sceens:a,frameCnt:c}),t(Object(p.a)({},n))}}]})}),Object(C.jsxs)(ko,{children:[Object(C.jsx)(wo,{children:Object(C.jsx)(bo,{newFrameValue:Number(l.value),setNewFrameValue:function(e){s(Object(p.a)(Object(p.a)({},l),{},{value:e.toString()}))},isModify:b,focus:R,seedList:N})}),Object(C.jsx)(Eo,{children:M})]})]}),Object(C.jsx)(So,{children:Object(C.jsx)(Co,{children:Object(C.jsx)(T,{tabElements:[{name:"Environment",enable:!b,cont:Object(C.jsx)(lo,{isModify:g,cancelAction:function(){v(!1)},modifyAction:function(){v(!g)}})},{name:"Analysis",enable:!b&&!g,cont:Object(C.jsx)(to,{})},{name:"Property",enable:!g&&-1!=R,cont:Object(C.jsx)(co,{newFrame:l,setNewFrame:s,curFuse:I[R],seedList:N,isModify:b,cancelAction:function(){f(!1),D&&(I.splice(I.length-1,1),P(I.slice()),L(R-1),0===I.length&&w(0))},modifyAction:function(e,t,a){if(b){var r=I[R];r.frame=e,r.seedId=t,r.values=a;var i=r.seq,c=n.fuseCacheList.find((function(e){return e.seq===i}));B(r,c),I.sort((function(e,n){return e.frame-n.frame})),P(I.slice()),L(I.findIndex((function(e){return e.seq===i}))),f(!1)}else f(!0)}})}],selectTabIndex:w,activeNo:k})})})]})},vo=w.b.div(yi||(yi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #1e1c22;\n    width: 100%;\n    height: 100%;\n"]))),Oo=w.b.div(ki||(ki=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #653fd6; */\n    width: calc(100% - ","px);\n    height: 100%;\n    vertical-align: top;\n"])),460),yo=w.b.div(wi||(wi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #d5d4d8;\n    width: 100%;\n    height: ","px;\n"])),40),ko=w.b.div(Ei||(Ei=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    vertical-align: top;\n    width: 100%;\n    height: calc(100% - ","px);\n"])),80),wo=w.b.div(Si||(Si=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #00071b;\n    vertical-align: top;\n    width: 100%;\n    height: ","px;\n"])),240),Eo=w.b.div(Ci||(Ci=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #c551b6; */\n    vertical-align: top;\n    width: 100%;\n    height: calc(100% - ","px);\n    overflow-x: auto;\n    white-space: nowrap;\n"])),240),So=w.b.div(Ti||(Ti=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    background-color: #c1c0c4;\n    width: ","px;\n    height: 100%;\n    vertical-align: top;\n    box-sizing: border-box;\n"])),460),Co=w.b.div(Fi||(Fi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n"]))),To=(w.b.div(Ri||(Ri=Object(k.a)(["\n    display: inline-block;\n    /* position: relative; */\n    background-color: #c0c9c4;\n    width: calc(100% - 4px);\n    height: calc(100% - 4px);\n    margin: 2px 0 0 2px;\n"]))),w.b.div(Li||(Li=Object(k.a)(["\n    display: inline-block;\n    ","\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    background-color: #0012616c;\n    width: 100%;\n    height: 100%;\n"])),(function(e){return e.isVisible?"":Object(w.a)(Ii||(Ii=Object(k.a)(["\n        display: none;\n    "])))})),w.b.div(Pi||(Pi=Object(k.a)(["\n    display: inline-block;\n    width: 630px;\n    /* height: 400px; */\n    background-color: #a3a3a3;\n    /* opacity: 0.9; */\n    overflow: hidden;\n"]))),w.b.div(Ni||(Ni=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #bcb7ca; */\n    background: linear-gradient(to right, #3a383d, #8d8999, #3a383d);\n    vertical-align: top;\n    width: 220px;\n    height: 100%;\n    /* margin-left: 1px; */\n    ","\n    &:hover {\n    background: linear-gradient(to right, #66626b, #b7b2c7, #66626b);\n    }\n"])),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE}))),Fo=w.b.div(Ai||(Ai=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #8997bd29;\n    ","\n    border: 1px solid #2c3577;\n    border-radius: 2px;\n    width: calc(100% - 4px);\n    height: calc(100% - 4px);\n    margin: 2px 0 0 2px;\n    box-sizing: border-box;\n    overflow-y: hidden;\n"])),(function(e){return e.isFocus?Object(w.a)(Mi||(Mi=Object(k.a)(["\n        background-color: #d7eb7d83;\n    "]))):""})),Ro=w.b.div(Bi||(Bi=Object(k.a)(["\n    display: block;\n    position: relative;\n    /* background-color: #bcb7ca; */\n    width: 100%;\n    /* margin-top: 1px; */\n    height: 24px;\n    /* background: linear-gradient(to bottom, #aaaaaa89, #e1e1e18a, #aaaaaa89); */\n    /* font-size: 20px; */\n    font-size: 16px;\n    font-weight: 600;\n    color: #555555;\n    font-style: italic;\n    line-height: 22px;\n    padding: 0 0 0 4px;\n    box-sizing: border-box;\n"]))),Lo=w.b.span(_i||(_i=Object(k.a)(["\n    color: #f00;\n"]))),Io=w.b.div(Di||(Di=Object(k.a)(["\n    display: block;\n    position: relative;\n    /* background-color: #bcb7ca; */\n    width: 100%;\n    height: 35px;\n    font-size: 26px;\n    font-weight: 600;\n    color: #132693;\n    font-style: italic;\n    line-height: 34px;\n    /* padding: 0 0 0 4px; */\n    box-sizing: border-box;\n    text-align: center;\n"]))),Po=w.b.div(qi||(qi=Object(k.a)(["\n    display: block;\n    position: relative;\n    /* background-color: #bcb7ca; */\n    width: 100%;\n    height: 35px;\n    font-size: 26px;\n    font-style: italic;\n    font-weight: 600;\n    color: #ffffff;\n    line-height: 34px;\n    /* padding: 0 0 0 4px; */\n    box-sizing: border-box;\n    text-align: center;\n"]))),No=w.b.div(zi||(zi=Object(k.a)(["\n    display: inline-block;\n    /* background-color: #4b09ff; */\n    width: 100%;\n"]))),Ao=w.b.div(Ui||(Ui=Object(k.a)(["\n    display: inline-block;\n    /* width: ","px;\n    height: ","px; */\n    margin: 0 0 0 5px;\n"])),65,65),Mo=w.b.div(Hi||(Hi=Object(k.a)(["\n    display: block;\n    color: #09056c;\n    font-size: 14px;\n    font-weight: 600;\n    font-style: italic;\n    background-color: #ffffff5e;\n"]))),Bo=w.b.div(Wi||(Wi=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    background-color: #020202df;\n    border: solid 2px #ca0000;\n    box-sizing: border-box;\n"])),65,65),_o=w.b.img(Ji||(Ji=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]))),Do=t(25),qo=t.n(Do);(Yi||(Yi={})).Component=function(e){var n,t=Object(x.useContext)($d),a=t.store,r=t.setStore,i=Object(x.useState)({value:"",errors:[]}),c=Object(m.a)(i,2),o=c[0],l=c[1],s=-1===e.targetSeq,u=null===(n=a.cloud)||void 0===n?void 0:n.projects;Object(x.useEffect)((function(){o.value=-1===e.targetSeq?"":u.find((function(n){return n.seq===e.targetSeq})).name,l(Object(p.a)({},o))}),[]);var d=Object(x.useMemo)((function(){return[u.map((function(e){return e.name}))]}),[]),b=Object(m.a)(d,1)[0],f=[{label:"Cancel",callback:function(){a.system.dialog=null,r(Object(p.a)({},a))}},{label:s?"Create":"Update",isEnable:0===o.errors.length,callback:function(){s?function(){if(void 0==e.type||void 0==e.source)throw qo.a;Wo().then((function(n){var t,i={seq:Number(n+1),name:o.value,type:e.type,source:e.source,lastmod:""};u.push(i),Jo(null===(t=a.system.user)||void 0===t?void 0:t.seq,i).then((function(){a.system.dialog=null,r(Object(p.a)({},a))}))}))}():function(){var n=u.find((function(n){return n.seq===e.targetSeq}));void 0!=n&&Vo(e.targetSeq,o.value).then((function(){n.name=o.value,a.system.dialog=null,r(Object(p.a)({},a))}))}()}}];return Object(C.jsxs)(Yo,{width:500,height:150,children:[Object(C.jsx)(S.a.Message,{message:"Please, input new name!",isCenter:!0,marginTop:10,marginBottom:10}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Name",jsx:Object(C.jsx)(S.a.TextField,{width:250,checkable:o,setCheckable:l,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkStringLength(e,1,16)},errorType:"length"},{checker:function(e){return!b.includes(e)},errorType:"relation"}]})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:f})]})};var zo,Uo,Ho=Yi,Wo=function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var n,t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","SELECT max(seq) m FROM prjcttbl");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t[0].m);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jo=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n,t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("update","INSERT INTO prjcttbl(seq, owner, name, type, source, lastmod) VALUES(".concat(t.seq,", ").concat(n,", '").concat(t.name,"', '").concat(t.type,"', '").concat(t.source,"', datetime ('now'))"));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Vo=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n,t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("update","update prjcttbl set name = '".concat(t,"' where seq = ").concat(n));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Yo=w.b.div(Vi||(Vi=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height}));(Uo||(Uo={})).Component=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useState)({value:"",errors:[]}),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useState)({value:"",errors:[]}),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(x.useState)(null),f=Object(m.a)(b,2),v=f[0],O=f[1],y=Object(x.useState)(null),k=Object(m.a)(y,2),w=k[0],T=k[1],F=function(){var e=null;if(null!=w){var n=w.find((function(e){return e.seq===Number(u.value)}));void 0!=n&&(e=n.rootData)}else null!=v&&(e=v.rootData);return e},R=Object(x.useMemo)((function(){var e="-",n=F();return null!=n&&(e=E.a.getSHA256Hash(JSON.stringify(n))),e}),[u,v]),L=[{label:"Cancel",callback:function(){t.system.dialog=null,a(Object(p.a)({},t))}},{label:"Create",isEnable:""!==c.value&&("story"!==c.value||"-"!==R),callback:function(){"library"===c.value?t.libraryData=Vt.getInitialData():(t.libraryData=F(),t.storyData={limitFrame:300,limitParticle:3e3,fuseList:[]}),t.system.dialog=null,a(Object(p.a)({},t))}}];return Object(C.jsxs)(Zo,{width:500,height:340,children:[Object(C.jsx)(S.a.Message,{message:"Please, select project type!",isCenter:!0,marginTop:10,marginBottom:10}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Type",jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:c,width:178,setCheckable:function(e){o(e),"story"!==e.value&&(T(null),O(null),d({value:"",errors:[]}))},list:g.map((function(e){return{value:e,labelText:e}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.BorderPanel,{title:"Story",isEnable:"story"===c.value,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Source",jsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonItem,{button:{label:"Cloud",width:120,callback:function(){Qo().then((function(e){T(e.map((function(e){return{name:e.name,ownerId:e.owner,seq:e.seq,rootData:JSON.parse(E.a.unZip(e.source))}}))),O(null)}))}}}),Object(C.jsx)(S.a.ButtonItem,{button:{label:"Local",width:120,callback:function(){Object(h.a)(Object(j.a)().mark((function e(){var n,t,a,r,i,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker();case 2:return n=e.sent,t=Object(m.a)(n,1),a=t[0],e.next=7,a.getFile();case 7:return r=e.sent,e.next=10,r.text();case 10:i=e.sent,c=E.a.unZip(i),O({fileName:r.name,rootData:JSON.parse(c)}),T(null),d({value:"",errors:[]});case 15:case"end":return e.stop()}}),e)})))()}}})]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Cloud",isEnabled:null!=w,jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:u,width:278,setCheckable:d,list:(null!==w&&void 0!==w?w:[]).map((function(e){return{value:e.seq.toString(),labelText:e.name}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Local",isEnabled:null!=v,jsx:Object(C.jsx)(S.a.FixedText,{value:null==v?"":v.fileName,isRecordItem:!0})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Hash",jsx:Object(C.jsx)(S.a.FixedText,{value:R,isRecordItem:!0})})]})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:L})]})};var Xo,Go,Ko=Uo,Qo=function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var n,t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","\n        SELECT name, seq, (select id from user_tbl where seq = prj.owner) as owner, source, lastmod\n        FROM prjcttbl prj\n        WHERE type = 'library' and source <> ''\n        ORDER BY lastmod desc\n    ");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zo=w.b.div(zo||(zo=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height}));(Go||(Go={})).Component=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useState)({value:"official",errors:[]}),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useState)({value:"",errors:[]}),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(x.useState)(null),f=Object(m.a)(b,2),j=f[0],h=f[1];Object(x.useEffect)((function(){$l().then((function(e){h(e.map((function(e){return{name:e.name,ownerId:e.owner,seq:e.seq,rootData:JSON.parse(E.a.unZip(e.source))}})))}))}),[]);var g=function(){var e=null;if(null!=j){var n=j.find((function(e){return e.seq===Number(u.value)}));void 0!=n&&(e=n.rootData)}return e},v=Object(x.useMemo)((function(){var e="-",n=g();return null!=n&&(e=E.a.getSHA256Hash(JSON.stringify(n))),e}),[u]),O=[{label:"Cancel",icon:Object(C.jsx)(yc.a,{}),width:120,callback:function(){t.system.dialog=null,a(Object(p.a)({},t))}},{label:"Create",icon:Object(C.jsx)(ia.e,{}),width:120,isEnable:"-"!==v,callback:function(){t.libraryData=g(),t.storyData={limitFrame:300,limitParticle:3e3,fuseList:[]},t.system.dialog=null,a(Object(p.a)({},t)),void 0!=e.extendAction&&e.extendAction()}}];return Object(C.jsxs)(es,{width:500,height:210,children:[Object(C.jsx)(S.a.Message,{message:"Please, select library!",isCenter:!0,marginTop:10,marginBottom:10}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Type",isEnabled:!0,jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:c,width:278,setCheckable:o,list:["official","original"].map((function(e){return{value:e,labelText:e}}))})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Library",isEnabled:null!=j,jsx:Object(C.jsx)(S.a.Combobox,{marginLeft:2,checkable:u,width:278,setCheckable:d,list:(null!==j&&void 0!==j?j:[]).map((function(e){return{value:e.seq.toString(),labelText:e.name}})),headBlank:!0,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})}),Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:O})]})};var $o,el,nl,tl,al,rl,il,cl,ol,ll,sl,ul,dl,bl,fl,jl,pl,hl,ml,xl,gl,vl,Ol,yl,kl,wl,El,Sl,Cl,Tl,Fl,Rl,Ll,Il,Pl,Nl,Al,Ml,Bl,_l,Dl,ql,zl,Ul,Hl,Wl,Jl,Vl,Yl,Xl,Gl,Kl,Ql,Zl=Go,$l=function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var n,t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","\n        SELECT name, seq, (select id from user_tbl where seq = prj.owner) as owner, source, lastmod\n        FROM prjcttbl prj\n        WHERE type = 'library' and source <> ''\n        ORDER BY lastmod desc\n    ");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),es=w.b.div(Xo||(Xo=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),ns=function(){var e,n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useState)(0),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useState)(-1),s=Object(m.a)(l,2),u=s[0],d=s[1],b=null==t.cloud?[]:t.cloud.projects.map((function(e,n){return Object(C.jsxs)(us,{isFocus:n===u,onClick:function(){d(n),console.log(E.a.getHashedFromProjectSeq(e.seq))},onContextMenu:function(){t.system.dialog=Object(C.jsx)(Be.a.Component,{message:E.a.getDirectUrl(e.type,e.seq)}),a(Object(p.a)({},t))},children:[Object(C.jsxs)(bs,{type:e.type,children:["[",e.type,"] "]}),Object(C.jsx)(ds,{children:e.name})]},n)})),f=function(){var e="-";return null!=t.libraryData&&(e="library"),null!=t.storyData&&(e="story"),e},j=null!=t.libraryData,h=null===(e=t.cloud)||void 0===e?void 0:e.projects;Object(x.useEffect)((function(){null==t.cloud&&d(-1)}),[t.cloud]);var g=Object(x.useMemo)((function(){if(null==t.libraryData)return[0,0,0,0,0,0];var e=0,n=function n(t){e++;var a=Vt.getListParamName(t.type);null!=a&&t.data[a].forEach((function(e){return n(e)}))},a=t.libraryData.data;n(a.logicMng),n(a.seedMng);var r=0,i=0,c=0,o=0;a.seedMng.data.defs.forEach((function(e){switch(e.data.permit){case"develop":r++;break;case"private":i++;break;case"release":c++}}));var l=a.logicMng.data;return null!=t.storyData&&(o=t.storyData.fuseList.length),[e,r,i,c,l.defs.length,o]}),[t.libraryData]),v=Object(m.a)(g,6),O=v[0],y=v[1],k=v[2],w=v[3],F=v[4],R=v[5],L=function(e){switch(e){case"library":return t.libraryData;case"story":return{libraryData:t.libraryData,scenarioData:t.storyData}}},I=function(){var e=f(),n=E.a.gZip(JSON.stringify(L(e)));t.system.dialog=Object(C.jsx)(Ho.Component,{targetSeq:-1,type:e,source:n}),a(Object(p.a)({},t))},P=function(){var e=f(),n=h[u],r=E.a.gZip(JSON.stringify(L(e)));ts(n.seq,f(),r).then((function(){n.source=r,n.type=e,t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Update project succesful!"}),a(Object(p.a)({},t))}))},N=function(){switch(f()){case"library":E.a.saveLibraryFile(t,a);break;case"story":E.a.saveScenarioFile(t,a)}},A=Object(C.jsxs)(ls,{isEnable:null!=t.cloud,children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Load",isEnable:!j&&-1!==u&&""!==h[u].source,callback:function(){var e=h[u],n=E.a.unZip(e.source),r=JSON.parse(n);switch(e.type){case"library":t.libraryData=r;break;case"story":var i=r;t.libraryData=i.libraryData,t.storyData=i.scenarioData}t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Clone project succesful!"}),a(Object(p.a)({},t))}},{label:"Rename",width:110,isEnable:-1!=u,callback:function(){t.system.dialog=Object(C.jsx)(Ho.Component,{targetSeq:h[u].seq}),a(Object(p.a)({},t))}},{label:"Delete",width:110,isEnable:-1!=u,callback:function(){as(h[u].seq).then((function(){t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Delete project succesful!"}),h.splice(u,1),d(u-1),a(Object(p.a)({},t))}))}}]}),Object(C.jsx)(ss,{children:b})]}),M=Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Load",width:100,isEnable:!j,callback:function(){E.a.loadFile(t,a)}},{label:"Disconnect",width:160,isEnable:null!=t.fileHandle,callback:function(){t.fileHandle=null,a(Object(p.a)({},t))}}]})});return Object(C.jsxs)(rs,{children:[Object(C.jsx)(is,{children:Object(C.jsx)(S.a.ButtonRecord,{align:"left",buttons:[{label:"New Project",isEnable:!j,callback:function(){t.system.dialog=t.env.isEditLibrary?Object(C.jsx)(Ko.Component,{}):Object(C.jsx)(Zl.Component,{}),a(Object(p.a)({},t))}},{label:"Clear",width:100,isEnable:j,callback:function(){t.libraryData=null,t.storyData=null,a(Object(p.a)({},t))}}]})}),Object(C.jsxs)(cs,{children:[Object(C.jsx)(os,{isEnable:!0,children:Object(C.jsx)(T,{tabElements:[{name:"Cloud",enable:!0,cont:A},{name:"Local",enable:!0,cont:M}],activeNo:c,selectTabIndex:function(e){return o(e)}})}),Object(C.jsxs)(fs,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[function(){switch(c){case 0:return{label:"Upload cloud",width:210,isEnable:j&&null!=t.cloud,callback:I};case 1:return{label:"Save file",width:210,isEnable:j&&null==t.fileHandle,callback:function(){N()}}}throw qo.a}(),function(){switch(c){case 0:return{label:"Overwrite",width:210,isEnable:-1!=u&&j,callback:P};case 1:return{label:"Overwrite",width:210,isEnable:j&&null!=t.fileHandle,callback:function(){N()}}}throw qo.a}()]}),Object(C.jsx)(S.a.BorderPanel,{title:"Project",isEnable:j,innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Type",jsx:Object(C.jsx)(S.a.FixedText,{value:f()})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Develop",jsx:Object(C.jsx)(S.a.FixedText,{value:j?y.toString():"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Private",jsx:Object(C.jsx)(S.a.FixedText,{value:j?k.toString():"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Release",jsx:Object(C.jsx)(S.a.FixedText,{value:j?w.toString():"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Logic",jsx:Object(C.jsx)(S.a.FixedText,{value:j?F.toString():"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Elements",jsx:Object(C.jsx)(S.a.FixedText,{value:j?O.toString():"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Hash",jsx:Object(C.jsx)(S.a.FixedText,{isRecordItem:!0,value:j?E.a.getSHA256Hash(JSON.stringify(t.libraryData)):"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Fuses",jsx:Object(C.jsx)(S.a.FixedText,{value:j?R.toString():"-"})})]})})]})]})]})},ts=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n,t,a){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("update","update prjcttbl set type = '".concat(t,"', source = '").concat(a,"', lastmod = datetime ('now') where seq = ").concat(n,";"));case 2:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),as=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("update","delete from prjcttbl where seq = ".concat(n,";"));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),rs=w.b.div($o||($o=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    background-color: #ebebeb30;\n"]))),is=w.b.div(el||(el=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #d1f5f32f;\n"])),40),cs=w.b.div(nl||(nl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #221a212c;\n"])),40),os=w.b.div(tl||(tl=Object(k.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    /* background-color: #ffe3fb53; */\n    vertical-align: top;\n    ","\n"])),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE})),ls=w.b.div(al||(al=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    ","\n"])),(function(e){return e.isEnable?"":$.a.CSS_BUTTON_DISABLE})),ss=w.b.div(rl||(rl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 38px);\n    box-sizing: border-box;\n    background-color: #f0ecd43d;\n    border: 1px solid #002c8a;\n    border-radius: 4px;\n"]))),us=w.b.div(il||(il=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 40px;\n    box-sizing: border-box;\n    background: linear-gradient(to Bottom, #001e4b01, #001e4b1a);\n    ","\n    border-bottom: 1px solid #002c8a;\n    box-sizing: border-box;\n    font-size: 28px;\n    font-weight: 600;\n    padding-left: 4px;\n    &:hover {\n        background: linear-gradient(to Bottom, #001e4b01, #ffffff26);\n        ","\n    }\n"])),(function(e){return e.isFocus?Object(w.a)(cl||(cl=Object(k.a)(["\n        background: linear-gradient(to Bottom, #001e4b01, #ffda379d);\n    "]))):""}),(function(e){return e.isFocus?Object(w.a)(ol||(ol=Object(k.a)(["\n            background: linear-gradient(to Bottom, #001e4b01, #fcea999d);\n        "]))):""})),ds=w.b.span(ll||(ll=Object(k.a)(["\n    color: #005e08;\n"]))),bs=w.b.span(sl||(sl=Object(k.a)(["\n    color: #0000006d;\n    ","\n    ","\n"])),(function(e){return"library"===e.type?Object(w.a)(ul||(ul=Object(k.a)(["color: #b90000be;"]))):""}),(function(e){return"story"===e.type?Object(w.a)(dl||(dl=Object(k.a)(["color: #003bb9bd;"]))):""})),fs=(w.b.span(bl||(bl=Object(k.a)(["\n    color: #0067977f;\n"]))),w.b.div(fl||(fl=Object(k.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #cbf7cd2d;\n    vertical-align: top;\n"])))),js=function(){var e=Object(x.useContext)($d),n=e.store,t=(e.setStore,function(){var e="-";return null!=n.libraryData&&(e="library"),null!=n.storyData&&(e="scenario"),e}()),a=[];return a.push({name:"Manage",enable:!0,cont:Object(C.jsx)(ns,{})}),a.push({name:"Story",enable:"scenario"===t,cont:"scenario"===t?Object(C.jsx)(go,{}):Object(C.jsx)(C.Fragment,{})}),n.env.isEditLibrary&&a.push({name:"Library",enable:"library"===t,cont:Object(C.jsx)(De,{})}),Object(C.jsx)(ps,{children:Object(C.jsx)(T,{tabElements:a,activeNo:0})})},ps=w.b.div(jl||(jl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),hs=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=Object(x.useState)([]),i=Object(m.a)(r,2),c=i[0],o=i[1];Object(x.useEffect)((function(){ms().then((function(n){var t=[];n.forEach((function(e){var n=e.name,a=e.owner,r=e.lastmod,i=JSON.parse(E.a.unZip(e.source)),c=i.data.seedMng.data.defs.filter((function(e){return"release"===e.data.permit})).map((function(e){var n=e.data,t=Vt.getInnerWrapFixed(e,"interface-mng","seedarg-mng").data.args.length;return{name:n.name,disp:n.disp,argCount:t,master:e}}));t.push({name:n,ownerId:a,lastmod:r,rootData:i,seedList:c,isOpen:!1})})),o(t),e.setLibCnt(t.length)}))}),[]);var l=c.filter((function(e){return e.seedList.length>0})).map((function(e,n){var r=e.isOpen?e.seedList.length:0;return Object(C.jsxs)(gs,{count:r,children:[Object(C.jsxs)(vs,{onClick:function(){},children:[Object(C.jsx)(ks,{children:"".concat(e.ownerId)}),Object(C.jsx)(ws,{onClick:function(){var n;n=JSON.stringify(e.rootData),window.showSaveFilePicker({types:[{accept:{"text/plain":[".plgc"]}}]}).then((function(e){Object(h.a)(Object(j.a)().mark((function r(){var i,c;return Object(j.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.createWritable();case 2:return i=r.sent,c=E.a.gZip(n),r.next=6,i.write(c);case 6:return r.next=8,i.close();case 8:t.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Successfully download!"}),a(Object(p.a)({},t));case 10:case"end":return r.stop()}}),r)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))},children:"".concat(e.name)}),Object(C.jsx)(Es,{children:e.lastmod})]}),Object(C.jsx)(Os,{count:r,children:e.seedList.map((function(n,r){var i=n.name;return void 0!=n.disp&&(i=n.disp),Object(C.jsx)(Cs,{onClick:function(){t.system.dialog=Object(C.jsx)(Va.Component,{master:n.master,rootData:e.rootData,closeButtonAction:function(){t.system.dialog=null,a(Object(p.a)({},t))}}),a(Object(p.a)({},t))},children:Object(C.jsxs)(Ts,{children:[Object(C.jsx)(Fs,{children:i}),Object(C.jsx)(Rs,{children:" [".concat(n.argCount," arguments]")})]})},r)}))}),Object(C.jsx)(ys,{onClick:function(){c[n].isOpen=!c[n].isOpen,o(c.slice())},children:Object(C.jsx)(Ss,{children:" ".concat(e.seedList.length," seeds \u25bc")})})]},n)}));return Object(C.jsx)(xs,{children:l})},ms=function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var n,t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","\n        SELECT name, seq, (select id from user_tbl where seq = prj.owner) as owner, source, lastmod\n        FROM prjcttbl prj\n        WHERE type = 'library' and source <> ''\n        ORDER BY lastmod desc\n    ");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xs=w.b.div(pl||(pl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 8px);\n    height: calc(100% - 48px);\n    margin: 4px 0 0 4px;\n    background-color: #6d7a86;\n    border: 1px solid #e60000;\n    border-radius: 4px;\n    box-sizing: border-box;\n    overflow-y: auto;\n"]))),gs=w.b.div(hl||(hl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    /* border-bottom: 1px solid #262626; */\n    /* background-color: #2e2e2e; */\n    /* background: linear-gradient(to bottom, transparent, #4f4f4f); */\n    margin: 2px 0 0 0;\n    /* padding: 0 0 0 4px; */\n    box-sizing: border-box;\n    /* padding-left: 4px; */\n    /* &:hover {\n        background: linear-gradient(to bottom, transparent, #ffffff5c);\n    } */\n    transition: height 200ms;\n"])),(function(e){return 89+(e.count>0?8:0)+40*e.count})),vs=w.b.div(ml||(ml=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100%);\n    height: 60px;\n    /* background-color: #c9e3df; */\n    background: linear-gradient(to bottom, #b9b9b9, #e2e2e2, #b9b9b9);\n    /* margin: 4px 0 0 4px; */\n    padding: 0 0 0 4px;\n    box-sizing: border-box;\n    /* padding-left: 4px; */\n    /* &:hover {\n        background: linear-gradient(to bottom, transparent, #ffffff);\n    } */\n"]))),Os=w.b.div(xl||(xl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 40px);\n    height: ","px;\n    background-color: #c7c7c7;\n    border-radius: 0 0 2px 2px;\n    margin: 0 0 0 20px;\n    /* padding: 0 0 0 4px; */\n    box-sizing: border-box;\n    text-align: center;\n    transition: height 200ms;\n    overflow-y: hidden;\n"])),(function(e){return(e.count>0?8:0)+40*e.count})),ys=w.b.div(gl||(gl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 60px);\n    /* width: 100%; */\n    height: 25px;\n    margin: 0 0 0 30px;\n    background-color: #b1b1b1;\n    /* border-radius: 0 0 2px 2px; */\n    /* padding: 0 0 0 4px; */\n    box-sizing: border-box;\n    text-align: center;\n    clip-path: polygon(7.5% 100%, 0% 0%, 100% 0%, 92.5% 100%);\n    \n    &:hover {\n        background-color: #c6d1a1;\n    }\n"]))),ks=w.b.div(vl||(vl=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    line-height: 21px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #c9494f;\n    overflow: hidden;\n    white-space: nowrap;\n"]))),ws=w.b.div(Ol||(Ol=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 250px);\n    height: 35px;\n    font-size: 24px;\n    line-height: 36px;\n    font-weight: 600;\n    color: #47417c;\n    /* background-color: #f8f8e8; */\n    overflow: hidden;\n    white-space: nowrap;\n    \n    &:hover {\n        color: #db3333;\n    }\n"]))),Es=w.b.div(yl||(yl=Object(k.a)(["\n    display: inline-block;\n    width: 250px;\n    height: 35px;\n    font-size: 24px;\n    line-height: 36px;\n    font-weight: 600;\n    color: #417c49;\n    /* background-color: #f8f8e8; */\n    overflow: hidden;\n    white-space: nowrap;\n"]))),Ss=w.b.div(kl||(kl=Object(k.a)(["\n    display: inline-block;\n    height: 25px;\n    font-size: 22px;\n    line-height: 22px;\n    font-weight: 600;\n    color: #fffffad6;\n    /* background-color: #f8f8e8; */\n    overflow: hidden;\n    white-space: nowrap;\n"]))),Cs=w.b.div(wl||(wl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    /* background-color: #a3b9c0; */\n    margin: 2px 0 0 0;\n    /* padding-left: 4px; */\n    text-align: left;\n"])),40),Ts=w.b.div(El||(El=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 4px);\n    height: calc(100% - 2px);\n    margin: 1px 0 0 2px;\n    border: 1px solid #0000002e;\n    box-sizing: border-box;\n    font-size: 28px;\n    line-height: 29px;\n    font-weight: 600;\n    padding: 0 0 0 5px;\n    &:hover {\n        background-color: #bbd4dc;\n    }\n"]))),Fs=w.b.span(Sl||(Sl=Object(k.a)(["\n    color: #000f74;\n"]))),Rs=w.b.span(Cl||(Cl=Object(k.a)(["\n    color: #c7020265;\n"]))),Ls=function(){Object(x.useContext)($d).store;var e=Object(x.useState)([]),n=Object(m.a)(e,2),t=n[0],a=n[1];return Object(x.useEffect)((function(){fetch("assets/release_note.json").then((function(e){return e.json()})).then((function(e){a(e.map((function(e,n){var t=e.note.split("\n").map((function(e,n){return Object(C.jsxs)("span",{children:[e,Object(C.jsx)("br",{})]},n)}));return Object(C.jsxs)(Ps,{children:[Object(C.jsxs)(Ns,{children:["v",e.version," (",e.date,")"]}),Object(C.jsx)(As,{children:t})]},n)})))}))}),[]),Object(C.jsx)(Is,{children:t})},Is=w.b.div(Tl||(Tl=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    /* height: calc(100% - ","px); */\n    height: calc(100% - 48px);\n    margin: 4px 0 0 4px;\n    background-color: #d3d3c5;\n    border: 1px solid #e60000;\n    border-radius: 4px;\n    box-sizing: border-box;\n    overflow-y: auto;\n"])),490),Ps=w.b.div(Fl||(Fl=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n    background-color: #bfcace;\n    border: 1px solid #9b9b9b;\n    border-radius: 6px;\n"]))),Ns=w.b.div(Rl||(Rl=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: 20px;\n    font-size: ","px;\n    margin: 2px 0 0 4px;\n    font-weight: 600;\n    /* background-color: #8bdbf8; */\n    color: #494975;\n"])),$.a.FONT_SMALL),As=w.b.div(Ll||(Ll=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    font-size: ","px;\n    margin: 2px 0 0 4px;\n    /* background-color: #dafce4; */\n    color: #754949;\n"])),$.a.FONT_SMALL),Ms=function(){var e=Object(x.useContext)($d),n=(e.store,e.setStore,Object(x.useState)(0)),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useState)(0),c=Object(m.a)(i,2),o=c[0],l=c[1];return Object(x.useEffect)((function(){Bs().then((function(e){r(e)}))}),[]),Object(C.jsxs)(_s,{children:[Object(C.jsxs)(Ds,{children:[Object(C.jsxs)(qs,{children:[a," users have created accounts."]}),Object(C.jsx)(Ls,{})]}),Object(C.jsxs)(zs,{children:[Object(C.jsxs)(qs,{children:[o," libruary have been published."]}),Object(C.jsx)(hs,{setLibCnt:l})]})]})},Bs=function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var n,t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("select","SELECT count(*) cnt FROM user_tbl");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t[0].cnt);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_s=w.b.div(Il||(Il=Object(k.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n    background-color: #ccc;\n"]))),Ds=w.b.div(Pl||(Pl=Object(k.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #bbcac7;\n"]))),qs=w.b.div(Nl||(Nl=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 40px;\n    font-size: 22px;\n    font-weight: 600;\n    color: #cd0202;\n    background-color: #ffffff3d;\n    padding: 0 0 0 10px;\n    box-sizing: border-box;\n"]))),zs=w.b.div(Al||(Al=Object(k.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #bbbfca;\n    vertical-align: top;\n"]))),Us=function(){var e=Object(x.useContext)($d);e.store,e.setStore;return Object(C.jsx)(Hs,{children:Object(C.jsx)(Yc,{tabElements:[{name:"Home",icon:Object(C.jsx)(ia.a,{}),isEnable:!0,cont:Object(C.jsx)(Ms,{})},{name:"Create",icon:Object(C.jsx)(ta.b,{}),isEnable:!0,cont:Object(C.jsx)(js,{})}],activeNo:0})})},Hs=w.b.div(Ml||(Ml=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),15,15,30,30),Ws=function(e){var n=Object(x.useState)(!1),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useState)(),c=Object(m.a)(i,2),o=c[0],l=c[1];Object(x.useEffect)((function(){l(setTimeout((function(){r(!0)}),3e3))}),[]),Object(x.useEffect)((function(){a&&setTimeout((function(){e.remove()}),500)}),[a]);var s=Object(x.useMemo)((function(){return _.getLogoURL()}),[]);return Object(C.jsx)(Js,{isSwitch:a,onClick:function(e){clearTimeout(o),r(!0)},children:Object(C.jsxs)(Vs,{children:[Object(C.jsx)(Xs,{children:Object(C.jsx)(Qs,{src:s})}),Object(C.jsx)(Gs,{children:"Now Loading..."}),Object(C.jsx)(Ks,{children:"Copyright \xa9 2023 Pixel Flare All Rights Reserved."})]})})},Js=w.b.div(Bl||(Bl=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    width: 100%;\n    height: 100%;\n    background-color: #000f3a86;\n    opacity: ",";\n    transition: opacity 500ms;\n"])),(function(e){return e.isSwitch?"0":"1"})),Vs=w.b.div(_l||(_l=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    left: calc(50% - 450px);\n    top: calc(50% - 300px);\n    z-index: 11;\n    width: 900px;\n    height: 600px;\n    background: radial-gradient(#858892, #8e99b6);\n    border-radius: 8px;\n    border: solid 2px #cfcfcf;\n    box-sizing: border-box;\n    transition: opacity 500ms;\n"]))),Ys=Object(w.c)(Dl||(Dl=Object(k.a)(["\n  0%, 100% {\n    opacity: 0.4;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),Xs=w.b.div(ql||(ql=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    margin-top: 10%;\n    width: 100%;\n    /* height: 400px; */\n    /* background-color: #0003b69e; */\n    background: linear-gradient(to bottom, #99999913, #ffffff13,#ffffff13,#ffffff13, #99999913);\n    /* color: white;\n    font-size: 130px;\n    font-weight: 600;\n    text-shadow: 1px 2px 22px #0000003d; */\n    text-align: center;\n    /* line-height: 350px; */\n    animation: "," 3s linear infinite;\n    /* -webkit-box-reflect:below 1px; */\n    -webkit-box-reflect: below 1px -webkit-gradient(\n      linear,left top,left bottom,\n      from(transparent),\n      color-stop(0.6, transparent),\n      to(#f80000));\n    /* & span {\n        color: red;\n        font-size: 160px;\n    } */\n"])),Ys),Gs=w.b.div(zl||(zl=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 80px;\n    width: 100%;\n    left: 20px;\n    color: #ffffff;\n    font-size: 42px;\n    font-weight: 600;\n    text-align: center;\n"]))),Ks=w.b.div(Ul||(Ul=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 5px;\n    left: 20px;\n    color: #ebe7ab;\n    font-size: 22px;\n    font-weight: 600;\n    text-align: left;\n"]))),Qs=w.b.img(Hl||(Hl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 600px;\n    /* height: 200%; */\n    box-sizing: border-box;\n    /* background-color: #bc28289f; */\n"]))),Zs=function(){var e=Object(x.useState)(v),n=Object(m.a)(e,2),t=n[0],a=n[1],r=t.system.isSplash?Object(C.jsx)(Ws,{remove:function(){t.system.isSplash=!1,a(Object(p.a)({},t))}}):Object(C.jsx)(C.Fragment,{});return Object(C.jsxs)(C.Fragment,{children:[r,Object(C.jsxs)($s,{children:[Object(C.jsx)(gc,{}),Object(C.jsx)(Dc,{}),Object(C.jsx)(eu,{children:Object(C.jsx)(Us,{})})]})]})},$s=w.b.div(Wl||(Wl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    min-width: 1200px;\n    min-height: 900px;\n    width: 100%;\n    height: 100%;\n    background-color: #a3c1c7;\n"]))),eu=w.b.div(Jl||(Jl=Object(k.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #c2c2c2; */\n"])),44),nu=function(){return Object(C.jsx)(hs,{setLibCnt:function(){}})},tu=t(46),au=t(40),ru=t(75),iu=t(47),cu=t(122),ou=t(123),lu=t(124),su=t(125),uu=t(126);(Ql||(Ql={})).Component=function(e){var n=function(){return"".concat(E.a.APP_SERVER_DOMAIN,"/#/story?v=").concat(e.hash)},t=Object(x.useState)({value:"I created digital art with the Pixel Flare!\n\n",errors:[]}),a=Object(m.a)(t,2),r=a[0],i=a[1],c=Object(x.useContext)($d);return c.store,c.setStore,c.dispatcher,Object(C.jsxs)(ad,{width:500,height:326,children:[Object(C.jsx)(S.a.Message,{message:"Share your digital art!",isCenter:!0,marginTop:10,marginBottom:10}),Object(C.jsx)(id,{children:Object(C.jsx)(S.a.TextArea,{checkable:r,setCheckable:i})}),Object(C.jsx)(cd,{value:n(),readOnly:!0}),Object(C.jsxs)(rd,{children:[Object(C.jsx)(cu.a,{url:n(),title:r.value,children:Object(C.jsx)(od,{children:Object(C.jsx)(ia.g,{})})}),Object(C.jsx)(ou.a,{url:n(),title:r.value,children:Object(C.jsx)(od,{children:Object(C.jsx)(ia.i,{})})}),Object(C.jsx)(lu.a,{url:n(),title:r.value,children:Object(C.jsx)(od,{children:Object(C.jsx)(ia.h,{})})}),Object(C.jsx)(su.a,{url:n(),title:r.value,children:Object(C.jsx)(od,{children:Object(C.jsx)(ia.f,{})})}),Object(C.jsx)(uu.a,{url:n(),title:r.value,about:"aabb",children:Object(C.jsx)(od,{children:Object(C.jsx)(tu.b,{})})})]})]})};var du,bu,fu,ju,pu,hu,mu,xu,gu,vu,Ou,yu,ku,wu,Eu,Su,Cu,Tu,Fu,Ru,Lu,Iu,Pu,Nu,Au,Mu,Bu,_u,Du,qu,zu,Uu,Hu,Wu,Ju,Vu,Yu,Xu,Gu,Ku,Qu,Zu,$u,ed,nd,td=Ql,ad=w.b.div(Vl||(Vl=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #e7e7e7e2;\n    border: 1px solid #8f8f8f;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),rd=w.b.div(Yl||(Yl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    margin: 8px 0 0 0;\n    text-align: center;\n"]))),id=w.b.div(Xl||(Xl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    border-radius: 4px;\n    width: calc(100% - 8px);\n    height: 120px;\n    margin: 10px 0 0 4px;\n    border: 2px solid #3d3d3d;\n    box-sizing: border-box;\n"]))),cd=w.b.textarea(Gl||(Gl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    border-radius: 4px;\n    width: calc(100% - 8px);\n    height: 60px;\n    margin: 4px 0 0 4px;\n    border: 1px solid #3d3d3d;\n   background-color: #ebf5f557;\n   /* background-color: transparent; */\n   outline: none;\n   font-size: 18px;\n   color: #0041a3;\n   resize: none;\n   box-sizing: border-box;\n"]))),od=w.b.div(Kl||(Kl=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    border-radius: 8px;\n    width: 60px;\n    height: 60px;\n    border: 2px solid #555555;\n    background-color: #f0f0f0e1;\n    box-sizing: border-box;\n    font-size: 50px;\n    color: #666;\n    margin: 0 2px;\n"]))),ld=function(e){var n,t=Object(x.useContext)($d),a=t.store,r=t.setStore,i=t.dispatcher,c=Object(x.useState)(-1),o=Object(m.a)(c,2),l=o[0],s=o[1],u=null!=a.libraryData,d=null===(n=a.cloud)||void 0===n?void 0:n.projects;Object(x.useEffect)((function(){a.system.logoutActions.push((function(){s(-1)}))}),[]);var b=function(){return u?{libraryData:a.libraryData,scenarioData:a.storyData}:null},f=null==a.cloud?[]:a.cloud.projects.map((function(e,n){return Object(C.jsxs)(dd,{isFocus:n===l,onClick:function(){s(n),console.log(E.a.getHashedFromProjectSeq(e.seq))},onContextMenu:function(){a.system.dialog=Object(C.jsx)(Be.a.Component,{message:E.a.getDirectUrl(e.type,e.seq)}),r(Object(p.a)({},a))},children:[Object(C.jsx)(bd,{children:e.name}),Object(C.jsx)(fd,{onClick:function(){a.system.dialog=Object(C.jsx)(td.Component,{hash:E.a.getHashedFromProjectSeq(e.seq)}),a.system.canDialogClose=!0,i.updateStore()},children:Object(C.jsx)(jd,{children:Object(C.jsx)(tu.a,{})})})]},n)}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"left",isIconButton:!0,buttons:[u?{label:"Clear",width:200,icon:Object(C.jsx)(yc.b,{}),callback:function(){a.libraryData=null,a.storyData=null,a.fuseCacheList.length=0,i.updateStore()}}:{label:"New Project",width:200,icon:Object(C.jsx)(aa.a,{}),callback:function(){a.system.dialog=Object(C.jsx)(Zl.Component,{extendAction:function(){e.setEdit(!0)}}),r(Object(p.a)({},a))}}]}),Object(C.jsx)(S.a.BorderPanel,{title:"Project",height:198,isEnable:u,backgroundColor:"#ffffff26",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",isIconButton:!0,buttons:[{label:"Upload",width:210,icon:Object(C.jsx)(au.c,{}),isEnable:u&&null!=a.cloud,callback:function(){var e=E.a.gZip(JSON.stringify(b()));a.system.dialog=Object(C.jsx)(Ho.Component,{targetSeq:-1,type:"story",source:e}),r(Object(p.a)({},a))}},{label:"Overwrite",width:210,icon:Object(C.jsx)(ru.a,{}),isEnable:-1!=l&&u,callback:function(){var e=d[l],n=E.a.gZip(JSON.stringify(b()));sd(e.seq,"story",n).then((function(){e.source=n,e.type="story",a.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Update project succesful!"}),r(Object(p.a)({},a))}))}}]}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Hash",jsx:Object(C.jsx)(S.a.FixedText,{isRecordItem:!0,value:u?E.a.getSHA256Hash(JSON.stringify(a.libraryData)):"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Fuses",jsx:Object(C.jsx)(S.a.FixedText,{value:u?"0":"-"})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Size",jsx:Object(C.jsx)(S.a.FixedText,{value:u?"0":"-"})})]})}),Object(C.jsx)(S.a.BorderPanel,{title:"Cloud",height:434,isEnable:null!=a.cloud,backgroundColor:"#ffffff26",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",isIconButton:!0,buttons:[{label:"Load",width:140,icon:Object(C.jsx)(au.a,{}),isEnable:!u&&-1!==l&&""!==d[l].source,callback:function(){var e=d[l],n=E.a.unZip(e.source),t=JSON.parse(n);switch(e.type){case"library":a.libraryData=t;break;case"story":var i=t;a.libraryData=i.libraryData,a.storyData=i.scenarioData}a.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Clone project succesful!"}),r(Object(p.a)({},a))}},{label:"Rename",width:140,icon:Object(C.jsx)(yc.c,{}),isEnable:-1!=l,callback:function(){a.system.dialog=Object(C.jsx)(Ho.Component,{targetSeq:d[l].seq}),r(Object(p.a)({},a))}},{label:"Delete",width:140,icon:Object(C.jsx)(iu.a,{}),isEnable:-1!=l,callback:function(){ud(d[l].seq).then((function(){a.system.dialog=Object(C.jsx)(Be.a.Component,{message:"Delete project succesful!"}),d.splice(l,1),s(l-1),r(Object(p.a)({},a))}))}}]}),f]})})]})},sd=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n,t,a){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("update","update prjcttbl set type = '".concat(t,"', source = '").concat(a,"', lastmod = datetime ('now') where seq = ").concat(n,";"));case 2:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),ud=function(){var e=Object(h.a)(Object(j.a)().mark((function e(n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.sendQueryRequestToAPI("update","delete from prjcttbl where seq = ".concat(n,";"));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),dd=(w.b.div(du||(du=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 38px);\n    box-sizing: border-box;\n    background-color: #f0ecd43d;\n    border: 1px solid #002c8a;\n    border-radius: 4px;\n"]))),w.b.div(bu||(bu=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 40px;\n    box-sizing: border-box;\n    background: linear-gradient(to Bottom, #001e4b01, #001e4b1a);\n    ","\n    border-bottom: 1px solid #002c8a;\n    box-sizing: border-box;\n    font-size: 28px;\n    font-weight: 600;\n    padding-left: 4px;\n    &:hover {\n        background: linear-gradient(to Bottom, #001e4b01, #ffffff26);\n        ","\n    }\n"])),(function(e){return e.isFocus?Object(w.a)(fu||(fu=Object(k.a)(["\n        background: linear-gradient(to Bottom, #001e4b01, #ffda379d);\n    "]))):""}),(function(e){return e.isFocus?Object(w.a)(ju||(ju=Object(k.a)(["\n            background: linear-gradient(to Bottom, #001e4b01, #fcea999d);\n        "]))):""}))),bd=w.b.span(pu||(pu=Object(k.a)(["\n    color: #005e08;\n"]))),fd=(w.b.span(hu||(hu=Object(k.a)(["\n    color: #0000006d;\n    ","\n    ","\n"])),(function(e){return"library"===e.type?Object(w.a)(mu||(mu=Object(k.a)(["color: #b90000be;"]))):""}),(function(e){return"story"===e.type?Object(w.a)(xu||(xu=Object(k.a)(["color: #003bb9bd;"]))):""})),w.b.span(gu||(gu=Object(k.a)(["\n    color: #0067977f;\n"]))),w.b.span(vu||(vu=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    right: 10px;\n    top: 1px;\n    /* background-color: #00eb6a76; */\n"])))),jd=w.b.div(Ou||(Ou=Object(k.a)(["\n    display: inline-block;\n    width: 30px;\n    height: 30px;\n    /* background-color: #eb000076; */\n    font-size: 20px;\n    color: #757575;\n    text-align: center;\n    box-sizing: border-box;\n"]))),pd=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=n.dispatcher,i=t.storyData,c=i.fuseList,o=(i.limitFrame,i.limitParticle,Object(x.useState)({value:"0",errors:[]})),l=Object(m.a)(o,2),s=l[0],u=l[1],d=Object(x.useState)({value:"",errors:[]}),b=Object(m.a)(d,2),f=b[0],j=b[1],h=Object(x.useState)({value:"",errors:[]}),g=Object(m.a)(h,2),v=g[0],O=g[1],y=Object(x.useState)([]),k=Object(m.a)(y,2),w=k[0],E=k[1],T=0===f.errors.length&&0===s.errors.length&&void 0==w.find((function(e){return e.errors.length>0}));Object(x.useEffect)((function(){-1!==e.focus&&function(){if(-1!==e.focus){var n=c[e.focus];u(Object(p.a)(Object(p.a)({},s),{},{value:n.frame.toString()})),j(Object(p.a)(Object(p.a)({},f),{},{value:n.seedId.toString()})),E(n.values.map((function(e){return{value:e.toString(),errors:[]}})))}}()}),[]);var F=Object(x.useMemo)((function(){if(""===f.value)return Object(C.jsx)(C.Fragment,{});var n=[],t=[],a=[],r=e.seedList.find((function(e){return e.name===f.value}));return void 0!=r&&(n=r.args,t=r.formgrps,a=r.presets),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.BorderPanel,{title:"Preset",innerJsx:Object(C.jsx)(S.a.Record,{jsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Combobox,{width:250,checkable:v,setCheckable:O,headBlank:!0,list:a.map((function(e,n){return{labelText:e.name,value:n.toString()}}))}),Object(C.jsx)(S.a.ButtonItem,{button:{label:"Apply",isEnable:""!==v.value,callback:function(){var e=Number(v.value);a[e].values.forEach((function(e,n){w[n].value=e.toString()})),E(w.slice())}}})]})})}),Object(C.jsx)(S.a.BorderPanel,{title:"Properties",innerJsx:Object(C.jsx)(C.Fragment,{children:mt.buildPreviewForms(!1,n,t,w,E)})})]})}),[v,w]);return Object(C.jsxs)(hd,{width:600,height:872,scrollLock:t.env.scrollLock,children:[Object(C.jsx)(S.a.ButtonRecord,{align:"center",buttons:[{label:"Cancel",icon:Object(C.jsx)(yc.a,{}),width:120,callback:function(){e.cancelAction(),t.system.dialog=null,a(Object(p.a)({},t))}},{label:"Regist",icon:Object(C.jsx)(ia.e,{}),width:120,isEnable:T,callback:function(){var n=null,a=null;if(-1===e.focus)n={seq:c.map((function(e){return e.seq})).reduce((function(e,n){return e<n?n:e}),-1)+1,frame:0,seedId:"",values:[]},c.push(n),a={seq:n.seq,thumbList:[],useFrame:0},t.fuseCacheList.push(a);else{var i=(n=c[e.focus]).seq;a=t.fuseCacheList.find((function(e){return e.seq===i}))}n.frame=Number(s.value),n.seedId=f.value;var o=e.seedList.find((function(e){return e.name===f.value}));n.dispName=null===o||void 0===o?void 0:o.disp,n.values=w.map((function(e){return e.value})),r.story.updateCache(n,a),t.storyData.fuseList=c.slice(),t.system.dialog=null,r.updateStore()}}]}),Object(C.jsx)(S.a.BorderPanel,{title:"Base",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Frame",jsx:Object(C.jsx)(S.a.TextField,{width:100,isNumber:!0,checkable:s,setCheckable:u,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,0,i.limitFrame)},errorType:"value"}]})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Seed",jsx:Object(C.jsx)(S.a.Combobox,{checkable:f,setCheckable:function(n){!function(n){var t=[],a=e.seedList.find((function(e){return e.name===n}));void 0!=a&&(t=a.args),E(t.map((function(e){var n="";return void 0!=e.defval&&(n=e.defval.toString()),{value:n,errors:[]}})))}(n.value),j(Object(p.a)({},n))},list:e.seedList.map((function(e){var n;return{value:e.name,labelText:null!==(n=e.disp)&&void 0!==n?n:e.name}})),headBlank:!0,width:250,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"}]})})]})}),F]})},hd=w.b.div(yu||(yu=Object(k.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #cfd7dae6;\n    border: 1px solid #474747;\n    border-radius: 4px;\n    box-shadow: 10px 15px 15px #0000004b;\n    overflow-y: ",";\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.scrollLock?"hidden":"auto"})),md=t(76),xd=[48,252,150],gd=112,vd=function(e){var n=Object(x.useContext)($d),t=n.store,a=n.setStore,r=n.dispatcher,i=t.storyData,c=(i.limitFrame,i.limitParticle,Object(x.useMemo)((function(){return i.fuseList.map((function(n,c){var o,l=t.fuseCacheList.find((function(e){return e.seq===n.seq})),s=[];void 0!=l&&(s=l.thumbList.slice(0,3).map((function(e,n){var t=void 0==e?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(Pd,{src:e.url});return Object(C.jsx)(Ld,{children:Object(C.jsx)(Id,{children:t})},n)})));var u=e.focus===c;return Object(C.jsxs)(Ed,{isFocus:u,children:[Object(C.jsxs)(Sd,{onClick:function(){e.focus!==c?e.setFocus(c):e.focus===c&&e.setFocus(-1)},children:[Object(C.jsx)(Td,{width:xd[0],children:Object(C.jsx)(Fd,{children:n.frame})}),Object(C.jsx)(Td,{width:xd[1],children:Object(C.jsxs)(Fd,{children:["[",n.seq,"] ",null!==(o=n.dispName)&&void 0!==o?o:n.seedId]})}),Object(C.jsx)(Td,{width:xd[2],children:Object(C.jsx)(Rd,{children:s})})]}),Object(C.jsx)(Cd,{isFocus:u,children:Object(C.jsx)(S.a.ButtonRecord,{align:"left",isIconButton:!0,buttons:[{label:"Edit",icon:Object(C.jsx)(au.b,{}),width:gd,callback:function(){t.system.dialog=Object(C.jsx)(pd,{focus:e.focus,seedList:e.seedList,cancelAction:function(){},modifyAction:function(e,n,t){}}),a(Object(p.a)({},t))}},{label:"Copy",icon:Object(C.jsx)(Oc.a,{}),width:gd,callback:function(){var n=JSON.parse(JSON.stringify(i.fuseList[e.focus]));n.seq=i.fuseList.map((function(e){return e.seq})).reduce((function(e,n){return e<n?n:e}),-1)+1;var r=i.fuseList[e.focus].seq,c=t.fuseCacheList.findIndex((function(e){return e.seq===r})),o=JSON.parse(JSON.stringify(t.fuseCacheList[c]));o.seq=n.seq,i.fuseList.push(n),i.fuseList=i.fuseList.slice(),t.fuseCacheList.push(o),a(Object(p.a)({},t))}},{label:"Delete",icon:Object(C.jsx)(iu.a,{}),width:gd,callback:function(){var n=i.fuseList[e.focus].seq;i.fuseList.splice(e.focus,1);var r=t.fuseCacheList.findIndex((function(e){return e.seq===n}));t.fuseCacheList.splice(r,1),a(Object(p.a)({},t)),e.setFocus(e.focus-1)}},{label:"Test",icon:Object(C.jsx)(md.a,{}),width:gd,callback:function(){r.story.openPreviewSoloDialog(e.focus)}}]})})]},c)}))}),[i.fuseList,e.focus]));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Od,{children:[Object(C.jsx)(yd,{width:xd[0],children:"F"}),Object(C.jsx)(yd,{width:xd[1],children:"[Seq] Seed"}),Object(C.jsx)(yd,{width:xd[2],children:"Snapshot"})]}),Object(C.jsx)(kd,{children:c})]})},Od=w.b.div(ku||(ku=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #0c0c0c44;\n  /* background: linear-gradient(to bottom, #99a5b9, #c3cee4, #99a5b9); */\n  width: calc(100% - 30px);\n  height: 36px;\n  margin: 0 0 0 5px;\n  padding: 3px;\n  box-sizing: border-box;\n  border-radius: 2px 2px 0 0;\n"]))),yd=w.b.div(wu||(wu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #feffff36;\n  width: ","px;\n  height: 30px;\n  /* border: 1px solid #797979; */\n  box-sizing: border-box;\n  border-radius: 2px;\n  font-size: 24px;\n  line-height: 26px;\n  font-weight: 600;\n  font-style: italic;\n  color: #ffffff;\n  text-align: center;\n  margin: 0 2px;\n"])),(function(e){return e.width})),kd=w.b.div(Eu||(Eu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #4d6e854e;\n  width: calc(100% - 10px);\n  height: calc(100% - 36px);\n  margin: 0 0 0 5px;\n  overflow-y: auto;\n"]))),wd=Object(w.c)(Su||(Su=Object(k.a)(["\n  from {\n    background-color: #bb6f6fa0;\n  }\n  to {\n    background-color: #fabebe58;\n  }\n"]))),Ed=w.b.div(Cu||(Cu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #ffffff37;\n  ","\n  width: 100%;\n  margin: 1px 0 0 0;\n  border-radius: 0 0 8px 8px;\n"])),(function(e){return e.isFocus?Object(w.a)(Tu||(Tu=Object(k.a)(["\n      animation: "," 1.2s linear infinite;\n  "])),wd):""})),Sd=w.b.div(Fu||(Fu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* width: calc(100% - 20px); */\n  width: 100%;\n  height: 56px;\n  margin: 1px 0 0 0;\n  padding: 3px;\n  box-sizing: border-box;\n"]))),Cd=w.b.div(Ru||(Ru=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* background-color: #ebffe6f9; */\n  width: 100%;\n  height: ","px;\n  /* height: 0; */\n  margin: 1px 0 0 0;\n  overflow-y: hidden;\n  transition: height 0.1s;\n"])),(function(e){return e.isFocus?"68":"0"})),Td=w.b.div(Lu||(Lu=Object(k.a)(["\n  display: inline-block;\n  width: ","px;\n  margin: 0 2px;\n  /* background-color: #ff0000bb; */\n  vertical-align: middle;\n"])),(function(e){return e.width})),Fd=w.b.div(Iu||(Iu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #ffffffbc;\n  width: 100%;\n  height: 30px;\n  /* border: 1px solid #797979; */\n  box-sizing: border-box;\n  padding-left: 6px;\n  border-radius: 4px;\n  font-size: 24px;\n  line-height: 26px;\n  font-weight: 600;\n  /* font-style: italic; */\n  color: #7c0025;\n  text-align: left;\n  overflow: hidden;\n  white-space: nowrap;\n  /* margin: 8px 2px; */\n"]))),Rd=(w.b.input(Pu||(Pu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* background-color: #628cffb9; */\n  border: 1px solid #242424;\n  border-radius: 2px;\n  width: 46px;\n  height: 20px;\n  /* border: 1px solid #797979; */\n  box-sizing: border-box;\n  ","\n  vertical-align: middle;\n  font-weight: 600;\n  color: #180085;\n"])),(function(e){return e.isEditable?"":$.a.CSS_BUTTON_DISABLE})),w.b.input(Nu||(Nu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #ffd562ba;\n  width: calc(100% - 50px);\n  height: 20px;\n  /* border: 1px solid #797979; */\n  box-sizing: border-box;\n  ","\n  vertical-align: middle;\n"])),(function(e){return e.isEditable?"":$.a.CSS_BUTTON_DISABLE})),w.b.div(Au||(Au=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* background-color: #ffffffbc; */\n  width: 100%;\n  height: 50px;\n  /* border: 1px solid #797979; */\n  box-sizing: border-box;\n  /* border-radius: 4px; */\n  color: #000850;\n  text-align: center;\n  margin: 0 2px;\n  vertical-align: middle;\n  text-align: left;\n"])))),Ld=w.b.div(Mu||(Mu=Object(k.a)(["\n    display: inline-block;\n    /* width: ","px;\n    height: ","px; */\n    /* margin: 0 0 0 2px; */\n"])),50,50),Id=(w.b.div(Bu||(Bu=Object(k.a)(["\n    display: block;\n    color: #09056c;\n    font-size: 14px;\n    font-weight: 600;\n    font-style: italic;\n    background-color: #ffffff5e;\n"]))),w.b.div(_u||(_u=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    background-color: #020202df;\n    border: solid 2px #ca0000;\n    box-sizing: border-box;\n"])),50,50)),Pd=w.b.img(Du||(Du=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]))),Nd=function(e){var n=Object(x.useContext)($d),t=n.store,a=(n.setStore,n.dispatcher),r=t.env.screenRate,i=Object(x.useState)(null),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)(null),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useRef)(null),j=t.storyData,p=j.fuseList,h=j.limitFrame,g=Object(x.useMemo)((function(){if(null==f.current)return Object(C.jsx)(C.Fragment,{});var n=f.current.clientWidth-10,t=f.current.clientHeight-10;return p.map((function(a,r){var i=void 0,c=e.seedList.find((function(e){return e.name===a.seedId})),o=c.args.findIndex((function(e){return e.isPosX}));if(-1!==o){var l=c.args[o],s=l.min,u=l.max-s,d=(Number(a.values[o])-s)/u;i=Math.floor(n*d)}var b=Math.floor(a.frame/h*t);return Object(C.jsx)(Md,{isCurr:r===e.focus,top:b,left:i},r)}))}),[p,e.focus]),v=function(n,t){-1!==e.focus&&(l(t),b(n))},O=function(n,t){if(null!=o&&null!=d&&null!=f.current){var i=f.current.clientHeight-10,c=p[e.focus],s=h/i*2;c.frame+=Math.floor((t-o)/r*s),c.frame<0?c.frame=0:c.frame>h&&(c.frame=h);var u=p[e.focus].seq;p.sort((function(e,n){return e.frame-n.frame}));var m=p[e.focus].seq;u!==m&&e.setFocus(p.findIndex((function(e){return e.seq===u})));var x=e.seedList.find((function(e){return e.name===c.seedId})),g=x.args.findIndex((function(e){return e.isPosX}));if(-1!==g){var v=x.args[g],O=v.min,y=v.max,k=(y-O)/(f.current.clientWidth-10)*2,w=Number(c.values[g]);(w+=Math.floor((n-d)/r*k))<O?w=O:w>y&&(w=y),c.values[g]=w.toString(),b(n)}j.fuseList=p.slice(),l(t),a.updateStore()}},y=function(){l(null),b(null)};return Object(C.jsx)(Ad,{ref:f,isEdit:null!=o,onMouseDown:function(e){v(e.clientX,e.clientY)},onMouseMove:function(e){O(e.clientX,e.clientY)},onMouseUp:y,onMouseLeave:y,onTouchStart:function(e){v(e.touches[0].pageX,e.touches[0].pageY)},onTouchMove:function(e){O(e.touches[0].pageX,e.touches[0].pageY)},onTouchEnd:y,onTouchCancel:y,children:g})},Ad=w.b.div(qu||(qu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  width: ","px;\n  height: calc(100% - 36px);\n  background-color: #5995a790;\n  ","\n  border: 1px solid #5a0000b8;\n  box-sizing: border-box;\n  border-radius: 4px;\n  vertical-align: top;\n  margin-top: 36px;\n"])),107,(function(e){return e.isEdit?Object(w.a)(zu||(zu=Object(k.a)(["\n    background-color: #85b9c990;\n  "]))):""})),Md=w.b.div(Uu||(Uu=Object(k.a)(["\n  display: inline-block;\n  position: absolute;\n  left: 0;\n  top: ","px;\n  width: 100%;\n  ","\n  height: 10px;\n  background-color: #627cc5;\n  border-radius: 4px;\n  border: 1px solid #00000061;\n  box-sizing: border-box;\n  ","\n"])),(function(e){return e.top}),(function(e){return void 0==e.left?"":Object(w.a)(Hu||(Hu=Object(k.a)(["\n      width: 10px;\n      left: ","px;\n  "])),e.left)}),(function(e){return e.isCurr?Object(w.a)(Wu||(Wu=Object(k.a)(["\n      background-color: #e20000;\n      z-index: 10;\n  "]))):""})),Bd=function(){var e=Object(x.useContext)($d),n=e.store,t=e.setStore,a=e.dispatcher,r=Object(x.useState)(-1),i=Object(m.a)(r,2),c=i[0],o=i[1],l=Object(x.useState)(!1),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(x.useState)({value:"",errors:[]}),f=Object(m.a)(b,2),j=f[0],h=f[1],g=Object(x.useState)({value:"30",errors:[]}),v=Object(m.a)(g,2),O=v[0],y=v[1],k=n.storyData,w=k.fuseList,E=(k.limitFrame,k.limitParticle,Object(x.useMemo)((function(){qo()(null!=n.libraryData);var e=n.libraryData.data.seedMng.data.defs,t=[],a=[];return e.forEach((function(e){var n,r=e.data,i=Vt.getInnerWrapFixed(e,"interface-mng","seedarg-mng").data.args.map((function(e){return e.data})),c=Vt.getInnerWrap(e,"interface-mng","formgrp-mng"),o=[];null!=c&&(o=c.data.defines.map((function(e){return e.data})));var l=(null===(n=Vt.getInnerWrap(e,"sample-mng"))||void 0===n?void 0:n.data).samples.map((function(e){return e.data}));t.push({name:r.name,disp:r.disp,args:i,formgrps:o,presets:l}),l.forEach((function(e){var n,t=(null!==(n=r.disp)&&void 0!==n?n:r.name)+": "+e.name;a.push({seedId:r.name,dispName:t,values:e.values})}))})),[t,a]}),[n.libraryData])),T=Object(m.a)(E,2),F=T[0],R=T[1];Object(x.useEffect)((function(){w.length>0&&0===n.fuseCacheList.length&&(w.forEach((function(e){var t={seq:e.seq,thumbList:[],useFrame:0};n.fuseCacheList.push(t),a.story.updateCache(e,t)})),k.fuseList=w.slice(),a.updateStore())}),[w,n.fuseCacheList]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.ButtonRecord,{align:"left",isIconButton:!0,buttons:[{label:"Preview",width:140,icon:Object(C.jsx)(ta.c,{}),isEnable:w.length>0,callback:function(){w.sort((function(e,n){return e.frame-n.frame})),k.fuseList=w.slice(),d(!0)}},{label:"Save",width:140,icon:Object(C.jsx)(aa.b,{}),callback:function(){alert("\u4ed5\u69d8\u691c\u8a0e\u4e2d")}}]}),Object(C.jsx)(S.a.BorderPanel,{title:"fuse",height:660,backgroundColor:"#c9d4dd",innerJsx:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(_d,{children:[Object(C.jsx)(S.a.ButtonItem,{button:{label:"Add",width:100,icon:Object(C.jsx)(ia.d,{}),callback:function(){if(""===j.value)n.system.dialog=Object(C.jsx)(pd,{focus:-1,seedList:F,cancelAction:function(){},modifyAction:function(e,n,t){}}),t(Object(p.a)({},n));else{var e=R[Number(j.value)];console.log(e);var r=e.seedId,i=F.find((function(e){return e.name===r})),c={newSeq:w.map((function(e){return e.seq})).reduce((function(e,n){return e<n?n:e}),-1)+1,newFrame:0===w.length?0:w[w.length-1].frame+Number(O.value)},o={seq:c.newSeq,frame:c.newFrame,seedId:"",values:[]},l={seq:o.seq,thumbList:[],useFrame:0};w.push(o),n.fuseCacheList.push(l),o.seedId=r,o.dispName=i.disp,o.values=e.values.slice(),a.story.updateCache(o,l),n.storyData.fuseList=w.slice(),n.system.dialog=null,a.updateStore()}}}}),Object(C.jsxs)(Dd,{children:[Object(C.jsx)(S.a.FormRecord,{titleLabel:"Preset",jsx:Object(C.jsx)(S.a.Combobox,{checkable:j,setCheckable:h,list:R.map((function(e,n){return{value:n.toString(),labelText:e.dispName}})),headBlank:!0,width:340})}),Object(C.jsx)(S.a.FormRecord,{titleLabel:"Interval",jsx:Object(C.jsx)(S.a.TextField,{width:100,isNumber:!0,checkable:O,setCheckable:y,validates:[{checker:function(e){return je.checkRequired(e)},errorType:"required"},{checker:function(e){return je.checkNumberRange(e,0,k.limitFrame)},errorType:"value"}]})})]})]}),Object(C.jsxs)(qd,{children:[Object(C.jsx)(Nd,{focus:c,setFocus:o,seedList:F}),Object(C.jsx)(zd,{children:Object(C.jsx)(vd,{focus:c,setFocus:o,seedList:F})})]})]})}),u?Object(C.jsx)(Ia.BuildFrame,{closeAction:function(){d(!1)}}):Object(C.jsx)(C.Fragment,{})]})},_d=w.b.div(Ju||(Ju=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: 84px;\n  /* background-color: #be97ca; */\n  vertical-align: top;\n"]))),Dd=w.b.div(Vu||(Vu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  width: 492px;\n  vertical-align: top;\n  /* background-color: #09fc3e; */\n  margin: 0 0 0 4px;\n"]))),qd=w.b.div(Yu||(Yu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: calc(100% - 84px);\n  /* background-color: #c2ca97; */\n"]))),zd=w.b.div(Xu||(Xu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  width: calc(100% - ","px);\n  height: 100%;\n  /* background-color: #f80707; */\n  vertical-align: top;\n"])),107),Ud=function(){var e=Object(x.useContext)($d),n=e.store,t=(e.setStore,Object(x.useState)(!1)),a=Object(m.a)(t,2),r=a[0],i=a[1],c=null!=n.libraryData;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a.Record,{jsx:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S.a.SwitchTwoFace,{label1:"Manage",label2:"Story",rate1:50,rate2:50,isUse:r,width:350,isEditable:c,callback:function(){i(!r)}})})}),Object(C.jsx)(Hd,{children:r?Object(C.jsx)(Bd,{}):Object(C.jsx)(ld,{setEdit:i})})]})},Hd=w.b.div(Gu||(Gu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* background-color: #9fc99e; */\n  width: 100%;\n  height: calc(100% - 40px);\n"]))),Wd=function(e){var n=Object(x.useState)(v),t=Object(m.a)(n,2),a=t[0],r=t[1],i=Object(x.useState)(!0),c=Object(m.a)(i,2),o=c[0],l=c[1],s=Object(x.useState)({adjLeft:0,adjTop:0,rate:1}),u=Object(m.a)(s,2),d=u[0],b=u[1],f=Object(x.useRef)(null),j=a.system.isSplash?Object(C.jsx)(Qd,{children:Object(C.jsx)(Ws,{remove:function(){a.system.isSplash=!1,r(Object(p.a)({},a))}})}):Object(C.jsx)(C.Fragment,{}),h=function(){if(null!=f.current){var e=f.current.getBoundingClientRect(),n=[e.width,e.height],t=n[0],i=n[1],c=Wt.SCREEN_WIDTH,o=Wt.SCREEN_HEIGHT,l=i/o>t/c,s=l?t/c:i/o;b({adjLeft:l?0:t/2-c*s/2,adjTop:l?i/2-o*s/2:0,rate:s}),a.env.screenRate=s,r(Object(p.a)({},a))}};Object(x.useEffect)((function(){a.system.isSPMode=!0,r(Object(p.a)({},a)),h(),console.log(navigator.userAgent),Jd()&&l(0===window.orientation),Jd()?window.addEventListener("orientationchange resize",(function(){alert("change"),h(),l(0===window.orientation)})):window.addEventListener("resize",(function(){h()}))}),[]);var g=Object(C.jsx)(Kd,{children:"Make your smartphone vertical!"});return o&&(g=Object(C.jsxs)(Gd,{children:[j,Object(C.jsx)(gc,{}),Object(C.jsx)(Dc,{}),Object(C.jsx)(Yd,{children:Object(C.jsx)(Yc,{isLandscape:!1,tabElements:[{name:"Home",icon:Object(C.jsx)(ia.a,{}),isEnable:!0,cont:Object(C.jsx)(nu,{})},{name:"Create",icon:Object(C.jsx)(ta.b,{}),isEnable:!0,cont:Object(C.jsx)(Ud,{})}],activeNo:0})})]})),Object(C.jsx)(Vd,{ref:f,children:Object(C.jsx)(Xd,{left:d.adjLeft,top:d.adjTop,rate:d.rate,children:g})})},Jd=function(){return!!navigator.userAgent.match(/iPhone|Android.+Mobile/)},Vd=w.b.div(Ku||(Ku=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  /* width: calc(100% - 10px);\n  height: calc(100% - 10px);\n  background-color: #9eadc9;\n  margin: 5px 0 0 5px; */\n  width: 100%;\n  height: 100%;\n"]))),Yd=w.b.div(Qu||(Qu=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  background-color: #dbdfe7;\n  width: 100%;\n  height: calc(100% - ","px);\n  padding: 5px;\n  box-sizing: border-box;\n"])),44),Xd=w.b.div(Zu||(Zu=Object(k.a)(["\n  display: inline-block;\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform-origin: top left;\n  /* width: 100%;\n  height: 100%; */\n  transform: scale(",");\n"])),(function(e){return e.top}),(function(e){return e.left}),(function(e){return e.rate})),Gd=w.b.div($u||($u=Object(k.a)(["\n  display: inline-block;\n  position: relative;\n  width: ","px;\n  height: ","px;\n  background-color: #929292;\n"])),Wt.SCREEN_WIDTH,Wt.SCREEN_HEIGHT),Kd=w.b.div(ed||(ed=Object(k.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-color: #750000;\n    color: white;\n    font-size: 24px;\n    font-wieght: 600;\n    line-height: 38px;\n    padding-left: 8px;\n    box-sizing: border-box;\n"]))),Qd=w.b.div(nd||(nd=Object(k.a)(["\n    position: absolute;\n    z-index: 10;\n    left: 50%;\n    top: 400px;\n    transform-origin: center;\n    transform: scale(0.7);\n"]))),Zd=Object(D.a)((function e(n,t){var a=this;Object(q.a)(this,e),this.store=void 0,this.setStore=void 0,this.updateStore=function(){a.setStore(Object(p.a)({},a.store))},this.system={},this.story={openPreviewAllDialog:function(){var e=a.store.storyData,n=e.fuseList,t=e.limitFrame,r=e.limitParticle,i=n[0].frame,c=a.store.libraryData,o=[],l=0;Ia.run({limitFrame:t,limitParticle:r,guaranteeFrame:i,doIterate:function(e,t){n.some((function(n){if(n.frame===e)Vt.doParticleJob(c,n,t);else if(n.frame>e)return 1})),o.push(_.createURL(550,550,(function(e){t.forEach((function(n){n.draw(e)})),e.save()})))},doEnd:function(e){l=e}}),a.store.system.dialog=Object(C.jsx)(Xi.Component,{sceens:o,frameCnt:l}),a.updateStore()},openPreviewSoloDialog:function(e){var n=a.store.storyData,t=n.fuseList,r=n.limitFrame,i=n.limitParticle,c=a.store.libraryData,o=[],l=0;Ia.run({limitFrame:r,limitParticle:i,doIterate:function(n,a){var r=t[e];0===n&&Vt.doParticleJob(c,r,a),o.push(_.createURL(550,550,(function(e){a.forEach((function(n){n.draw(e)})),e.save()})))},doEnd:function(e){l=e}}),a.store.system.dialog=Object(C.jsx)(Xi.Component,{sceens:o,frameCnt:l}),a.updateStore()},updateCache:function(e,n){var t=a.store.libraryData,r=a.store.storyData,i=(r.fuseList,r.limitFrame),c=r.limitParticle;n.thumbList=[],n.useFrame=0;var o=Vt.getSeedProperties(t,e.seedId);Ia.run({limitFrame:i,limitParticle:c,doIterate:function(a,r){0===a&&Vt.doParticleJob(t,e,r);var i=o.thumbnailList.find((function(e){return e.frame===a}));if(void 0!=i){var c=_.createURL(550,550,(function(e){r.forEach((function(n){n.draw(e)})),e.save()}));n.thumbList.push({name:i.name,url:c})}},doEnd:function(e){n.useFrame=e}})}},this.store=n,this.setStore=t})),$d=Object(x.createContext)({}),eb=(n.b=function(){return Object(C.jsx)(O.a,{basename:"/pf_apps/v1.8.3",children:Object(C.jsx)(eb,{})})},function(){var e=Object(x.useState)(v),n=Object(m.a)(e,2),t=n[0],a=n[1],r=new Zd(t,a),i=new URLSearchParams(Object(y.f)().search).get("v");if(null==t.system.user){var c=localStorage.getItem(M.SESSTION_KEY_LOGIN);null!=c&&Object(h.a)(Object(j.a)().mark((function e(){var n,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.findUserInfoSeq(c);case 2:if(!((n=e.sent).length>0)){e.next=10;break}return t.system.user={seq:n[0].seq,id:n[0].id,password:n[0].password,email:n[0].email},e.next=7,E.a.findUserProjectList(n[0].seq,t.system.isSPMode);case 7:r=e.sent,t.cloud={projects:r.map((function(e){return{source:e.source,type:e.type,name:e.name,seq:e.seq,lastmod:e.lastmod}}))},a(Object(p.a)({},t));case 10:case"end":return e.stop()}}),e)})))()}return Object(C.jsx)($d.Provider,{value:{store:t,setStore:a,dispatcher:r},children:Object(C.jsxs)(y.c,{children:[Object(C.jsx)(y.a,{path:"/",exact:!0,children:Object(C.jsx)(Zs,{})}),Object(C.jsx)(y.a,{path:"/sp",exact:!0,children:Object(C.jsx)(Wd,{})}),Object(C.jsx)(y.a,{path:"/library",exact:!0,children:Object(C.jsx)(fc,{hashKey:i})}),Object(C.jsx)(y.a,{path:"/story",exact:!0,children:Object(C.jsx)(fc,{hashKey:i})})]})})})},5:function(e,n,t){"use strict";var a,r,i,c,o,l,s,u,d,b,f,j,p,h,m,x,g,v,O,y,k,w,E,S,C,T,F,R,L,I,P,N,A,M,B,_,D,q,z,U,H,W,J,V,Y,X,G,K,Q,Z,$,ee,ne,te,ae,re,ie,ce=t(7),oe=t(6),le=t(3),se=t(4),ue=t(10),de=t(2),be=t(1);(ie=re||(re={})).isCompleteCheck=function(e){var n=!0;return e.forEach((function(e){if(e.errors.length>0)return n=!1,1})),n},ie.InputTextFormBak=function(e){var n,t,a,r,i,c,o,l,s=null!==(n=e.isPassword)&&void 0!==n&&n?"password":"text",u=null!==(t=e.validates)&&void 0!==t?t:[],d=e.checkable.errors,b=(null!==(a=e.dependency)&&void 0!==a?a:[]).map((function(e){return e.value})),f=function(e){var n=[];return u.forEach((function(t){t.checker(e)||n.push(t.errorType)})),n};return Object(de.useEffect)((function(){e.checkable.errors=f(e.checkable.value),e.setCheckable(Object(oe.a)({},e.checkable))}),b),Object(be.jsxs)(fe,{isEnable:null===(r=e.isEnable)||void 0===r||r,isVisible:!0,textAlign:null!==(i=e.isCenter)&&void 0!==i&&i?"center":"left",marginTop:null!==(c=e.marginTop)&&void 0!==c?c:0,marginBottom:null!==(o=e.marginBottom)&&void 0!==o?o:0,children:[void 0==e.titleLabel?Object(be.jsx)(be.Fragment,{}):Object(be.jsx)(je,{children:e.titleLabel}),Object(be.jsx)(he,{type:s,value:e.checkable.value,hasTitle:void 0!=e.titleLabel,width:e.width,isCenter:null!==(l=e.isCenter)&&void 0!==l&&l,placeholder:e.placeholder,onChange:function(n){var t=n.target.value;e.checkable.value=t,e.checkable.errors=f(t),e.setCheckable(Object(oe.a)({},e.checkable))},errorType:0===d.length?void 0:d[0],readOnly:e.isReadOnly})]})},ie.Record=function(e){var n,t,a,r;return Object(be.jsx)(fe,{isEnable:null===(n=e.isEnable)||void 0===n||n,isVisible:!0,textAlign:null!==(t=e.textAlign)&&void 0!==t?t:"left",marginTop:null!==(a=e.marginTop)&&void 0!==a?a:0,marginBottom:null!==(r=e.marginBottom)&&void 0!==r?r:0,children:e.jsx})},ie.FormRecord=function(e){var n,t,a,r,i,c,o=null!==(n=e.labelWidth)&&void 0!==n?n:140;return Object(be.jsxs)(fe,{isEnable:null===(t=e.isEnabled)||void 0===t||t,isVisible:null===(a=e.isVisible)||void 0===a||a,textAlign:null!==(r=e.textAlign)&&void 0!==r?r:"left",marginTop:null!==(i=e.marginTop)&&void 0!==i?i:0,marginBottom:null!==(c=e.marginBottom)&&void 0!==c?c:0,children:[void 0==e.titleLabel?Object(be.jsx)(be.Fragment,{}):Object(be.jsx)(je,{labelWidth:o,children:e.titleLabel}),e.jsx]})},ie.FixedText=function(e){var n=void 0;return e.isRecordItem&&(n="calc(100% - ".concat(156,"px)")),void 0!=e.width&&(n=e.width+"px"),Object(be.jsx)(pe,{width:n,children:e.value})},ie.TextField=function(e){var n,t,a,r,i,c,o,l=Object(de.useState)(!1),s=Object(ce.a)(l,2),u=s[0],d=s[1];Object(de.useEffect)((function(){" "===e.checkable.value&&(e.checkable.value="",e.setCheckable(Object(oe.a)({},e.checkable)))}),[e.checkable.value]);var b=null!==(n=e.isPassword)&&void 0!==n&&n?"password":"text";null!==(t=e.isNumber)&&void 0!==t&&t&&(b="number");var f=null===(a=e.isEnabled)||void 0===a||a,j=null!==(r=e.validates)&&void 0!==r?r:[],p=e.checkable.errors,h=(null!==(i=e.dependency)&&void 0!==i?i:[]).map((function(e){return e.value}));Object(de.useEffect)((function(){e.checkable.errors=function(e){var n=[];return j.forEach((function(t){t.checker(e)||n.push(t.errorType)})),n}(e.checkable.value),f||(e.checkable.errors.length=0),e.setCheckable(Object(oe.a)({},e.checkable))}),h.concat(e.checkable.value));var m=e.checkable.value,x=null!==(c=e.step)&&void 0!==c?c:1;return Object(be.jsx)(me,{type:b,value:m,width:null!==(o=e.width)&&void 0!==o?o:100,placeholder:e.placeholder,step:x,onChange:function(n){e.checkable.value=n.target.value,e.setCheckable(Object(oe.a)({},e.checkable)),"number"===b&&d(Number.isNaN(n.target.valueAsNumber))},onBlur:function(){"number"===b&&(e.checkable.value=u?" ":Number(m).toString(),e.setCheckable(Object(oe.a)({},e.checkable)))},errorType:f&&0!==p.length?p[0]:void 0,readOnly:e.isReadOnly,marginLeft:e.marginLeft})},ie.Combobox=function(e){var n,t,a,r,i,c=null!==(n=e.validates)&&void 0!==n?n:[],o=e.checkable.errors,l=(null!==(t=e.dependency)&&void 0!==t?t:[]).map((function(e){return e.value})),s=null!==(a=e.headBlank)&&void 0!==a&&a,u=e.list.slice();s&&u.unshift({value:"",labelText:""});var d=null===(r=e.isEnabled)||void 0===r||r;return Object(de.useEffect)((function(){e.checkable.errors=function(e){var n=[];return c.forEach((function(t){t.checker(e)||n.push(t.errorType)})),n}(e.checkable.value),d||(e.checkable.errors.length=0),e.setCheckable(Object(oe.a)({},e.checkable))}),l.concat(e.checkable.value)),Object(be.jsx)(xe,{value:e.checkable.value,width:null!==(i=e.width)&&void 0!==i?i:100,placeholder:e.placeholder,onChange:function(n){var t=n.target.value;e.checkable.value=t,e.setCheckable(Object(oe.a)({},e.checkable))},errorType:d&&0!==o.length?o[0]:void 0,readOnly:e.isReadOnly,marginLeft:e.marginLeft,children:u.map((function(e,n){var t,a;return Object(be.jsx)(ge,{value:e.value,disabled:null!==(t=e.isDisabled)&&void 0!==t&&t,isDisabled:null!==(a=e.isDisabled)&&void 0!==a&&a,children:e.labelText},n)}))})},ie.TextArea=function(e){var n,t;Object(de.useEffect)((function(){" "===e.checkable.value&&(e.checkable.value="",e.setCheckable(Object(oe.a)({},e.checkable)))}),[e.checkable.value]);var a=null!==(n=e.validates)&&void 0!==n?n:[],r=(e.checkable.errors,(null!==(t=e.dependency)&&void 0!==t?t:[]).map((function(e){return e.value})));Object(de.useEffect)((function(){e.checkable.errors=function(e){var n=[];return a.forEach((function(t){t.checker(e)||n.push(t.errorType)})),n}(e.checkable.value),e.setCheckable(Object(oe.a)({},e.checkable))}),r.concat(e.checkable.value));var i=e.checkable.value;return e.isEnabled,Object(be.jsx)(Fe,{value:i,placeholder:e.placeholder,onChange:function(n){e.checkable.value=n.target.value,e.setCheckable(Object(oe.a)({},e.checkable))},readOnly:e.isReadOnly})},ie.ButtonRecord=function(e){var n,t,a,r,i=null!==(n=e.align)&&void 0!==n?n:"right",c=null!==(t=e.interval)&&void 0!==t?t:4;return Object(be.jsx)(fe,{isEnable:!0,isVisible:!0,textAlign:i,marginTop:null!==(a=e.marginTop)&&void 0!==a?a:0,marginBottom:null!==(r=e.marginBottom)&&void 0!==r?r:0,height:e.isIconButton?68:40,children:e.buttons.map((function(e,n){var t,a;return void 0==e.icon?Object(be.jsx)(Oe,{isCenter:"center"===i,isEnable:null===(t=e.isEnable)||void 0===t||t,width:e.width,interval:c,onClick:e.callback,children:e.label},n):Object(be.jsxs)(ye,{isCenter:"center"===i,isEnable:null===(a=e.isEnable)||void 0===a||a,width:e.width,interval:c,onClick:e.callback,children:[e.icon,Object(be.jsx)("br",{}),e.label]},n)}))})},ie.ButtonItem=function(e){var n,t,a,r=e.button,i=null!==(n=r.interval)&&void 0!==n?n:4;return void 0==r.icon?Object(be.jsx)(Oe,{isCenter:!1,isEnable:null===(t=r.isEnable)||void 0===t||t,width:r.width,interval:i,onClick:r.callback,children:r.label}):Object(be.jsxs)(ye,{isCenter:!1,isEnable:null===(a=r.isEnable)||void 0===a||a,width:r.width,interval:i,onClick:r.callback,children:[r.icon,Object(be.jsx)("br",{}),r.label]})},ie.Message=function(e){var n,t,a,r;return Object(be.jsx)(fe,{isEnable:!0,isVisible:!0,textAlign:null!==(n=e.isCenter)&&void 0!==n&&n?"center":"left",marginTop:null!==(t=e.marginTop)&&void 0!==t?t:0,marginBottom:null!==(a=e.marginBottom)&&void 0!==a?a:0,children:Object(be.jsx)(ve,{isCenter:null!==(r=e.isCenter)&&void 0!==r&&r,children:e.message})})},ie.MessageLink=function(e){var n,t,a,r;return Object(be.jsx)(fe,{isEnable:!0,isVisible:!0,textAlign:null!==(n=e.isCenter)&&void 0!==n&&n?"center":"left",marginTop:null!==(t=e.marginTop)&&void 0!==t?t:0,marginBottom:null!==(a=e.marginBottom)&&void 0!==a?a:0,children:Object(be.jsx)(ve,{isLink:!0,onClick:e.clickAction,isCenter:null!==(r=e.isCenter)&&void 0!==r&&r,children:e.message})})},ie.BorderPanel=function(e){var n,t,a,r=null!==(n=e.isDisable)&&void 0!==n&&n,i=null===(t=e.isEnable)||void 0===t||t,c=null!==(a=e.backgroundColor)&&void 0!==a?a:"#cedadd";return Object(be.jsxs)(be.Fragment,{children:[r?Object(be.jsx)(be.Fragment,{}):Object(be.jsx)(Se,{children:e.title}),Object(be.jsx)(Ce,{isEnable:i,isDisable:r,height:e.height,backgroundColor:c,children:e.innerJsx})]})},ie.InfoFrame=function(e){var n,t=null!==(n=e.height)&&void 0!==n?n:70;return Object(be.jsx)(be.Fragment,{children:Object(be.jsx)(Te,{height:t,color:"#1a9900",children:e.textRecords.map((function(e,n){return Object(be.jsxs)("span",{children:[e,Object(be.jsx)("br",{})]},n)}))})})},ie.Switch=function(e){var n,t,a=null!==(n=e.isRelation)&&void 0!==n&&n,r=a&&e.isUse?function(){}:e.callback;return Object(be.jsx)(ke,{isRelation:a,isUse:e.isUse,isEnable:null===(t=e.isEnable)||void 0===t||t,width:e.width,onClick:r,children:e.label})},ie.SwitchTwoFace=function(e){var n,t,a=null===(n=e.isEnable)||void 0===n||n,r=null===(t=e.isEditable)||void 0===t||t;return Object(be.jsxs)(we,{isEnable:a,isEditable:r,width:e.width,onClick:e.callback,children:[Object(be.jsx)(Ee,{isUse:a&&!e.isUse,rate:e.rate1,isLeft:!0,isEditable:r,children:e.label1}),Object(be.jsx)(Ee,{isUse:a&&e.isUse,rate:e.rate2,isLeft:!1,isEditable:r,children:e.label2})]})},ie.checkItems=function(e){return void 0==e.find((function(e){return e.errors.length>0}))},n.a=re;var fe=se.b.div(a||(a=Object(le.a)(["\n    display: inline-block;\n    ","\n    width: 100%;\n    height: ","px;\n    margin-top: ","px;\n    margin-bottom: ","px;\n    /* background-color: #b3b4c4; */\n    /* border: 1px solid #000; */\n    ","\n    text-align: ",";\n"])),(function(e){return e.isVisible?"":Object(se.a)(r||(r=Object(le.a)(["\n        display: none;\n    "])))}),(function(e){var n;return null!==(n=e.height)&&void 0!==n?n:"40"}),(function(e){return e.marginTop}),(function(e){return e.marginBottom}),(function(e){return e.isEnable?"":ue.a.CSS_BUTTON_DISABLE}),(function(e){return e.textAlign})),je=se.b.div(i||(i=Object(le.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: ","px;\n    ","\n    color: #585858;\n    border: solid 1px #7a7a7abf;\n    box-sizing: border-box;\n    /* background-color: #85a2c5; */\n    background: linear-gradient(to bottom, #b4c0c7fa, #d8d8d8, #b4c0c7fa);\n    border-radius: 4px;\n    text-align: center;\n    vertical-align: top;\n    margin: 5px 4px 0 4px;\n"])),(function(e){return e.labelWidth}),ue.a.CSS_LABEL_MIDIUM),pe=se.b.div(c||(c=Object(le.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    ","\n    color: #0c0e86;\n    box-sizing: border-box;\n    background-color: #85a2c51a;\n    text-align: left;\n    vertical-align: top;\n    margin: 5px 4px 0 4px;\n    overflow-x: hidden;\n    ","\n"])),ue.a.CSS_LABEL_MIDIUM,(function(e){return void 0==e.width?"":Object(se.a)(o||(o=Object(le.a)(["\n        width: ",";\n    "])),e.width)})),he=se.b.input(l||(l=Object(le.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    ","\n    ","\n    margin-top: 2px;\n    font-size: 24px;\n    line-height: 32px;\n    /* font-weight: 600; */\n    color: #3d3d3d;\n    border: solid 1px #959595;\n    border-radius: 4px;\n    padding: 0 5px;\n    box-sizing: border-box;\n    background-color: ",";\n    text-align: left;\n    vertical-align: top;\n    user-select: text;\n    /* "," */\n    ","\n    ::placeholder {\n        color: #00000050;\n        font-style: italic;\n    }\n"])),(function(e){return e.hasTitle?Object(se.a)(u||(u=Object(le.a)(["\n        width: calc(100% - 152px);\n    "]))):Object(se.a)(s||(s=Object(le.a)(["\n    "])))}),(function(e){return void 0==e.width?"":Object(se.a)(d||(d=Object(le.a)(["\n        width: ","px;\n    "])),e.width)}),(function(e){if(void 0==e.errorType)return"#ececec";switch(e.errorType){case"required":return"#dbd7b3";case"length":return"#dbb3b3";case"value":return"#b3b3db";case"relation":return"#b3dbb3"}}),(function(e){return e.isCenter?Object(se.a)(f||(f=Object(le.a)([""]))):Object(se.a)(b||(b=Object(le.a)(["\n        margin-left: 4px;\n    "])))}),(function(e){return e.readOnly?Object(se.a)(j||(j=Object(le.a)(["\n        color: #020075;\n        /* border: none; */\n        outline: none;\n        background-color: transparent;\n    "]))):""})),me=se.b.input(p||(p=Object(le.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: ","px;\n    margin-top: 2px;\n    margin-left: ","px;\n    font-size: 24px;\n    line-height: 32px;\n    /* font-weight: 600; */\n    color: #3d3d3d;\n    border: solid 1px #959595;\n    border-radius: 4px;\n    padding: 0 5px;\n    box-sizing: border-box;\n    background-color: ",";\n    text-align: left;\n    vertical-align: top;\n    user-select: text;\n    ","\n    ::placeholder {\n        color: #00000050;\n        font-style: italic;\n    }\n"])),(function(e){return e.width}),(function(e){var n;return null!==(n=e.marginLeft)&&void 0!==n?n:0}),(function(e){if(void 0==e.errorType)return"#ececec";switch(e.errorType){case"required":return"#dbd7b3";case"length":return"#dbb3b3";case"value":return"#b3b3db";case"relation":return"#b3dbb3"}}),(function(e){return e.readOnly?Object(se.a)(h||(h=Object(le.a)(["\n        color: #020075;\n        /* border: none; */\n        outline: none;\n        background-color: transparent;\n    "]))):""})),xe=se.b.select(m||(m=Object(le.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: ","px;\n    margin-top: 2px;\n    margin-left: ","px;\n    font-size: 24px;\n    line-height: 32px;\n    /* font-weight: 600; */\n    color: #3d3d3d;\n    border: solid 1px #959595;\n    border-radius: 4px;\n    padding: 0 5px;\n    box-sizing: border-box;\n    background-color: ",";\n    text-align: left;\n    vertical-align: top;\n    user-select: text;\n    ","\n    ::placeholder {\n        color: #00000050;\n        font-style: italic;\n    }\n"])),(function(e){return e.width}),(function(e){var n;return null!==(n=e.marginLeft)&&void 0!==n?n:0}),(function(e){if(void 0==e.errorType)return"#ececec";switch(e.errorType){case"required":return"#dbd7b3";case"length":return"#dbb3b3";case"value":return"#b3b3db";case"relation":return"#b3dbb3"}}),(function(e){return e.readOnly?Object(se.a)(x||(x=Object(le.a)(["\n        color: #020075;\n        /* border: none; */\n        outline: none;\n        background-color: transparent;\n        pointer-events: none;\n    "]))):""})),ge=se.b.option(g||(g=Object(le.a)(["\n    ","\n"])),(function(e){return e.isDisabled?Object(se.a)(v||(v=Object(le.a)(["\n        color: #0000004b;\n    "]))):""})),ve=se.b.div(O||(O=Object(le.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    margin-top: 2px;\n    font-size: ","px;\n    line-height: 32px;\n    /* font-weight: 600; */\n    color: #002c52;\n    border-radius: 4px;\n    padding: 0 5px;\n    box-sizing: border-box;\n    /* background-color: #d37878; */\n    text-align: left;\n    vertical-align: top;\n    user-select: text;\n    ","\n    ","\n"])),ue.a.FONT_MIDIUM,(function(e){return e.isCenter?Object(se.a)(k||(k=Object(le.a)([""]))):Object(se.a)(y||(y=Object(le.a)(["\n        margin-left: 4px;\n    "])))}),(function(e){return e.isLink?Object(se.a)(w||(w=Object(le.a)(["\n        color: #0459a3;\n        user-select: none;\n        text-decoration: underline;\n        &:hover {\n            color: #68a4d8;\n        }\n    "]))):""})),Oe=(se.b.div(E||(E=Object(le.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 40px;\n    /* background-color: #888888; */\n    box-sizing: border-box;\n    text-align: left;\n    white-space: nowrap;\n"]))),se.b.div(S||(S=Object(le.a)(["\n    ","\n    ","\n    /* line-height: 25px; */\n    box-sizing: border-box;\n    /* background-color: #a8a8a8; */\n    background: linear-gradient(to bottom, #c0ced6, #ebebeb, #c0ced6);\n    border: 1px solid #829bad;\n    color: #515151;\n    border-radius: 4px;\n    margin: 5px 0 0 ","px;\n    ","\n    ","\n    &:hover {\n        /* background-color: #98bfc2; */\n        /* background: linear-gradient(to bottom, #989898, #b4b4b4, #989898); */\n        opacity: 0.7;\n    }\n"])),ue.a.CSS_LABEL_MIDIUM,(function(e){return void 0==e.width?Object(se.a)(C||(C=Object(le.a)(["\n        padding: 0 40px;\n    "]))):Object(se.a)(T||(T=Object(le.a)(["\n        width: ","px;\n    "])),e.width)}),(function(e){return e.interval}),(function(e){return e.isCenter?Object(se.a)(R||(R=Object(le.a)([""]))):Object(se.a)(F||(F=Object(le.a)(["\n        margin-left: ","px;\n    "])),(function(e){return e.interval}))}),(function(e){return e.isEnable?"":ue.a.CSS_BUTTON_DISABLE}))),ye=se.b.div(L||(L=Object(le.a)(["\n    ","\n    ","\n    height: 58px;\n    padding: 4px 0 0 0;\n    /* line-height: 25px; */\n    box-sizing: border-box;\n    /* background-color: #a8a8a8; */\n    background: linear-gradient(to bottom, #c0ced6, #ebebeb, #c0ced6);\n    border: 1px solid #829bad;\n    color: #515151;\n    border-radius: 4px;\n    margin: 5px 0 0 ","px;\n    ","\n    ","\n    &:hover {\n        /* background-color: #98bfc2; */\n        /* background: linear-gradient(to bottom, #989898, #b4b4b4, #989898); */\n        opacity: 0.7;\n    }\n"])),ue.a.CSS_LABEL_MIDIUM,(function(e){return void 0==e.width?Object(se.a)(I||(I=Object(le.a)(["\n        padding: 0 40px;\n    "]))):Object(se.a)(P||(P=Object(le.a)(["\n        width: ","px;\n    "])),e.width)}),(function(e){return e.interval}),(function(e){return e.isCenter?Object(se.a)(A||(A=Object(le.a)([""]))):Object(se.a)(N||(N=Object(le.a)(["\n        margin-left: ","px;\n    "])),(function(e){return e.interval}))}),(function(e){return e.isEnable?"":ue.a.CSS_BUTTON_DISABLE})),ke=se.b.div(M||(M=Object(le.a)(["\n    ","\n    ","\n    /* line-height: 25px; */\n    box-sizing: border-box;\n    background-color: #a8a8a8;\n    color: #515151;\n    border: 1px solid #747474;\n    ","\n    border-radius: 4px;\n    margin: 5px 0 0 4px;\n    ","\n    &:hover {\n        ","\n    }\n"])),ue.a.CSS_LABEL_MIDIUM,(function(e){return void 0==e.width?Object(se.a)(B||(B=Object(le.a)(["\n        padding: 0 40px;\n    "]))):Object(se.a)(_||(_=Object(le.a)(["\n        width: ","px;\n    "])),e.width)}),(function(e){return e.isRelation?Object(se.a)(q||(q=Object(le.a)(["\n        background-color: ",";\n        color: ",";\n    "])),(function(e){return e.isUse?"#d898b3":"#ddc1d979"}),(function(e){return e.isUse?"#9c2626":"#515151"})):Object(se.a)(D||(D=Object(le.a)(["\n        background-color: ",";\n    "])),(function(e){return e.isUse?"#e4f67e":"#e7e7e779"}))}),(function(e){return e.isEnable?"":ue.a.CSS_BUTTON_DISABLE}),(function(e){return e.isRelation?Object(se.a)(U||(U=Object(le.a)(["\n            background-color: ",";\n            color: ",";\n        "])),(function(e){return e.isUse?"#d898b3":"#d3a1cb79"}),(function(e){return e.isUse?"#9c2626":"#515151"})):Object(se.a)(z||(z=Object(le.a)(["\n            background-color: ",";\n        "])),(function(e){return e.isUse?"#b5be7f":"#edefb286"}))})),we=se.b.div(H||(H=Object(le.a)(["\n    width: ","px;\n    ","\n    margin: 5px 0 0 4px;\n    ","\n    ","\n    &:hover {\n        /* opacity: 0.7; */\n    }\n"])),(function(e){return e.width}),ue.a.CSS_LABEL_MIDIUM,(function(e){return e.isEditable?"":Object(se.a)(W||(W=Object(le.a)(["    \n        pointer-events: none;\n    "])))}),(function(e){return e.isEnable?"":ue.a.CSS_BUTTON_DISABLE})),Ee=se.b.div(J||(J=Object(le.a)(["\n    ","\n    width: ","%;\n    height: 100%;\n    /* line-height: 25px; */\n    border-top: 1px solid #747474;\n    border-bottom: 1px solid #747474;\n    text-align: ",";\n    text-align: ",";\n    border-radius: ",";\n    padding: 0 10px;\n    box-sizing: border-box;\n    background-color: #8fa2aa;\n    color: #515151;\n    font-size: 16px;\n    ","\n    vertical-align: top;\n    transition: background-color 0.3s;\n"])),ue.a.CSS_LABEL_MIDIUM,(function(e){return e.rate}),(function(e){return e.isLeft?Object(se.a)(V||(V=Object(le.a)(["\n        border-left: 1px solid #747474;\n    "]))):Object(se.a)(Y||(Y=Object(le.a)(["\n        border-right: 1px solid #747474;\n    "])))}),(function(e){return e.isLeft?"right":"left"}),(function(e){return e.isLeft?"8px 0 0 8px":"0 8px 8px 0"}),(function(e){return e.isEditable?Object(se.a)(X||(X=Object(le.a)(["\n        ","\n    "])),e.isUse?Object(se.a)(G||(G=Object(le.a)(["\n            color: #b30000;\n            font-size: 22px;\n            background-color: #dae7ec;\n        "]))):""):Object(se.a)(K||(K=Object(le.a)(["\n        ",";\n    "])),e.isUse?Object(se.a)(Q||(Q=Object(le.a)(["\n            color: #110070;\n            font-size: 22px;\n            background-color: #dae7ec;\n        "]))):"")})),Se=se.b.div(Z||(Z=Object(le.a)(["\n    ","\n    color: #990000;\n    /* background-color: #0a0a0a40; */\n    font-style: italic;\n    margin: 4px 0 0 8px;\n"])),ue.a.CSS_LABEL_SMALL),Ce=se.b.div($||($=Object(le.a)(["\n    display: inline-block;\n    ","\n    margin: 0 0 0 6px;\n    padding: 4px;\n    width: calc(100% - 12px);\n    ","\n    background-color: ",";\n    border: 1px solid #000;\n    box-sizing: border-box;\n    border-radius: 4px;\n    text-align: left;\n    ","\n"])),(function(e){return e.isDisable?Object(se.a)(ee||(ee=Object(le.a)(["\n        display: none;\n    "]))):""}),(function(e){return void 0==e.height?"":Object(se.a)(ne||(ne=Object(le.a)(["\n        height: ","px;\n    "])),e.height)}),(function(e){return e.backgroundColor}),(function(e){return e.isEnable?"":ue.a.CSS_BUTTON_DISABLE})),Te=se.b.div(te||(te=Object(le.a)(["\n    margin: 4px 0 0 0;\n    display: inline-block;\n    background-color: #e7e5e561;\n    border: solid 1px #949494;\n    width: 100%;\n    height: ","px;\n    padding: 2px;\n    box-sizing: border-box;\n    text-align: left;\n    font-size: ","px;\n    color: ",";\n    overflow-y: auto;\n"])),(function(e){return e.height}),ue.a.FONT_SMALL,(function(e){return e.color})),Fe=se.b.textarea(ae||(ae=Object(le.a)(["\n   display: inline-block;\n   width: 100%;\n   height: 100%;\n   background-color: #ebf5f5;\n   font-size: 18px;\n   color: black;\n   border: none;\n   resize: none;\n   box-sizing: border-box;\n"])))},82:function(e,n,t){},88:function(e,n){},9:function(e,n,t){"use strict";(function(e){var a,r=t(6),i=t(7),c=t(8),o=t(11),l=t(54),s=t.n(l),u=t(41),d=t(69),b=t(57),f=t(12),j=t(1);!function(n){var t=n.DB_SERVER_DOMAIN="https://hkdev-db.glitch.me",l=n.APP_SERVER_DOMAIN="https://cyber-kohno.github.io/pf_apps/v1.8.3",p=function(){return new b.a("pf-user",8)},h=(n.getHashedFromUserSeq=function(e){var n=p().encode(e);return u.a.encode(n,!0)},n.getDecryptionedUserSeq=function(e){var n=p();return Number(n.decode(u.a.decode(e)))},function(){return new b.a("pf",8)}),m=n.getHashedFromProjectSeq=function(e){var n=h().encode(e);return u.a.encode(n,!0)},x=(n.getDecryptionedProjectSeq=function(e){var n=h();return Number(n.decode(u.a.decode(e)))},n.getPreviewURL=function(e){var n=m(e);return"".concat(l,"/#/preview?v=").concat(n)},n.sendQueryRequestToMailAPI=function(e){return fetch(t+"/mail",function(e){return{mode:"cors",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}}(e))},n.sendQueryRequestToAPI=function(e,n){return fetch(t+"/"+e,function(e){return{mode:"cors",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sql:e,databaseName:"pf1"})}}(n))}),g=n.findUserInfoList=Object(o.a)(Object(c.a)().mark((function e(){var n,t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("select","SELECT id, email FROM user_tbl");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),v=(n.findUserIdList=Object(o.a)(Object(c.a)().mark((function e(){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e)}))),n.findUserInfoFromEmail=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n){var t,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("select","SELECT seq, id FROM user_tbl WHERE email = '".concat(n,"'"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.findUserInfoFromSeq=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n){var t,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("select","SELECT seq, id, password, email FROM user_tbl WHERE seq = ".concat(n));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.findUserInfoLogin=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n,t){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("select","SELECT seq, id, password, email FROM user_tbl WHERE id = '".concat(n,"' and password = '").concat(t,"'"));case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),n.findUserInfoSeq=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n){var t,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("select","SELECT seq, id, password, email FROM user_tbl WHERE seq = ".concat(n));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.getNextUserSeq=Object(o.a)(Object(c.a)().mark((function e(){var n,t,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("select","SELECT seq FROM sqlite_sequence WHERE name = 'user_tbl'");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,r=t[0].seq+1,a.sendQueryRequestToAPI("update","update sqlite_sequence set seq = seq + 1 where name='user_tbl'"),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),n.findUserScoreList=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n){var t,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.sendQueryRequestToAPI("select","SELECT seq, dispnam, share FROM scoretbl WHERE user_seq = ".concat(n));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.findUserProjectList=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n,t){var r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?"and type = 'story'":"",e.next=3,a.sendQueryRequestToAPI("select","SELECT owner, seq, type, name, source, lastmod FROM prjcttbl WHERE owner = ".concat(n," ").concat(r,"order by seq"));case 3:return i=e.sent,e.next=6,i.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),n.loadFile=function(e,n){Object(o.a)(Object(c.a)().mark((function t(){var o,l,s,u,d,b,p,h;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.showOpenFilePicker();case 2:return o=t.sent,l=Object(i.a)(o,1),s=l[0],t.next=7,s.getFile();case 7:return u=t.sent,t.next=10,u.text();case 10:d=t.sent,e.fileHandle=s,b=a.unZip(d),(p=JSON.parse(b)).hasOwnProperty("scenarioData")?(h=p,e.libraryData=h.libraryData,e.storyData=h.scenarioData):e.libraryData=p,e.system.dialog=Object(j.jsx)(f.a.Component,{message:"Successfully file loaded!"}),n(Object(r.a)({},e));case 17:case"end":return t.stop()}}),t)})))()},n.saveFileBak=function(e,n){var t=e.libraryData,i=e.fileHandle,l=JSON.stringify(t);null!=i?Object(o.a)(Object(c.a)().mark((function t(){var o,s;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.createWritable();case 2:return o=t.sent,s=a.gZip(l),t.next=6,o.write(s);case 6:return t.next=8,o.close();case 8:e.system.dialog=Object(j.jsx)(f.a.Component,{message:"successfully overwritten!"}),n(Object(r.a)({},e));case 10:case"end":return t.stop()}}),t)})))():window.showSaveFilePicker({types:[{accept:{"text/plain":[".plgc"]}}]}).then((function(t){Object(o.a)(Object(c.a)().mark((function i(){var o,s;return Object(c.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.createWritable();case 2:return o=i.sent,s=a.gZip(l),i.next=6,o.write(s);case 6:return i.next=8,o.close();case 8:e.fileHandle=t,e.system.dialog=Object(j.jsx)(f.a.Component,{message:"Successfully written to file!"}),n(Object(r.a)({},e));case 11:case"end":return i.stop()}}),i)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))},n.saveLibraryFile=function(e,n){var t=e.libraryData,a=JSON.stringify(t);v(e,n,a,"plgc")},n.saveScenarioFile=function(e,n){var t={libraryData:e.libraryData,scenarioData:e.storyData},a=JSON.stringify(t);v(e,n,a,"pstr")},n.saveFile=function(e,n,t,i){var l=e.fileHandle,s={types:[{accept:{"text/plain":[".".concat(i)]}}]};null!=l?Object(o.a)(Object(c.a)().mark((function i(){var o,s;return Object(c.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.createWritable();case 2:return o=i.sent,s=a.gZip(t),i.next=6,o.write(s);case 6:return i.next=8,o.close();case 8:e.system.dialog=Object(j.jsx)(f.a.Component,{message:"successfully overwritten!"}),n(Object(r.a)({},e));case 10:case"end":return i.stop()}}),i)})))():window.showSaveFilePicker(s).then((function(i){Object(o.a)(Object(c.a)().mark((function o(){var l,s;return Object(c.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,i.createWritable();case 2:return l=c.sent,s=a.gZip(t),c.next=6,l.write(s);case 6:return c.next=8,l.close();case 8:e.fileHandle=i,e.system.dialog=Object(j.jsx)(f.a.Component,{message:"Successfully written to file!"}),n(Object(r.a)({},e));case 11:case"end":return c.stop()}}),o)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))});n.getSHA256Hash=function(e){return Object(d.sha256)(e)},n.gZip=function(e){var n=encodeURIComponent(e);return s.a.gzipSync(n).toString("base64")},n.unZip=function(n){var t=e.from(n,"base64"),a=s.a.unzipSync(t);return decodeURIComponent(a.toString())},n.getStringFromDate=function(e){var n=e.getFullYear().toString(),t=(1+e.getMonth()).toString(),a=e.getDate().toString(),r=e.getHours().toString(),i=e.getMinutes().toString(),c=e.getSeconds().toString(),o="YYYY-MM-DD hh:mm:ss";return o=(o=(o=(o=(o=(o=o.replace(/YYYY/g,n)).replace(/MM/g,t)).replace(/DD/g,a)).replace(/hh/g,r)).replace(/mm/g,i)).replace(/ss/g,c)},n.getDirectUrl=function(e,n){return"".concat(l,"/#/").concat(e,"?v=").concat(m(n))}}(a||(a={})),n.a=a}).call(this,t(32).Buffer)},90:function(e,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.48810e53.chunk.js.map